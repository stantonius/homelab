2023-03-25 20:57:19,606 p=38584 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-25 20:57:19,606 p=38584 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 20:57:19,606 p=38584 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 20:57:19,611 p=38584 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 20:57:20,050 p=38584 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ***********************************************************************************************************************************************************************************
2023-03-25 20:57:20,068 p=38584 u=craig n=ansible | TASK [Gathering Facts ] *****************************************************************************************************************************************************************************************************
2023-03-25 20:57:21,658 p=38584 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:57:21,690 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ********************************************************************************************************************************************************
2023-03-25 20:57:22,559 p=38584 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:57:22,575 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] **********************************************************************************
2023-03-25 20:57:23,011 p=38584 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:57:23,028 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ********************************************************************
2023-03-25 20:57:23,827 p=38584 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:57:23,857 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] *******************************************************************************************************************
2023-03-25 20:57:24,213 p=38584 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-25 20:57:24,228 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 20:57:24,238 p=38584 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-25 20:57:24,254 p=38584 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 20:58:13,743 p=38584 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for creating VM. Last line in task before timeout: [{'t': '  Logical volume \"vm-110-disk-0\" created.', 'n': 1}]"}
2023-03-25 20:58:13,746 p=38584 u=craig n=ansible | PLAY RECAP ******************************************************************************************************************************************************************************************************************
2023-03-25 20:58:13,746 p=38584 u=craig n=ansible | 192.168.1.99               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-25 20:58:58,605 p=38862 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-25 20:58:58,605 p=38862 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 20:58:58,605 p=38862 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 20:58:58,609 p=38862 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 20:58:58,880 p=38862 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] **********************************************************************************************************************************************************************
2023-03-25 20:58:58,897 p=38862 u=craig n=ansible | TASK [Gathering Facts ] ****************************************************************************************************************************************************************************************
2023-03-25 20:59:00,286 p=38862 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:59:00,317 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] *******************************************************************************************************************************************
2023-03-25 20:59:01,177 p=38862 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:59:01,200 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *********************************************************************
2023-03-25 20:59:01,588 p=38862 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:59:01,607 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] *******************************************************
2023-03-25 20:59:02,458 p=38862 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:59:02,493 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] ******************************************************************************************************
2023-03-25 20:59:02,802 p=38862 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-25 20:59:02,818 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 20:59:02,827 p=38862 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-25 20:59:02,844 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 20:59:03,304 p=38862 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 20:59:03,324 p=38862 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] ***********************************************************
2023-03-25 20:59:32,865 p=38862 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-25 20:59:32,866 p=38862 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for starting VM. Last line in task before timeout: [{'n': 1, 't': 'no content'}]"}
2023-03-25 20:59:32,868 p=38862 u=craig n=ansible | PLAY RECAP *****************************************************************************************************************************************************************************************************
2023-03-25 20:59:32,869 p=38862 u=craig n=ansible | 192.168.1.99               : ok=6    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-25 21:00:07,093 p=39052 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-25 21:00:07,093 p=39052 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 21:00:07,094 p=39052 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 21:00:07,097 p=39052 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 21:00:07,370 p=39052 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] **********************************************************************************************************************************************************************
2023-03-25 21:00:07,387 p=39052 u=craig n=ansible | TASK [Gathering Facts ] ****************************************************************************************************************************************************************************************
2023-03-25 21:00:09,108 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:09,139 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] *******************************************************************************************************************************************
2023-03-25 21:00:10,402 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:10,434 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *********************************************************************
2023-03-25 21:00:11,434 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:11,461 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] *******************************************************
2023-03-25 21:00:12,770 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:12,818 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] ******************************************************************************************************
2023-03-25 21:00:13,127 p=39052 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-25 21:00:13,143 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 21:00:13,152 p=39052 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-25 21:00:13,169 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 21:00:13,811 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:13,838 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] ***********************************************************
2023-03-25 21:00:14,348 p=39052 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-25 21:00:14,349 p=39052 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 21:00:14,378 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *************************************************************************************
2023-03-25 21:00:14,415 p=39052 u=craig n=ansible | changed: [192.168.1.99]
2023-03-25 21:00:14,441 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ************************************************
2023-03-25 21:00:14,846 p=39052 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-25 21:00:14,881 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] ******************************************************************************
2023-03-25 21:00:20,666 p=39052 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.4]
2023-03-25 21:00:20,707 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ************************************************************************************************************
2023-03-25 21:00:22,221 p=39052 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.4]
2023-03-25 21:00:22,257 p=39052 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ************************************************************************************************************************
2023-03-25 21:01:29,183 p=39052 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.4]
2023-03-25 21:01:29,216 p=39052 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] ***********************************************************************************
2023-03-25 21:01:29,829 p=39052 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.4]
2023-03-25 21:01:29,905 p=39052 u=craig n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: caddy

2023-03-25 21:01:29,905 p=39052 u=craig n=ansible | PLAY [Create a user and lock down the container] ***************************************************************************************************************************************************************
2023-03-25 21:01:29,905 p=39052 u=craig n=ansible | skipping: no hosts matched
2023-03-25 21:01:29,923 p=39052 u=craig n=ansible | PLAY [Install gui] *********************************************************************************************************************************************************************************************
2023-03-25 21:01:29,923 p=39052 u=craig n=ansible | skipping: no hosts matched
2023-03-25 21:01:29,923 p=39052 u=craig n=ansible | PLAY RECAP *****************************************************************************************************************************************************************************************************
2023-03-25 21:01:29,923 p=39052 u=craig n=ansible | 192.168.1.99               : ok=13   changed=4    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-25 22:12:06,281 p=44757 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-25 22:12:06,281 p=44757 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 22:12:06,282 p=44757 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 22:12:06,287 p=44757 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 22:12:06,560 p=44757 u=craig n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: caddy

2023-03-25 22:12:06,561 p=44757 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:12:06,561 p=44757 u=craig n=ansible | skipping: no hosts matched
2023-03-25 22:12:06,561 p=44757 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:14:13,617 p=44927 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:26: Expected key=value host variable assignment, got: ansible_host

2023-03-25 22:14:13,617 p=44927 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 22:14:13,617 p=44927 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 22:14:13,622 p=44927 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 22:14:13,788 p=44927 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:14:13,799 p=44927 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:14:14,019 p=44927 u=craig n=ansible | fatal: [caddy]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: Warning: Permanently added '192.168.1.4' (ED25519) to the list of known hosts.\r\nstantonius@192.168.1.4: Permission denied (publickey,password).", "unreachable": true}
2023-03-25 22:14:14,020 p=44927 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:14:14,020 p=44927 u=craig n=ansible | caddy                      : ok=0    changed=0    unreachable=1    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-25 22:15:00,065 p=45030 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:26: Expected key=value host variable assignment, got: ansible_host

2023-03-25 22:15:00,065 p=45030 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-25 22:15:00,065 p=45030 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-25 22:15:00,069 p=45030 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-25 22:15:00,355 p=45030 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] **********************************************************************************************************************************************************************
2023-03-25 22:15:00,372 p=45030 u=craig n=ansible | TASK [Gathering Facts ] ****************************************************************************************************************************************************************************************
2023-03-25 22:15:02,059 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:02,090 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] *******************************************************************************************************************************************
2023-03-25 22:15:02,904 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:02,926 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *********************************************************************
2023-03-25 22:15:03,284 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:03,301 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] *******************************************************
2023-03-25 22:15:04,108 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:04,142 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] ******************************************************************************************************
2023-03-25 22:15:04,462 p=45030 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-25 22:15:04,477 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 22:15:04,487 p=45030 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-25 22:15:04,504 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-25 22:15:04,973 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:04,995 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] ***********************************************************
2023-03-25 22:15:05,371 p=45030 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-25 22:15:05,371 p=45030 u=craig n=ansible | ok: [192.168.1.99]
2023-03-25 22:15:05,394 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *************************************************************************************
2023-03-25 22:15:05,430 p=45030 u=craig n=ansible | changed: [192.168.1.99]
2023-03-25 22:15:05,457 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ************************************************
2023-03-25 22:15:05,784 p=45030 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-25 22:15:05,818 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] ******************************************************************************
2023-03-25 22:15:08,483 p=45030 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.4]
2023-03-25 22:15:08,518 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ************************************************************************************************************
2023-03-25 22:15:10,022 p=45030 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.4]
2023-03-25 22:15:10,058 p=45030 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ************************************************************************************************************************
2023-03-25 22:15:11,041 p=45030 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.4]
2023-03-25 22:15:11,075 p=45030 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] ***********************************************************************************
2023-03-25 22:15:11,658 p=45030 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.4]
2023-03-25 22:15:11,749 p=45030 u=craig n=ansible | PLAY [Create a user and lock down the container] ***************************************************************************************************************************************************************
2023-03-25 22:15:11,761 p=45030 u=craig n=ansible | TASK [Gathering Facts ] ****************************************************************************************************************************************************************************************
2023-03-25 22:15:12,681 p=45030 u=craig n=ansible | ok: [caddy]
2023-03-25 22:15:12,712 p=45030 u=craig n=ansible | TASK [create_user : Ensure group sudo exists name=sudo, state=present] *****************************************************************************************************************************************
2023-03-25 22:15:13,063 p=45030 u=craig n=ansible | ok: [caddy]
2023-03-25 22:15:13,079 p=45030 u=craig n=ansible | TASK [create_user : Allow sudo group to have passwordless sudo path=/etc/sudoers, state=present, regexp=^%sudo, line=%sudo ALL=(ALL) NOPASSWD: ALL, validate=/usr/sbin/visudo -cf %s] **************************
2023-03-25 22:15:13,467 p=45030 u=craig n=ansible | changed: [caddy]
2023-03-25 22:15:13,483 p=45030 u=craig n=ansible | TASK [create_user : Create a new user name={{machine_user}}, password={{machine_password | string | password_hash('sha512')}}, shell=/bin/bash, groups=sudo, append=True] **************************************
2023-03-25 22:15:14,722 p=45030 u=craig n=ansible | changed: [caddy]
2023-03-25 22:15:14,744 p=45030 u=craig n=ansible | TASK [create_user : Create the .ssh directory path=/home/{{machine_user}}/.ssh, state=directory, mode=0700, owner={{machine_user}}, group={{machine_user}}] ****************************************************
2023-03-25 22:15:15,032 p=45030 u=craig n=ansible | changed: [caddy]
2023-03-25 22:15:15,046 p=45030 u=craig n=ansible | TASK [create_user : Copy the ssh key to the new user src={{machine_ssh_key}}, dest=/home/{{machine_user}}/.ssh/authorized_keys, mode=0600, owner={{machine_user}}, group={{machine_user}}] *********************
2023-03-25 22:15:15,726 p=45030 u=craig n=ansible | changed: [caddy]
2023-03-25 22:15:15,756 p=45030 u=craig n=ansible | TASK [lockdown : Ensure the /run/sshd directory exists path=/run/sshd, state=directory, mode=493] **************************************************************************************************************
2023-03-25 22:15:16,046 p=45030 u=craig n=ansible | ok: [caddy]
2023-03-25 22:15:16,063 p=45030 u=craig n=ansible | TASK [lockdown : Update SSH configuration to be more secure dest=/etc/ssh/sshd_config, regexp={{ item.regexp }}, line={{ item.line }}, state=present, validate=sshd -T -f %s, mode=420] ************************
2023-03-25 22:15:16,368 p=45030 u=craig n=ansible | changed: [caddy] => (item={'regexp': '^#?PasswordAuthentication', 'line': 'PasswordAuthentication no'})
2023-03-25 22:15:16,650 p=45030 u=craig n=ansible | changed: [caddy] => (item={'regexp': '^#?PermitRootLogin', 'line': 'PermitRootLogin no'})
2023-03-25 22:15:16,923 p=45030 u=craig n=ansible | changed: [caddy] => (item={'regexp': '^#?Port', 'line': 'Port 22'})
2023-03-25 22:15:17,229 p=45030 u=craig n=ansible | changed: [caddy] => (item={'regexp': '^#?PermitEmptyPasswords', 'line': 'PermitEmptyPasswords no'})
2023-03-25 22:15:17,265 p=45030 u=craig n=ansible | RUNNING HANDLER [restart ssh name=sshd, state=restarted] *******************************************************************************************************************************************************
2023-03-25 22:15:17,918 p=45030 u=craig n=ansible | changed: [caddy]
2023-03-25 22:15:17,967 p=45030 u=craig n=ansible | PLAY [Install gui] *********************************************************************************************************************************************************************************************
2023-03-25 22:15:17,983 p=45030 u=craig n=ansible | TASK [Gathering Facts ] ****************************************************************************************************************************************************************************************
2023-03-25 22:15:19,051 p=45030 u=craig n=ansible | ok: [caddy]
2023-03-25 22:15:19,081 p=45030 u=craig n=ansible | TASK [lxc_gui : Ensure system is up to date update_cache=True, upgrade=True] ***********************************************************************************************************************************
2023-03-25 22:15:19,092 p=45030 u=craig n=ansible | skipping: [caddy]
2023-03-25 22:15:19,107 p=45030 u=craig n=ansible | TASK [lxc_gui : Install xrdp and Xfce4 desktop and force if needed and install dependencies and recommends name={{item}}, state=present, force=True, install_recommends=True] **********************************
2023-03-25 22:15:19,120 p=45030 u=craig n=ansible | skipping: [caddy] => (item=xfce4) 
2023-03-25 22:15:19,121 p=45030 u=craig n=ansible | skipping: [caddy] => (item=xfce4-session) 
2023-03-25 22:15:19,121 p=45030 u=craig n=ansible | skipping: [caddy] => (item=xrdp) 
2023-03-25 22:15:19,137 p=45030 u=craig n=ansible | TASK [lxc_gui : Make sure xrdp is running name=xrdp, state=started, enabled=True] ******************************************************************************************************************************
2023-03-25 22:15:19,148 p=45030 u=craig n=ansible | skipping: [caddy]
2023-03-25 22:15:19,165 p=45030 u=craig n=ansible | TASK [lxc_gui : Install chrome using wget and apt install deb=https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb, state=present, force=True, install_recommends=True] *******************
2023-03-25 22:15:19,176 p=45030 u=craig n=ansible | skipping: [caddy]
2023-03-25 22:15:19,220 p=45030 u=craig n=ansible | PLAY RECAP *****************************************************************************************************************************************************************************************************
2023-03-25 22:15:19,220 p=45030 u=craig n=ansible | 192.168.1.99               : ok=13   changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-25 22:15:19,221 p=45030 u=craig n=ansible | caddy                      : ok=10   changed=6    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2023-03-25 22:16:04,529 p=45412 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:16:04,540 p=45412 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:16:05,642 p=45412 u=craig n=ansible | ok: [caddy]
2023-03-25 22:16:05,653 p=45412 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:16:07,094 p=45412 u=craig n=ansible | ok: [caddy]
2023-03-25 22:16:07,103 p=45412 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:16:09,029 p=45412 u=craig n=ansible | changed: [caddy] => (item=apt-transport-https)
2023-03-25 22:16:09,818 p=45412 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:16:14,163 p=45412 u=craig n=ansible | changed: [caddy] => (item=curl)
2023-03-25 22:16:20,886 p=45412 u=craig n=ansible | changed: [caddy] => (item=gnupg)
2023-03-25 22:16:21,702 p=45412 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:16:38,658 p=45412 u=craig n=ansible | changed: [caddy] => (item=software-properties-common)
2023-03-25 22:16:38,669 p=45412 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:16:39,519 p=45412 u=craig n=ansible | changed: [caddy]
2023-03-25 22:16:39,528 p=45412 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:16:41,574 p=45412 u=craig n=ansible | changed: [caddy]
2023-03-25 22:16:41,583 p=45412 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:17:06,281 p=45412 u=craig n=ansible | changed: [caddy]
2023-03-25 22:17:06,293 p=45412 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:17:07,045 p=45412 u=craig n=ansible | ok: [caddy]
2023-03-25 22:17:07,054 p=45412 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:17:07,570 p=45412 u=craig n=ansible | changed: [caddy]
2023-03-25 22:17:07,589 p=45412 u=craig n=ansible | TASK [docker_swarm_node : Check if Docker Swarm is already initialized _raw_params=docker info -f "{{ '{{.Swarm.LocalNodeState}}' }}"] *********************************************************************
2023-03-25 22:17:08,708 p=45412 u=craig n=ansible | ok: [caddy]
2023-03-25 22:17:08,716 p=45412 u=craig n=ansible | TASK [docker_swarm_node : Initialize Docker Swarm _raw_params=docker swarm init] ***************************************************************************************************************************
2023-03-25 22:17:09,522 p=45412 u=craig n=ansible | changed: [caddy]
2023-03-25 22:17:09,532 p=45412 u=craig n=ansible | TASK [docker_swarm_node : Join Docker Swarm as a worker _raw_params=docker swarm join --token "{{ hostvars[groups['lxc']['swarm-master']].swarm_init_result.stdout_lines[-2].split(' ')[-1] }}" "{{ hostvars[groups['lxc']['swarm-master']].ansible_host }}:2377"] ***
2023-03-25 22:17:09,549 p=45412 u=craig n=ansible | fatal: [caddy]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'list object' has no attribute 'swarm-master'\n\nThe error appears to be in '/Users/craig/Projects/homelab/ansible/roles/docker_swarm_node/tasks/main.yaml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Join Docker Swarm as a worker\n  ^ here\n"}
2023-03-25 22:17:09,550 p=45412 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:17:09,550 p=45412 u=craig n=ansible | caddy                      : ok=10   changed=6    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:19:00,331 p=45868 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:19:00,341 p=45868 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:19:01,811 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:01,822 p=45868 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:19:03,703 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:03,712 p=45868 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:19:04,470 p=45868 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:19:05,198 p=45868 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:19:05,978 p=45868 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:19:06,772 p=45868 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:19:07,592 p=45868 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:19:08,404 p=45868 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:19:08,416 p=45868 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:19:09,048 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:09,058 p=45868 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:19:09,584 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:09,590 p=45868 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:19:10,341 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:10,350 p=45868 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:19:10,976 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:10,985 p=45868 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:19:11,413 p=45868 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:11,432 p=45868 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-25 22:19:11,443 p=45868 u=craig n=ansible | fatal: [caddy]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-25 22:19:11,445 p=45868 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:19:11,445 p=45868 u=craig n=ansible | caddy                      : ok=8    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:19:49,994 p=46090 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:19:50,004 p=46090 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:19:51,114 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:51,127 p=46090 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:19:52,620 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:52,630 p=46090 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:19:53,391 p=46090 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:19:54,181 p=46090 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:19:54,947 p=46090 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:19:55,695 p=46090 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:19:56,439 p=46090 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:19:57,251 p=46090 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:19:57,262 p=46090 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:19:57,892 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:57,902 p=46090 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:19:58,437 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:58,446 p=46090 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:19:59,296 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:59,306 p=46090 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:19:59,959 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:19:59,968 p=46090 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:20:00,398 p=46090 u=craig n=ansible | ok: [caddy]
2023-03-25 22:20:00,421 p=46090 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:20:00,421 p=46090 u=craig n=ansible | caddy                      : ok=8    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-25 22:23:51,466 p=46564 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:23:51,476 p=46564 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:23:52,896 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:23:52,907 p=46564 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:23:54,529 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:23:54,538 p=46564 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:23:55,267 p=46564 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:23:55,945 p=46564 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:23:56,771 p=46564 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:23:57,488 p=46564 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:23:58,198 p=46564 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:23:58,958 p=46564 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:23:58,970 p=46564 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:23:59,577 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:23:59,586 p=46564 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:24:00,102 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:24:00,111 p=46564 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:24:00,805 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:24:00,814 p=46564 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:24:01,395 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:24:01,402 p=46564 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:24:01,828 p=46564 u=craig n=ansible | ok: [caddy]
2023-03-25 22:24:01,841 p=46564 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:24:02,230 p=46564 u=craig n=ansible | changed: [caddy]
2023-03-25 22:24:02,240 p=46564 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:24:02,984 p=46564 u=craig n=ansible | changed: [caddy]
2023-03-25 22:24:02,990 p=46564 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:24:03,631 p=46564 u=craig n=ansible | changed: [caddy]
2023-03-25 22:24:03,641 p=46564 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:24:03,716 p=46564 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:24:03,716 p=46564 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:24:03,717 p=46564 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:24:03,717 p=46564 u=craig n=ansible | caddy                      : ok=11   changed=3    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:25:24,160 p=46861 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:25:24,170 p=46861 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:25:25,587 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:25,600 p=46861 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:25:27,076 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:27,083 p=46861 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:25:27,791 p=46861 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:25:28,522 p=46861 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:25:29,228 p=46861 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:25:29,920 p=46861 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:25:30,608 p=46861 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:25:31,309 p=46861 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:25:31,316 p=46861 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:25:31,905 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:31,911 p=46861 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:25:32,422 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:32,432 p=46861 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:25:33,122 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:33,130 p=46861 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:25:33,747 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:33,755 p=46861 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:25:34,205 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:34,219 p=46861 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:25:34,610 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:34,619 p=46861 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:25:35,232 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:35,239 p=46861 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:25:35,768 p=46861 u=craig n=ansible | ok: [caddy]
2023-03-25 22:25:35,779 p=46861 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:25:35,860 p=46861 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:25:35,861 p=46861 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:25:35,861 p=46861 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:25:35,861 p=46861 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:28:05,888 p=47332 u=craig n=ansible | [WARNING]: While constructing a mapping from /Users/craig/Projects/homelab/ansible/playbooks/caddy/caddy.yaml, line 5, column 7, found a duplicate dict key (name). Using last defined value only.

2023-03-25 22:28:05,943 p=47332 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:28:05,954 p=47332 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:28:07,390 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:07,404 p=47332 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:28:08,756 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:08,766 p=47332 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:28:09,603 p=47332 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:28:10,418 p=47332 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:28:11,237 p=47332 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:28:11,967 p=47332 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:28:12,691 p=47332 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:28:13,453 p=47332 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:28:13,464 p=47332 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:28:14,085 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:14,095 p=47332 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:28:14,630 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:14,640 p=47332 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:28:15,436 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:15,445 p=47332 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:28:16,075 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:16,083 p=47332 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:28:16,514 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:16,527 p=47332 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:28:16,919 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:16,928 p=47332 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:28:17,562 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:17,571 p=47332 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:28:18,100 p=47332 u=craig n=ansible | ok: [caddy]
2023-03-25 22:28:18,111 p=47332 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:28:18,183 p=47332 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:28:18,183 p=47332 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:28:18,184 p=47332 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:28:18,184 p=47332 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:33:13,848 p=47906 u=craig n=ansible | [WARNING]: While constructing a mapping from /Users/craig/Projects/homelab/ansible/playbooks/caddy/caddy.yaml, line 5, column 7, found a duplicate dict key (name). Using last defined value only.

2023-03-25 22:33:13,908 p=47906 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:33:13,919 p=47906 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:33:15,497 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:15,510 p=47906 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:33:16,965 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:16,976 p=47906 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:33:17,718 p=47906 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-25 22:33:18,548 p=47906 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-25 22:33:19,299 p=47906 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-25 22:33:20,181 p=47906 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-25 22:33:20,916 p=47906 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-25 22:33:21,713 p=47906 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-25 22:33:21,725 p=47906 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:33:22,367 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:22,376 p=47906 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:33:22,881 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:22,891 p=47906 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:33:23,667 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:23,677 p=47906 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:33:24,316 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:24,325 p=47906 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:33:24,749 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:24,762 p=47906 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:33:25,156 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:25,165 p=47906 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:33:25,766 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:25,775 p=47906 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:33:26,293 p=47906 u=craig n=ansible | ok: [caddy]
2023-03-25 22:33:26,303 p=47906 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:33:26,394 p=47906 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:33:26,394 p=47906 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:33:26,395 p=47906 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:33:26,395 p=47906 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:33:52,463 p=48136 u=craig n=ansible | ansible-playbook [core 2.13.5]
  config file = /Users/craig/Projects/homelab/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/6.5.0/libexec/lib/python3.10/site-packages/ansible
  ansible collection location = /Users/craig/.ansible/collections:/usr/share/ansible/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.10.8 (main, Oct 21 2022, 22:22:30) [Clang 14.0.0 (clang-1400.0.29.202)]
  jinja version = 3.1.2
  libyaml = True
2023-03-25 22:33:52,463 p=48136 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-25 22:34:04,751 p=48136 u=craig n=ansible | [WARNING]: While constructing a mapping from /Users/craig/Projects/homelab/ansible/playbooks/caddy/caddy.yaml, line 5, column 7, found a duplicate dict key (name). Using last defined value only.

2023-03-25 22:34:04,790 p=48136 u=craig n=ansible | redirecting (type: modules) ansible.builtin.docker_compose to community.docker.docker_compose
2023-03-25 22:34:04,805 p=48136 u=craig n=ansible | Skipping callback 'default', as we already have a stdout callback.
2023-03-25 22:34:04,805 p=48136 u=craig n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2023-03-25 22:34:04,805 p=48136 u=craig n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2023-03-25 22:34:04,805 p=48136 u=craig n=ansible | PLAYBOOK: caddy.yaml ***************************************************************************************************************************************************************************************
2023-03-25 22:34:04,805 p=48136 u=craig n=ansible | 1 plays in ansible/playbooks/caddy/caddy.yaml
2023-03-25 22:34:04,808 p=48136 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:34:04,818 p=48136 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:34:05,901 p=48136 u=craig n=ansible | ok: [caddy]
2023-03-25 22:34:05,907 p=48136 u=craig n=ansible | META: ran handlers
2023-03-25 22:34:05,911 p=48136 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:34:07,385 p=48136 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679797001, "cache_updated": false, "changed": false}
2023-03-25 22:34:07,393 p=48136 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:34:08,221 p=48136 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-25 22:34:09,033 p=48136 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-25 22:34:09,824 p=48136 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-25 22:34:10,556 p=48136 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-25 22:34:11,487 p=48136 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-25 22:34:12,211 p=48136 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-25 22:34:12,222 p=48136 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:34:12,856 p=48136 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-25 22:34:12,865 p=48136 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:34:13,382 p=48136 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-25 22:34:13,392 p=48136 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:34:14,145 p=48136 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679797001, "cache_updated": false, "changed": false}
2023-03-25 22:34:14,160 p=48136 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:34:14,786 p=48136 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1731959000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "97546240", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-25 22:34:14,795 p=48136 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:34:15,219 p=48136 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-25 22:34:15,226 p=48136 u=craig n=ansible | META: role_complete for caddy
2023-03-25 22:34:15,232 p=48136 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:34:15,606 p=48136 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-25 22:34:15,614 p=48136 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:34:16,229 p=48136 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-25 22:34:16,238 p=48136 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:34:16,757 p=48136 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-25 22:34:16,768 p=48136 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:34:16,847 p=48136 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:34:16,847 p=48136 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:34:16,848 p=48136 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:34:16,848 p=48136 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-25 22:35:43,285 p=48458 u=craig n=ansible | ansible-playbook [core 2.13.5]
  config file = /Users/craig/Projects/homelab/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/6.5.0/libexec/lib/python3.10/site-packages/ansible
  ansible collection location = /Users/craig/.ansible/collections:/usr/share/ansible/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.10.8 (main, Oct 21 2022, 22:22:30) [Clang 14.0.0 (clang-1400.0.29.202)]
  jinja version = 3.1.2
  libyaml = True
2023-03-25 22:35:43,285 p=48458 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-25 22:35:49,610 p=48458 u=craig n=ansible | [WARNING]: While constructing a mapping from /Users/craig/Projects/homelab/ansible/playbooks/caddy/caddy.yaml, line 5, column 7, found a duplicate dict key (name). Using last defined value only.

2023-03-25 22:35:49,649 p=48458 u=craig n=ansible | redirecting (type: modules) ansible.builtin.docker_compose to community.docker.docker_compose
2023-03-25 22:35:49,665 p=48458 u=craig n=ansible | Skipping callback 'default', as we already have a stdout callback.
2023-03-25 22:35:49,665 p=48458 u=craig n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2023-03-25 22:35:49,665 p=48458 u=craig n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2023-03-25 22:35:49,665 p=48458 u=craig n=ansible | PLAYBOOK: caddy.yaml ***************************************************************************************************************************************************************************************
2023-03-25 22:35:49,665 p=48458 u=craig n=ansible | 1 plays in ansible/playbooks/caddy/caddy.yaml
2023-03-25 22:35:49,667 p=48458 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-25 22:35:49,678 p=48458 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-25 22:35:51,047 p=48458 u=craig n=ansible | ok: [caddy]
2023-03-25 22:35:51,055 p=48458 u=craig n=ansible | META: ran handlers
2023-03-25 22:35:51,061 p=48458 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-25 22:35:52,761 p=48458 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679797001, "cache_updated": false, "changed": false}
2023-03-25 22:35:52,770 p=48458 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-25 22:35:53,583 p=48458 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-25 22:35:54,315 p=48458 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-25 22:35:55,114 p=48458 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-25 22:35:55,869 p=48458 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-25 22:35:56,653 p=48458 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-25 22:35:57,468 p=48458 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679797001, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-25 22:35:57,480 p=48458 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-25 22:35:58,101 p=48458 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-25 22:35:58,110 p=48458 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-25 22:35:58,615 p=48458 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-25 22:35:58,621 p=48458 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-25 22:35:59,359 p=48458 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679797001, "cache_updated": false, "changed": false}
2023-03-25 22:35:59,369 p=48458 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-25 22:36:00,001 p=48458 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "1854843000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "97484800", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-25 22:36:00,010 p=48458 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-25 22:36:00,435 p=48458 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-25 22:36:00,443 p=48458 u=craig n=ansible | META: role_complete for caddy
2023-03-25 22:36:00,449 p=48458 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-25 22:36:00,829 p=48458 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-25 22:36:00,838 p=48458 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-25 22:36:01,450 p=48458 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-25 22:36:01,459 p=48458 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-25 22:36:01,985 p=48458 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-25 22:36:01,996 p=48458 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-25 22:36:02,079 p=48458 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-25 22:36:02,080 p=48458 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-25 22:36:02,080 p=48458 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-25 22:36:02,081 p=48458 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 09:24:50,745 p=49565 u=craig n=ansible | ansible-playbook [core 2.13.5]
  config file = /Users/craig/Projects/homelab/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/6.5.0/libexec/lib/python3.10/site-packages/ansible
  ansible collection location = /Users/craig/.ansible/collections:/usr/share/ansible/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.10.8 (main, Oct 21 2022, 22:22:30) [Clang 14.0.0 (clang-1400.0.29.202)]
  jinja version = 3.1.2
  libyaml = True
2023-03-26 09:24:50,745 p=49565 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 09:24:59,490 p=49565 u=craig n=ansible | redirecting (type: modules) ansible.builtin.docker_compose to community.docker.docker_compose
2023-03-26 09:24:59,506 p=49565 u=craig n=ansible | Skipping callback 'default', as we already have a stdout callback.
2023-03-26 09:24:59,506 p=49565 u=craig n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2023-03-26 09:24:59,507 p=49565 u=craig n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2023-03-26 09:24:59,507 p=49565 u=craig n=ansible | PLAYBOOK: caddy.yaml ***************************************************************************************************************************************************************************************
2023-03-26 09:24:59,507 p=49565 u=craig n=ansible | 1 plays in ansible/playbooks/caddy/caddy.yaml
2023-03-26 09:24:59,509 p=49565 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 09:24:59,519 p=49565 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 09:25:00,927 p=49565 u=craig n=ansible | ok: [caddy]
2023-03-26 09:25:00,935 p=49565 u=craig n=ansible | META: ran handlers
2023-03-26 09:25:00,940 p=49565 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 09:25:04,138 p=49565 u=craig n=ansible | changed: [caddy] => {"cache_update_time": 1679837102, "cache_updated": true, "changed": true}
2023-03-26 09:25:04,147 p=49565 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 09:25:05,005 p=49565 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 09:25:05,750 p=49565 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 09:25:06,488 p=49565 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 09:25:07,233 p=49565 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 09:25:07,969 p=49565 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 09:25:08,689 p=49565 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 09:25:08,700 p=49565 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 09:25:09,398 p=49565 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 09:25:09,407 p=49565 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 09:25:09,896 p=49565 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 09:25:09,903 p=49565 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 09:25:10,728 p=49565 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 09:25:10,737 p=49565 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 09:25:11,333 p=49565 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "46599763000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "72863744", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 09:25:11,341 p=49565 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 09:25:11,758 p=49565 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 09:25:11,766 p=49565 u=craig n=ansible | META: role_complete for caddy
2023-03-26 09:25:11,771 p=49565 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 09:25:12,163 p=49565 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 09:25:12,172 p=49565 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 09:25:12,777 p=49565 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 09:25:12,786 p=49565 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 09:25:13,292 p=49565 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 09:25:13,303 p=49565 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 09:25:13,378 p=49565 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 09:25:13,378 p=49565 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 09:25:13,379 p=49565 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 09:25:13,379 p=49565 u=craig n=ansible | caddy                      : ok=11   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 09:29:21,450 p=50103 u=craig n=ansible | ansible-playbook [core 2.13.5]
  config file = /Users/craig/Projects/homelab/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/6.5.0/libexec/lib/python3.10/site-packages/ansible
  ansible collection location = /Users/craig/.ansible/collections:/usr/share/ansible/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.10.8 (main, Oct 21 2022, 22:22:30) [Clang 14.0.0 (clang-1400.0.29.202)]
  jinja version = 3.1.2
  libyaml = True
2023-03-26 09:29:21,450 p=50103 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 09:29:30,190 p=50103 u=craig n=ansible | redirecting (type: modules) ansible.builtin.docker_compose to community.docker.docker_compose
2023-03-26 09:29:30,205 p=50103 u=craig n=ansible | Skipping callback 'default', as we already have a stdout callback.
2023-03-26 09:29:30,205 p=50103 u=craig n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2023-03-26 09:29:30,205 p=50103 u=craig n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2023-03-26 09:29:30,205 p=50103 u=craig n=ansible | PLAYBOOK: caddy.yaml ***************************************************************************************************************************************************************************************
2023-03-26 09:29:30,205 p=50103 u=craig n=ansible | 1 plays in ansible/playbooks/caddy/caddy.yaml
2023-03-26 09:29:30,208 p=50103 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 09:29:30,217 p=50103 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 09:29:31,645 p=50103 u=craig n=ansible | ok: [caddy]
2023-03-26 09:29:31,652 p=50103 u=craig n=ansible | META: ran handlers
2023-03-26 09:29:31,659 p=50103 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 09:29:33,220 p=50103 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 09:29:33,229 p=50103 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 09:29:33,961 p=50103 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 09:29:34,674 p=50103 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 09:29:35,423 p=50103 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 09:29:36,165 p=50103 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 09:29:36,901 p=50103 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 09:29:37,648 p=50103 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 09:29:37,659 p=50103 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 09:29:38,265 p=50103 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 09:29:38,274 p=50103 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 09:29:38,784 p=50103 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 09:29:38,793 p=50103 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 09:29:39,545 p=50103 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 09:29:39,554 p=50103 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 09:29:40,178 p=50103 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "46918429000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "72863744", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 09:29:40,186 p=50103 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 09:29:40,613 p=50103 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 09:29:40,620 p=50103 u=craig n=ansible | META: role_complete for caddy
2023-03-26 09:29:40,625 p=50103 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 09:29:40,997 p=50103 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 09:29:41,005 p=50103 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 09:29:41,615 p=50103 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 09:29:41,624 p=50103 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 09:29:42,142 p=50103 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 09:29:42,152 p=50103 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 09:29:42,227 p=50103 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 09:29:42,228 p=50103 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 09:29:42,228 p=50103 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 09:29:42,228 p=50103 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 09:31:02,214 p=50552 u=craig n=ansible | ansible-playbook [core 2.13.5]
  config file = /Users/craig/Projects/homelab/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /opt/homebrew/Cellar/ansible/6.5.0/libexec/lib/python3.10/site-packages/ansible
  ansible collection location = /Users/craig/.ansible/collections:/usr/share/ansible/collections
  executable location = /opt/homebrew/bin/ansible-playbook
  python version = 3.10.8 (main, Oct 21 2022, 22:22:30) [Clang 14.0.0 (clang-1400.0.29.202)]
  jinja version = 3.1.2
  libyaml = True
2023-03-26 09:31:02,214 p=50552 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 09:31:08,592 p=50552 u=craig n=ansible | redirecting (type: modules) ansible.builtin.docker_compose to community.docker.docker_compose
2023-03-26 09:31:08,606 p=50552 u=craig n=ansible | Skipping callback 'default', as we already have a stdout callback.
2023-03-26 09:31:08,607 p=50552 u=craig n=ansible | Skipping callback 'minimal', as we already have a stdout callback.
2023-03-26 09:31:08,607 p=50552 u=craig n=ansible | Skipping callback 'oneline', as we already have a stdout callback.
2023-03-26 09:31:08,607 p=50552 u=craig n=ansible | PLAYBOOK: caddy.yaml ***************************************************************************************************************************************************************************************
2023-03-26 09:31:08,607 p=50552 u=craig n=ansible | 1 plays in ansible/playbooks/caddy/caddy.yaml
2023-03-26 09:31:08,609 p=50552 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 09:31:08,619 p=50552 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 09:31:09,998 p=50552 u=craig n=ansible | ok: [caddy]
2023-03-26 09:31:10,005 p=50552 u=craig n=ansible | META: ran handlers
2023-03-26 09:31:10,011 p=50552 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 09:31:11,591 p=50552 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 09:31:11,599 p=50552 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 09:31:12,337 p=50552 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 09:31:13,118 p=50552 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 09:31:13,851 p=50552 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 09:31:14,581 p=50552 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 09:31:15,304 p=50552 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 09:31:16,019 p=50552 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 09:31:16,031 p=50552 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 09:31:16,699 p=50552 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 09:31:16,706 p=50552 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 09:31:17,215 p=50552 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 09:31:17,223 p=50552 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 09:31:18,042 p=50552 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 09:31:18,051 p=50552 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 09:31:18,646 p=50552 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "47027164000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "72863744", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 09:31:18,654 p=50552 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 09:31:19,101 p=50552 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 09:31:19,106 p=50552 u=craig n=ansible | META: role_complete for caddy
2023-03-26 09:31:19,111 p=50552 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 09:31:19,504 p=50552 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 09:31:19,512 p=50552 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 09:31:20,126 p=50552 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 09:31:20,135 p=50552 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 09:31:20,662 p=50552 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 09:31:20,673 p=50552 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 09:31:20,753 p=50552 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 09:31:20,753 p=50552 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 09:31:20,754 p=50552 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 09:31:20,754 p=50552 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 09:44:30,314 p=51659 u=craig n=ansible | ERROR! input is already encrypted
2023-03-26 09:49:47,982 p=52049 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 09:50:01,990 p=52093 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 09:50:02,001 p=52093 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 09:50:03,369 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:03,382 p=52093 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 09:50:04,841 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:04,850 p=52093 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 09:50:05,550 p=52093 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-26 09:50:06,318 p=52093 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-26 09:50:06,997 p=52093 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-26 09:50:07,675 p=52093 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-26 09:50:08,469 p=52093 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-26 09:50:09,159 p=52093 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-26 09:50:09,171 p=52093 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 09:50:09,778 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:09,787 p=52093 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 09:50:10,278 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:10,287 p=52093 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 09:50:10,975 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:10,985 p=52093 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 09:50:11,569 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:11,577 p=52093 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 09:50:12,012 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:12,025 p=52093 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 09:50:12,385 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:12,393 p=52093 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 09:50:12,958 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:12,964 p=52093 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 09:50:13,454 p=52093 u=craig n=ansible | ok: [caddy]
2023-03-26 09:50:13,464 p=52093 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 09:50:13,537 p=52093 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 09:50:13,538 p=52093 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 09:50:13,538 p=52093 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 09:50:13,538 p=52093 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 09:54:53,653 p=52537 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 09:55:00,257 p=52684 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 09:55:00,268 p=52684 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 09:55:01,657 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:01,668 p=52684 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 09:55:03,087 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:03,095 p=52684 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 09:55:03,899 p=52684 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-26 09:55:04,706 p=52684 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-26 09:55:05,420 p=52684 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-26 09:55:06,253 p=52684 u=craig n=ansible | ok: [caddy] => (item=gnupg)
2023-03-26 09:55:07,078 p=52684 u=craig n=ansible | ok: [caddy] => (item=lsb-release)
2023-03-26 09:55:07,910 p=52684 u=craig n=ansible | ok: [caddy] => (item=software-properties-common)
2023-03-26 09:55:07,922 p=52684 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 09:55:08,608 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:08,616 p=52684 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 09:55:09,112 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:09,121 p=52684 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 09:55:09,850 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:09,858 p=52684 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 09:55:10,486 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:10,494 p=52684 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 09:55:10,915 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:10,927 p=52684 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 09:55:11,302 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:11,310 p=52684 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 09:55:11,932 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:11,940 p=52684 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 09:55:12,481 p=52684 u=craig n=ansible | ok: [caddy]
2023-03-26 09:55:12,490 p=52684 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 09:55:12,565 p=52684 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 09:55:12,565 p=52684 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 09:55:12,566 p=52684 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 09:55:12,566 p=52684 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 10:00:03,184 p=53313 u=craig n=ansible | ERROR! Unable to read source file (vault.yaml): [Errno 2] No such file or directory: 'vault.yaml'
2023-03-26 11:00:55,889 p=54652 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:00:55,900 p=54652 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:00:58,321 p=54652 u=craig n=ansible | ok: [caddy]
2023-03-26 11:00:58,335 p=54652 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:01:00,886 p=54652 u=craig n=ansible | ok: [caddy]
2023-03-26 11:01:00,896 p=54652 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:01:02,148 p=54652 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-26 11:01:03,431 p=54652 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-26 11:01:04,729 p=54652 u=craig n=ansible | ok: [caddy] => (item=curl)
2023-03-26 11:01:05,246 p=54652 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 11:01:52,846 p=54799 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:01:52,856 p=54799 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:01:54,722 p=54799 u=craig n=ansible | ok: [caddy]
2023-03-26 11:01:54,735 p=54799 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:01:57,185 p=54799 u=craig n=ansible | ok: [caddy]
2023-03-26 11:01:57,196 p=54799 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:01:58,716 p=54799 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https)
2023-03-26 11:02:00,058 p=54799 u=craig n=ansible | ok: [caddy] => (item=ca-certificates)
2023-03-26 11:02:00,848 p=54799 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 11:02:04,337 p=54862 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:02:04,493 p=54862 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:02:04,503 p=54862 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:02:06,422 p=54862 u=craig n=ansible | ok: [caddy]
2023-03-26 11:02:06,436 p=54862 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:02:08,544 p=54862 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:02:08,554 p=54862 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:02:09,890 p=54862 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:02:11,295 p=54862 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:02:12,636 p=54862 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:02:13,983 p=54862 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:02:15,432 p=54862 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:02:15,690 p=54862 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 11:03:20,362 p=55047 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:03:20,537 p=55047 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:03:20,547 p=55047 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:03:22,950 p=55047 u=craig n=ansible | ok: [caddy]
2023-03-26 11:03:22,964 p=55047 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:03:25,014 p=55047 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:03:25,026 p=55047 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:03:26,336 p=55047 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:03:27,714 p=55047 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:03:29,046 p=55047 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:03:30,441 p=55047 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:03:31,702 p=55047 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:03:32,953 p=55047 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:03:32,967 p=55047 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:03:34,114 p=55047 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:03:34,121 p=55047 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:03:35,275 p=55047 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:03:35,281 p=55047 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:03:36,516 p=55047 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:03:36,526 p=55047 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:03:37,738 p=55047 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "53386371000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "75042816", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:03:37,748 p=55047 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:03:38,714 p=55047 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:03:38,731 p=55047 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:03:39,659 p=55047 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:03:39,671 p=55047 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:03:41,245 p=55047 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:03:41,253 p=55047 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:03:42,791 p=55047 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 11:03:42,808 p=55047 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:03:43,078 p=55047 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-26 11:03:43,079 p=55047 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-26 11:03:43,081 p=55047 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:03:43,081 p=55047 u=craig n=ansible | caddy                      : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:04:05,799 p=55307 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:04:05,964 p=55307 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:04:05,972 p=55307 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:04:07,844 p=55307 u=craig n=ansible | ok: [caddy]
2023-03-26 11:04:07,856 p=55307 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:04:07,870 p=55307 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:04:07,877 p=55307 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-26 11:04:07,891 p=55307 u=craig n=ansible | fatal: [caddy]: FAILED! => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 11:04:07,892 p=55307 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:04:07,892 p=55307 u=craig n=ansible | caddy                      : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:04:28,244 p=55361 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:04:28,423 p=55361 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:04:28,431 p=55361 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:04:30,321 p=55361 u=craig n=ansible | ok: [caddy]
2023-03-26 11:04:30,334 p=55361 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:04:30,347 p=55361 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:04:30,354 p=55361 u=craig n=ansible | TASK [Include secrets file=secrets.yaml, name=vault_secrets] ***********************************************************************************************************************************************
2023-03-26 11:04:30,367 p=55361 u=craig n=ansible | fatal: [caddy]: FAILED! => {"ansible_facts": {"vault_secrets": {}}, "ansible_included_var_files": [], "changed": false, "message": "Could not find or access 'secrets.yaml'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy/vars/secrets.yaml\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy/secrets.yaml\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy/vars/secrets.yaml\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy/secrets.yaml on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-26 11:04:30,368 p=55361 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:04:30,368 p=55361 u=craig n=ansible | caddy                      : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:06:37,466 p=55542 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:06:37,634 p=55542 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:06:37,642 p=55542 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:06:40,108 p=55542 u=craig n=ansible | ok: [caddy]
2023-03-26 11:06:40,123 p=55542 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:06:40,137 p=55542 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:06:40,158 p=55542 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml, name=vault_secrets] **************************************************************************************************************************************
2023-03-26 11:06:40,183 p=55542 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"vault_secrets": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:06:40,190 p=55542 u=craig n=ansible | TASK [Set Google Domains API key from vault secrets google_domains_api_key={{ vault_secrets.google_domains_api_key }}] *************************************************************************************
2023-03-26 11:06:40,204 p=55542 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="}, "changed": false}
2023-03-26 11:06:40,210 p=55542 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:06:40,223 p=55542 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:06:40,235 p=55542 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:06:40,235 p=55542 u=craig n=ansible | caddy                      : ok=5    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 11:07:03,305 p=55624 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:07:03,471 p=55624 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:07:03,479 p=55624 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:07:05,317 p=55624 u=craig n=ansible | ok: [caddy]
2023-03-26 11:07:05,348 p=55624 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:07:05,360 p=55624 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:07:05,367 p=55624 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml, name=vault_secrets] **************************************************************************************************************************************
2023-03-26 11:07:05,390 p=55624 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"vault_secrets": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:07:05,395 p=55624 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:07:05,408 p=55624 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "VARIABLE IS NOT DEFINED!: 'google_domains_api_key' is undefined"
}
2023-03-26 11:07:05,420 p=55624 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:07:05,420 p=55624 u=craig n=ansible | caddy                      : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 11:07:19,733 p=55669 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:07:19,899 p=55669 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:07:19,907 p=55669 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:07:21,786 p=55669 u=craig n=ansible | ok: [caddy]
2023-03-26 11:07:21,799 p=55669 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:07:21,810 p=55669 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:07:21,817 p=55669 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml] **********************************************************************************************************************************************************
2023-03-26 11:07:21,840 p=55669 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:07:21,846 p=55669 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:07:21,859 p=55669 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:07:21,870 p=55669 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:07:21,870 p=55669 u=craig n=ansible | caddy                      : ok=4    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 11:07:40,048 p=55721 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:07:40,225 p=55721 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:07:40,235 p=55721 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:07:42,326 p=55721 u=craig n=ansible | ok: [caddy]
2023-03-26 11:07:42,354 p=55721 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:07:44,331 p=55721 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:07:44,337 p=55721 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:07:45,638 p=55721 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:07:46,942 p=55721 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:07:47,211 p=55721 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-26 11:09:28,119 p=55924 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:09:28,294 p=55924 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:09:28,304 p=55924 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:09:30,741 p=55924 u=craig n=ansible | ok: [caddy]
2023-03-26 11:09:30,750 p=55924 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:09:30,762 p=55924 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:09:30,768 p=55924 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml] **********************************************************************************************************************************************************
2023-03-26 11:09:30,790 p=55924 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:09:30,796 p=55924 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:09:30,809 p=55924 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:09:30,820 p=55924 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:09:32,970 p=55924 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:09:32,980 p=55924 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:09:34,459 p=55924 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:09:36,056 p=55924 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:09:37,585 p=55924 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:09:38,922 p=55924 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:09:40,206 p=55924 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:09:41,547 p=55924 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:09:41,560 p=55924 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:09:42,809 p=55924 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:09:42,819 p=55924 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:09:44,103 p=55924 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:09:44,114 p=55924 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:09:45,497 p=55924 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:09:45,507 p=55924 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:09:46,741 p=55924 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "53801272000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "75046912", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:09:46,751 p=55924 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:09:47,706 p=55924 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:09:47,724 p=55924 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:09:48,777 p=55924 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:09:48,789 p=55924 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:09:50,513 p=55924 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:09:50,523 p=55924 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:09:51,974 p=55924 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 11:09:51,985 p=55924 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:09:53,891 p=55924 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "c43724b971717b15ffebd8d050204a7db84c3473", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "md5sum": "b24bfe99016027b6f037dfdb11f86590", "mode": "0644", "owner": "root", "size": 300, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679843392.076098-56123-84196841431076/source", "state": "file", "uid": 0}
2023-03-26 11:09:53,902 p=55924 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:09:54,916 p=55924 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'requests'
2023-03-26 11:09:54,917 p=55924 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Failed to import the required Python library (Docker SDK for Python: docker above 5.0.0 (Python >= 3.6) or docker before 5.0.0 (Python 2.7) or docker-py (Python 2.6)) on caddy's Python /usr/bin/python3. Please read the module documentation and install it in the appropriate location. If the required library is installed, but Ansible is using the wrong Python interpreter, please consult the documentation on ansible_python_interpreter, for example via `pip install docker` (Python >= 3.6) or `pip install docker==4.4.4` (Python 2.7) or `pip install docker-py` (Python 2.6). The error was: No module named 'requests'"}
2023-03-26 11:09:54,919 p=55924 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:09:54,919 p=55924 u=craig n=ansible | caddy                      : ok=15   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:11:31,660 p=56323 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:11:31,835 p=56323 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:11:31,845 p=56323 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:11:34,204 p=56323 u=craig n=ansible | ok: [caddy]
2023-03-26 11:11:34,213 p=56323 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:11:34,224 p=56323 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:11:34,230 p=56323 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml] **********************************************************************************************************************************************************
2023-03-26 11:11:34,255 p=56323 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:11:34,260 p=56323 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:11:34,273 p=56323 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:11:34,283 p=56323 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:11:36,778 p=56323 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:11:36,789 p=56323 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:11:38,112 p=56323 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:11:39,435 p=56323 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:11:40,768 p=56323 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:11:42,058 p=56323 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:11:43,535 p=56323 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:11:45,023 p=56323 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:11:45,034 p=56323 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:11:46,227 p=56323 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:11:46,238 p=56323 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:11:47,297 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:11:47,308 p=56323 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:11:48,644 p=56323 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:11:48,655 p=56323 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:11:49,927 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "53948122000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "75046912", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:11:49,935 p=56323 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:11:50,893 p=56323 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:11:50,904 p=56323 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:11:51,819 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:11:51,831 p=56323 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:11:53,376 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:11:53,386 p=56323 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:11:54,863 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 11:11:54,871 p=56323 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:11:56,314 p=56323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "c43724b971717b15ffebd8d050204a7db84c3473", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 300, "state": "file", "uid": 0}
2023-03-26 11:11:56,324 p=56323 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:11:57,295 p=56323 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ModuleNotFoundError: No module named 'requests'
2023-03-26 11:11:57,296 p=56323 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Failed to import the required Python library (Docker SDK for Python: docker above 5.0.0 (Python >= 3.6) or docker before 5.0.0 (Python 2.7) or docker-py (Python 2.6)) on caddy's Python /usr/bin/python3. Please read the module documentation and install it in the appropriate location. If the required library is installed, but Ansible is using the wrong Python interpreter, please consult the documentation on ansible_python_interpreter, for example via `pip install docker` (Python >= 3.6) or `pip install docker==4.4.4` (Python 2.7) or `pip install docker-py` (Python 2.6). The error was: No module named 'requests'"}
2023-03-26 11:11:57,298 p=56323 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:11:57,298 p=56323 u=craig n=ansible | caddy                      : ok=15   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:17:34,386 p=57018 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:17:34,581 p=57018 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:17:34,592 p=57018 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:17:37,256 p=57018 u=craig n=ansible | ok: [caddy]
2023-03-26 11:17:37,265 p=57018 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:17:37,277 p=57018 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:17:37,284 p=57018 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml] **********************************************************************************************************************************************************
2023-03-26 11:17:37,307 p=57018 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:17:37,313 p=57018 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:17:37,326 p=57018 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:17:37,339 p=57018 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:17:39,336 p=57018 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:17:39,346 p=57018 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:17:40,718 p=57018 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:17:41,936 p=57018 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:17:43,261 p=57018 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:17:44,470 p=57018 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:17:45,731 p=57018 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:17:46,926 p=57018 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:17:46,935 p=57018 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:17:48,049 p=57018 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:17:48,055 p=57018 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:17:49,072 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:17:49,079 p=57018 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:17:50,249 p=57018 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:17:50,256 p=57018 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:17:51,443 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "54367056000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "75051008", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:17:51,451 p=57018 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:17:52,405 p=57018 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:17:52,416 p=57018 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-26 11:18:19,861 p=57018 u=craig n=ansible | changed: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": true, "stderr": "", "stderr_lines": [], "stdout": "Reading package lists...\nBuilding dependency tree...\nReading state information...\nThe following additional packages will be installed:\n  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp\n  cpp-11 dpkg-dev fakeroot fontconfig-config fonts-dejavu-core g++ g++-11 gcc\n  gcc-11 gcc-11-base javascript-common libalgorithm-diff-perl\n  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan6 libatomic1\n  libbinutils libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev\n  libctf-nobfd0 libctf0 libdeflate0 libdpkg-perl libexpat1-dev libfakeroot\n  libfile-fcntllock-perl libfontconfig1 libfreetype6 libgcc-11-dev libgd3\n  libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libjs-jquery\n  libjs-sphinxdoc libjs-underscore liblsan0 libmpc3 libmpfr6 libnsl-dev\n  libpython3-dev libpython3.10 libpython3.10-dev libquadmath0 libstdc++-11-dev\n  libtiff5 libtirpc-dev libtsan0 libubsan1 libwebp7 libxpm4 linux-libc-dev\n  lto-disabled-list make manpages-dev python3-dev python3-distutils\n  python3-lib2to3 python3-setuptools python3-wheel python3.10-dev rpcsvc-proto\n  zlib1g-dev\nSuggested packages:\n  binutils-doc bzip2-doc cpp-doc gcc-11-locales debian-keyring g++-multilib\n  g++-11-multilib gcc-11-doc gcc-multilib autoconf automake libtool flex bison\n  gdb gcc-doc gcc-11-multilib apache2 | lighttpd | httpd glibc-doc bzr\n  libgd-tools libstdc++-11-doc make-doc python-setuptools-doc\nThe following NEW packages will be installed:\n  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp\n  cpp-11 dpkg-dev fakeroot fontconfig-config fonts-dejavu-core g++ g++-11 gcc\n  gcc-11 gcc-11-base javascript-common libalgorithm-diff-perl\n  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan6 libatomic1\n  libbinutils libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev\n  libctf-nobfd0 libctf0 libdeflate0 libdpkg-perl libexpat1-dev libfakeroot\n  libfile-fcntllock-perl libfontconfig1 libfreetype6 libgcc-11-dev libgd3\n  libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libjs-jquery\n  libjs-sphinxdoc libjs-underscore liblsan0 libmpc3 libmpfr6 libnsl-dev\n  libpython3-dev libpython3.10 libpython3.10-dev libquadmath0 libstdc++-11-dev\n  libtiff5 libtirpc-dev libtsan0 libubsan1 libwebp7 libxpm4 linux-libc-dev\n  lto-disabled-list make manpages-dev python3-dev python3-distutils\n  python3-lib2to3 python3-pip python3-setuptools python3-wheel python3.10-dev\n  rpcsvc-proto zlib1g-dev\n0 upgraded, 76 newly installed, 0 to remove and 0 not upgraded.\nNeed to get 78.9 MB of archives.\nAfter this operation, 267 MB of additional disk space will be used.\nGet:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils-common amd64 2.38-4ubuntu2.1 [221 kB]\nGet:2 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libbinutils amd64 2.38-4ubuntu2.1 [661 kB]\nGet:3 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libctf-nobfd0 amd64 2.38-4ubuntu2.1 [107 kB]\nGet:4 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libctf0 amd64 2.38-4ubuntu2.1 [103 kB]\nGet:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils-x86-64-linux-gnu amd64 2.38-4ubuntu2.1 [2328 kB]\nGet:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils amd64 2.38-4ubuntu2.1 [3198 B]\nGet:7 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-dev-bin amd64 2.35-0ubuntu3.1 [20.4 kB]\nGet:8 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 linux-libc-dev amd64 5.15.0-67.74 [1329 kB]\nGet:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libcrypt-dev amd64 1:4.4.27-1 [112 kB]\nGet:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 rpcsvc-proto amd64 1.4.2-0ubuntu6 [68.5 kB]\nGet:11 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtirpc-dev amd64 1.3.2-2ubuntu0.1 [192 kB]\nGet:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnsl-dev amd64 1.3.0-2build2 [71.3 kB]\nGet:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc6-dev amd64 2.35-0ubuntu3.1 [2099 kB]\nGet:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11-base amd64 11.3.0-1ubuntu1~22.04 [20.8 kB]\nGet:15 http://archive.ubuntu.com/ubuntu jammy/main amd64 libisl23 amd64 0.24-2build1 [727 kB]\nGet:16 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmpfr6 amd64 4.1.0-3build3 [1425 kB]\nGet:17 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmpc3 amd64 1.2.1-2build1 [46.9 kB]\nGet:18 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 cpp-11 amd64 11.3.0-1ubuntu1~22.04 [9967 kB]\nGet:19 http://archive.ubuntu.com/ubuntu jammy/main amd64 cpp amd64 4:11.2.0-1ubuntu1 [27.7 kB]\nGet:20 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcc1-0 amd64 12.1.0-2ubuntu1~22.04 [47.4 kB]\nGet:21 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgomp1 amd64 12.1.0-2ubuntu1~22.04 [126 kB]\nGet:22 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libitm1 amd64 12.1.0-2ubuntu1~22.04 [30.2 kB]\nGet:23 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libatomic1 amd64 12.1.0-2ubuntu1~22.04 [10.4 kB]\nGet:24 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libasan6 amd64 11.3.0-1ubuntu1~22.04 [2284 kB]\nGet:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 liblsan0 amd64 12.1.0-2ubuntu1~22.04 [1069 kB]\nGet:26 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtsan0 amd64 11.3.0-1ubuntu1~22.04 [2262 kB]\nGet:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libubsan1 amd64 12.1.0-2ubuntu1~22.04 [976 kB]\nGet:28 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libquadmath0 amd64 12.1.0-2ubuntu1~22.04 [154 kB]\nGet:29 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgcc-11-dev amd64 11.3.0-1ubuntu1~22.04 [2517 kB]\nGet:30 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11 amd64 11.3.0-1ubuntu1~22.04 [20.1 MB]\nGet:31 http://archive.ubuntu.com/ubuntu jammy/main amd64 gcc amd64 4:11.2.0-1ubuntu1 [5112 B]\nGet:32 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libstdc++-11-dev amd64 11.3.0-1ubuntu1~22.04 [2087 kB]\nGet:33 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 g++-11 amd64 11.3.0-1ubuntu1~22.04 [11.4 MB]\nGet:34 http://archive.ubuntu.com/ubuntu jammy/main amd64 g++ amd64 4:11.2.0-1ubuntu1 [1412 B]\nGet:35 http://archive.ubuntu.com/ubuntu jammy/main amd64 make amd64 4.3-4.1build1 [180 kB]\nGet:36 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libdpkg-perl all 1.21.1ubuntu2.1 [237 kB]\nGet:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]\nGet:38 http://archive.ubuntu.com/ubuntu jammy/main amd64 lto-disabled-list all 24 [12.5 kB]\nGet:39 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 dpkg-dev all 1.21.1ubuntu2.1 [922 kB]\nGet:40 http://archive.ubuntu.com/ubuntu jammy/main amd64 build-essential amd64 12.9ubuntu3 [4744 B]\nGet:41 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfakeroot amd64 1.28-1ubuntu1 [31.5 kB]\nGet:42 http://archive.ubuntu.com/ubuntu jammy/main amd64 fakeroot amd64 1.28-1ubuntu1 [60.4 kB]\nGet:43 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-dejavu-core all 2.37-2build1 [1041 kB]\nGet:44 http://archive.ubuntu.com/ubuntu jammy/main amd64 fontconfig-config all 2.13.1-4.2ubuntu5 [29.1 kB]\nGet:45 http://archive.ubuntu.com/ubuntu jammy/main amd64 javascript-common all 11+nmu1 [5936 B]\nGet:46 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-perl all 1.201-1 [41.8 kB]\nGet:47 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-xs-perl amd64 0.04-6build3 [11.9 kB]\nGet:48 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-merge-perl all 0.08-3 [12.0 kB]\nGet:49 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libfreetype6 amd64 2.11.1+dfsg-1ubuntu0.1 [389 kB]\nGet:50 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfontconfig1 amd64 2.13.1-4.2ubuntu5 [131 kB]\nGet:51 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg-turbo8 amd64 2.1.2-0ubuntu1 [134 kB]\nGet:52 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg8 amd64 8c-2ubuntu10 [2264 B]\nGet:53 http://archive.ubuntu.com/ubuntu jammy/main amd64 libdeflate0 amd64 1.10-2 [70.9 kB]\nGet:54 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libjbig0 amd64 2.1-3.1ubuntu0.22.04.1 [29.2 kB]\nGet:55 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebp7 amd64 1.2.2-2 [206 kB]\nGet:56 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtiff5 amd64 4.3.0-6ubuntu0.4 [183 kB]\nGet:57 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libxpm4 amd64 1:3.5.12-1ubuntu0.22.04.1 [36.4 kB]\nGet:58 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgd3 amd64 2.3.0-2ubuntu2 [129 kB]\nGet:59 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-devtools amd64 2.35-0ubuntu3.1 [28.9 kB]\nGet:60 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libexpat1-dev amd64 2.4.7-1ubuntu0.2 [147 kB]\nGet:61 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfile-fcntllock-perl amd64 0.22-3build7 [33.9 kB]\nGet:62 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-jquery all 3.6.0+dfsg+~3.5.13-1 [321 kB]\nGet:63 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-underscore all 1.13.2~dfsg-2 [118 kB]\nGet:64 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-sphinxdoc all 4.3.2-1 [139 kB]\nGet:65 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3.10 amd64 3.10.6-1~22.04.2ubuntu1 [1958 kB]\nGet:66 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 zlib1g-dev amd64 1:1.2.11.dfsg-2ubuntu9.2 [164 kB]\nGet:67 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3.10-dev amd64 3.10.6-1~22.04.2ubuntu1 [4755 kB]\nGet:68 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3-dev amd64 3.10.6-1~22.04 [7166 B]\nGet:69 http://archive.ubuntu.com/ubuntu jammy/main amd64 manpages-dev all 5.10-1ubuntu1 [2309 kB]\nGet:70 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3.10-dev amd64 3.10.6-1~22.04.2ubuntu1 [507 kB]\nGet:71 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-lib2to3 all 3.10.6-1~22.04 [77.6 kB]\nGet:72 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-distutils all 3.10.6-1~22.04 [139 kB]\nGet:73 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-dev amd64 3.10.6-1~22.04 [26.0 kB]\nGet:74 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-setuptools all 59.6.0-1.2ubuntu0.22.04.1 [339 kB]\nGet:75 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python3-wheel all 0.37.1-2ubuntu0.22.04.1 [32.0 kB]\nGet:76 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python3-pip all 22.0.2+dfsg-1ubuntu0.2 [1305 kB]\nFetched 78.9 MB in 3s (22.9 MB/s)\nSelecting previously unselected package binutils-common:amd64.\r\n(Reading database ... \r(Reading database ... 5%\r(Reading database ... 10%\r(Reading database ... 15%\r(Reading database ... 20%\r(Reading database ... 25%\r(Reading database ... 30%\r(Reading database ... 35%\r(Reading database ... 40%\r(Reading database ... 45%\r(Reading database ... 50%\r(Reading database ... 55%\r(Reading database ... 60%\r(Reading database ... 65%\r(Reading database ... 70%\r(Reading database ... 75%\r(Reading database ... 80%\r(Reading database ... 85%\r(Reading database ... 90%\r(Reading database ... 95%\r(Reading database ... 100%\r(Reading database ... 21463 files and directories currently installed.)\r\nPreparing to unpack .../00-binutils-common_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking binutils-common:amd64 (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package libbinutils:amd64.\r\nPreparing to unpack .../01-libbinutils_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking libbinutils:amd64 (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package libctf-nobfd0:amd64.\r\nPreparing to unpack .../02-libctf-nobfd0_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking libctf-nobfd0:amd64 (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package libctf0:amd64.\r\nPreparing to unpack .../03-libctf0_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking libctf0:amd64 (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package binutils-x86-64-linux-gnu.\r\nPreparing to unpack .../04-binutils-x86-64-linux-gnu_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking binutils-x86-64-linux-gnu (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package binutils.\r\nPreparing to unpack .../05-binutils_2.38-4ubuntu2.1_amd64.deb ...\r\nUnpacking binutils (2.38-4ubuntu2.1) ...\r\nSelecting previously unselected package libc-dev-bin.\r\nPreparing to unpack .../06-libc-dev-bin_2.35-0ubuntu3.1_amd64.deb ...\r\nUnpacking libc-dev-bin (2.35-0ubuntu3.1) ...\r\nSelecting previously unselected package linux-libc-dev:amd64.\r\nPreparing to unpack .../07-linux-libc-dev_5.15.0-67.74_amd64.deb ...\r\nUnpacking linux-libc-dev:amd64 (5.15.0-67.74) ...\r\nSelecting previously unselected package libcrypt-dev:amd64.\r\nPreparing to unpack .../08-libcrypt-dev_1%3a4.4.27-1_amd64.deb ...\r\nUnpacking libcrypt-dev:amd64 (1:4.4.27-1) ...\r\nSelecting previously unselected package rpcsvc-proto.\r\nPreparing to unpack .../09-rpcsvc-proto_1.4.2-0ubuntu6_amd64.deb ...\r\nUnpacking rpcsvc-proto (1.4.2-0ubuntu6) ...\r\nSelecting previously unselected package libtirpc-dev:amd64.\r\nPreparing to unpack .../10-libtirpc-dev_1.3.2-2ubuntu0.1_amd64.deb ...\r\nUnpacking libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...\r\nSelecting previously unselected package libnsl-dev:amd64.\r\nPreparing to unpack .../11-libnsl-dev_1.3.0-2build2_amd64.deb ...\r\nUnpacking libnsl-dev:amd64 (1.3.0-2build2) ...\r\nSelecting previously unselected package libc6-dev:amd64.\r\nPreparing to unpack .../12-libc6-dev_2.35-0ubuntu3.1_amd64.deb ...\r\nUnpacking libc6-dev:amd64 (2.35-0ubuntu3.1) ...\r\nSelecting previously unselected package gcc-11-base:amd64.\r\nPreparing to unpack .../13-gcc-11-base_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package libisl23:amd64.\r\nPreparing to unpack .../14-libisl23_0.24-2build1_amd64.deb ...\r\nUnpacking libisl23:amd64 (0.24-2build1) ...\r\nSelecting previously unselected package libmpfr6:amd64.\r\nPreparing to unpack .../15-libmpfr6_4.1.0-3build3_amd64.deb ...\r\nUnpacking libmpfr6:amd64 (4.1.0-3build3) ...\r\nSelecting previously unselected package libmpc3:amd64.\r\nPreparing to unpack .../16-libmpc3_1.2.1-2build1_amd64.deb ...\r\nUnpacking libmpc3:amd64 (1.2.1-2build1) ...\r\nSelecting previously unselected package cpp-11.\r\nPreparing to unpack .../17-cpp-11_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking cpp-11 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package cpp.\r\nPreparing to unpack .../18-cpp_4%3a11.2.0-1ubuntu1_amd64.deb ...\r\nUnpacking cpp (4:11.2.0-1ubuntu1) ...\r\nSelecting previously unselected package libcc1-0:amd64.\r\nPreparing to unpack .../19-libcc1-0_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libgomp1:amd64.\r\nPreparing to unpack .../20-libgomp1_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libitm1:amd64.\r\nPreparing to unpack .../21-libitm1_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libatomic1:amd64.\r\nPreparing to unpack .../22-libatomic1_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libasan6:amd64.\r\nPreparing to unpack .../23-libasan6_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package liblsan0:amd64.\r\nPreparing to unpack .../24-liblsan0_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libtsan0:amd64.\r\nPreparing to unpack .../25-libtsan0_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package libubsan1:amd64.\r\nPreparing to unpack .../26-libubsan1_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libquadmath0:amd64.\r\nPreparing to unpack .../27-libquadmath0_12.1.0-2ubuntu1~22.04_amd64.deb ...\r\nUnpacking libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSelecting previously unselected package libgcc-11-dev:amd64.\r\nPreparing to unpack .../28-libgcc-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package gcc-11.\r\nPreparing to unpack .../29-gcc-11_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking gcc-11 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package gcc.\r\nPreparing to unpack .../30-gcc_4%3a11.2.0-1ubuntu1_amd64.deb ...\r\nUnpacking gcc (4:11.2.0-1ubuntu1) ...\r\nSelecting previously unselected package libstdc++-11-dev:amd64.\r\nPreparing to unpack .../31-libstdc++-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package g++-11.\r\nPreparing to unpack .../32-g++-11_11.3.0-1ubuntu1~22.04_amd64.deb ...\r\nUnpacking g++-11 (11.3.0-1ubuntu1~22.04) ...\r\nSelecting previously unselected package g++.\r\nPreparing to unpack .../33-g++_4%3a11.2.0-1ubuntu1_amd64.deb ...\r\nUnpacking g++ (4:11.2.0-1ubuntu1) ...\r\nSelecting previously unselected package make.\r\nPreparing to unpack .../34-make_4.3-4.1build1_amd64.deb ...\r\nUnpacking make (4.3-4.1build1) ...\r\nSelecting previously unselected package libdpkg-perl.\r\nPreparing to unpack .../35-libdpkg-perl_1.21.1ubuntu2.1_all.deb ...\r\nUnpacking libdpkg-perl (1.21.1ubuntu2.1) ...\r\nSelecting previously unselected package bzip2.\r\nPreparing to unpack .../36-bzip2_1.0.8-5build1_amd64.deb ...\r\nUnpacking bzip2 (1.0.8-5build1) ...\r\nSelecting previously unselected package lto-disabled-list.\r\nPreparing to unpack .../37-lto-disabled-list_24_all.deb ...\r\nUnpacking lto-disabled-list (24) ...\r\nSelecting previously unselected package dpkg-dev.\r\nPreparing to unpack .../38-dpkg-dev_1.21.1ubuntu2.1_all.deb ...\r\nUnpacking dpkg-dev (1.21.1ubuntu2.1) ...\r\nSelecting previously unselected package build-essential.\r\nPreparing to unpack .../39-build-essential_12.9ubuntu3_amd64.deb ...\r\nUnpacking build-essential (12.9ubuntu3) ...\r\nSelecting previously unselected package libfakeroot:amd64.\r\nPreparing to unpack .../40-libfakeroot_1.28-1ubuntu1_amd64.deb ...\r\nUnpacking libfakeroot:amd64 (1.28-1ubuntu1) ...\r\nSelecting previously unselected package fakeroot.\r\nPreparing to unpack .../41-fakeroot_1.28-1ubuntu1_amd64.deb ...\r\nUnpacking fakeroot (1.28-1ubuntu1) ...\r\nSelecting previously unselected package fonts-dejavu-core.\r\nPreparing to unpack .../42-fonts-dejavu-core_2.37-2build1_all.deb ...\r\nUnpacking fonts-dejavu-core (2.37-2build1) ...\r\nSelecting previously unselected package fontconfig-config.\r\nPreparing to unpack .../43-fontconfig-config_2.13.1-4.2ubuntu5_all.deb ...\r\nUnpacking fontconfig-config (2.13.1-4.2ubuntu5) ...\r\nSelecting previously unselected package javascript-common.\r\nPreparing to unpack .../44-javascript-common_11+nmu1_all.deb ...\r\nUnpacking javascript-common (11+nmu1) ...\r\nSelecting previously unselected package libalgorithm-diff-perl.\r\nPreparing to unpack .../45-libalgorithm-diff-perl_1.201-1_all.deb ...\r\nUnpacking libalgorithm-diff-perl (1.201-1) ...\r\nSelecting previously unselected package libalgorithm-diff-xs-perl.\r\nPreparing to unpack .../46-libalgorithm-diff-xs-perl_0.04-6build3_amd64.deb ...\r\nUnpacking libalgorithm-diff-xs-perl (0.04-6build3) ...\r\nSelecting previously unselected package libalgorithm-merge-perl.\r\nPreparing to unpack .../47-libalgorithm-merge-perl_0.08-3_all.deb ...\r\nUnpacking libalgorithm-merge-perl (0.08-3) ...\r\nSelecting previously unselected package libfreetype6:amd64.\r\nPreparing to unpack .../48-libfreetype6_2.11.1+dfsg-1ubuntu0.1_amd64.deb ...\r\nUnpacking libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...\r\nSelecting previously unselected package libfontconfig1:amd64.\r\nPreparing to unpack .../49-libfontconfig1_2.13.1-4.2ubuntu5_amd64.deb ...\r\nUnpacking libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...\r\nSelecting previously unselected package libjpeg-turbo8:amd64.\r\nPreparing to unpack .../50-libjpeg-turbo8_2.1.2-0ubuntu1_amd64.deb ...\r\nUnpacking libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...\r\nSelecting previously unselected package libjpeg8:amd64.\r\nPreparing to unpack .../51-libjpeg8_8c-2ubuntu10_amd64.deb ...\r\nUnpacking libjpeg8:amd64 (8c-2ubuntu10) ...\r\nSelecting previously unselected package libdeflate0:amd64.\r\nPreparing to unpack .../52-libdeflate0_1.10-2_amd64.deb ...\r\nUnpacking libdeflate0:amd64 (1.10-2) ...\r\nSelecting previously unselected package libjbig0:amd64.\r\nPreparing to unpack .../53-libjbig0_2.1-3.1ubuntu0.22.04.1_amd64.deb ...\r\nUnpacking libjbig0:amd64 (2.1-3.1ubuntu0.22.04.1) ...\r\nSelecting previously unselected package libwebp7:amd64.\r\nPreparing to unpack .../54-libwebp7_1.2.2-2_amd64.deb ...\r\nUnpacking libwebp7:amd64 (1.2.2-2) ...\r\nSelecting previously unselected package libtiff5:amd64.\r\nPreparing to unpack .../55-libtiff5_4.3.0-6ubuntu0.4_amd64.deb ...\r\nUnpacking libtiff5:amd64 (4.3.0-6ubuntu0.4) ...\r\nSelecting previously unselected package libxpm4:amd64.\r\nPreparing to unpack .../56-libxpm4_1%3a3.5.12-1ubuntu0.22.04.1_amd64.deb ...\r\nUnpacking libxpm4:amd64 (1:3.5.12-1ubuntu0.22.04.1) ...\r\nSelecting previously unselected package libgd3:amd64.\r\nPreparing to unpack .../57-libgd3_2.3.0-2ubuntu2_amd64.deb ...\r\nUnpacking libgd3:amd64 (2.3.0-2ubuntu2) ...\r\nSelecting previously unselected package libc-devtools.\r\nPreparing to unpack .../58-libc-devtools_2.35-0ubuntu3.1_amd64.deb ...\r\nUnpacking libc-devtools (2.35-0ubuntu3.1) ...\r\nSelecting previously unselected package libexpat1-dev:amd64.\r\nPreparing to unpack .../59-libexpat1-dev_2.4.7-1ubuntu0.2_amd64.deb ...\r\nUnpacking libexpat1-dev:amd64 (2.4.7-1ubuntu0.2) ...\r\nSelecting previously unselected package libfile-fcntllock-perl.\r\nPreparing to unpack .../60-libfile-fcntllock-perl_0.22-3build7_amd64.deb ...\r\nUnpacking libfile-fcntllock-perl (0.22-3build7) ...\r\nSelecting previously unselected package libjs-jquery.\r\nPreparing to unpack .../61-libjs-jquery_3.6.0+dfsg+~3.5.13-1_all.deb ...\r\nUnpacking libjs-jquery (3.6.0+dfsg+~3.5.13-1) ...\r\nSelecting previously unselected package libjs-underscore.\r\nPreparing to unpack .../62-libjs-underscore_1.13.2~dfsg-2_all.deb ...\r\nUnpacking libjs-underscore (1.13.2~dfsg-2) ...\r\nSelecting previously unselected package libjs-sphinxdoc.\r\nPreparing to unpack .../63-libjs-sphinxdoc_4.3.2-1_all.deb ...\r\nUnpacking libjs-sphinxdoc (4.3.2-1) ...\r\nSelecting previously unselected package libpython3.10:amd64.\r\nPreparing to unpack .../64-libpython3.10_3.10.6-1~22.04.2ubuntu1_amd64.deb ...\r\nUnpacking libpython3.10:amd64 (3.10.6-1~22.04.2ubuntu1) ...\r\nSelecting previously unselected package zlib1g-dev:amd64.\r\nPreparing to unpack .../65-zlib1g-dev_1%3a1.2.11.dfsg-2ubuntu9.2_amd64.deb ...\r\nUnpacking zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...\r\nSelecting previously unselected package libpython3.10-dev:amd64.\r\nPreparing to unpack .../66-libpython3.10-dev_3.10.6-1~22.04.2ubuntu1_amd64.deb ...\r\nUnpacking libpython3.10-dev:amd64 (3.10.6-1~22.04.2ubuntu1) ...\r\nSelecting previously unselected package libpython3-dev:amd64.\r\nPreparing to unpack .../67-libpython3-dev_3.10.6-1~22.04_amd64.deb ...\r\nUnpacking libpython3-dev:amd64 (3.10.6-1~22.04) ...\r\nSelecting previously unselected package manpages-dev.\r\nPreparing to unpack .../68-manpages-dev_5.10-1ubuntu1_all.deb ...\r\nUnpacking manpages-dev (5.10-1ubuntu1) ...\r\nSelecting previously unselected package python3.10-dev.\r\nPreparing to unpack .../69-python3.10-dev_3.10.6-1~22.04.2ubuntu1_amd64.deb ...\r\nUnpacking python3.10-dev (3.10.6-1~22.04.2ubuntu1) ...\r\nSelecting previously unselected package python3-lib2to3.\r\nPreparing to unpack .../70-python3-lib2to3_3.10.6-1~22.04_all.deb ...\r\nUnpacking python3-lib2to3 (3.10.6-1~22.04) ...\r\nSelecting previously unselected package python3-distutils.\r\nPreparing to unpack .../71-python3-distutils_3.10.6-1~22.04_all.deb ...\r\nUnpacking python3-distutils (3.10.6-1~22.04) ...\r\nSelecting previously unselected package python3-dev.\r\nPreparing to unpack .../72-python3-dev_3.10.6-1~22.04_amd64.deb ...\r\nUnpacking python3-dev (3.10.6-1~22.04) ...\r\nSelecting previously unselected package python3-setuptools.\r\nPreparing to unpack .../73-python3-setuptools_59.6.0-1.2ubuntu0.22.04.1_all.deb ...\r\nUnpacking python3-setuptools (59.6.0-1.2ubuntu0.22.04.1) ...\r\nSelecting previously unselected package python3-wheel.\r\nPreparing to unpack .../74-python3-wheel_0.37.1-2ubuntu0.22.04.1_all.deb ...\r\nUnpacking python3-wheel (0.37.1-2ubuntu0.22.04.1) ...\r\nSelecting previously unselected package python3-pip.\r\nPreparing to unpack .../75-python3-pip_22.0.2+dfsg-1ubuntu0.2_all.deb ...\r\nUnpacking python3-pip (22.0.2+dfsg-1ubuntu0.2) ...\r\nSetting up javascript-common (11+nmu1) ...\r\nSetting up gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up manpages-dev (5.10-1ubuntu1) ...\r\nSetting up libpython3.10:amd64 (3.10.6-1~22.04.2ubuntu1) ...\r\nSetting up lto-disabled-list (24) ...\r\nSetting up libxpm4:amd64 (1:3.5.12-1ubuntu0.22.04.1) ...\r\nSetting up libfile-fcntllock-perl (0.22-3build7) ...\r\nSetting up libalgorithm-diff-perl (1.201-1) ...\r\nSetting up binutils-common:amd64 (2.38-4ubuntu2.1) ...\r\nSetting up libdeflate0:amd64 (1.10-2) ...\r\nSetting up linux-libc-dev:amd64 (5.15.0-67.74) ...\r\nSetting up libctf-nobfd0:amd64 (2.38-4ubuntu2.1) ...\r\nSetting up libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up bzip2 (1.0.8-5build1) ...\r\nSetting up libjbig0:amd64 (2.1-3.1ubuntu0.22.04.1) ...\r\nSetting up libfakeroot:amd64 (1.28-1ubuntu1) ...\r\nSetting up libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up fakeroot (1.28-1ubuntu1) ...\r\nupdate-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode\r\nSetting up libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...\r\nSetting up rpcsvc-proto (1.4.2-0ubuntu6) ...\r\nSetting up libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...\r\nSetting up make (4.3-4.1build1) ...\r\nSetting up libmpfr6:amd64 (4.1.0-3build3) ...\r\nSetting up libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up libmpc3:amd64 (1.2.1-2build1) ...\r\nSetting up libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up fonts-dejavu-core (2.37-2build1) ...\r\nSetting up libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...\r\nSetting up libdpkg-perl (1.21.1ubuntu2.1) ...\r\nSetting up libwebp7:amd64 (1.2.2-2) ...\r\nSetting up libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up libnsl-dev:amd64 (1.3.0-2build2) ...\r\nSetting up libcrypt-dev:amd64 (1:4.4.27-1) ...\r\nSetting up libjs-jquery (3.6.0+dfsg+~3.5.13-1) ...\r\nSetting up libbinutils:amd64 (2.38-4ubuntu2.1) ...\r\nSetting up libisl23:amd64 (0.24-2build1) ...\r\nSetting up libc-dev-bin (2.35-0ubuntu3.1) ...\r\nSetting up python3-lib2to3 (3.10.6-1~22.04) ...\r\nSetting up libalgorithm-diff-xs-perl (0.04-6build3) ...\r\nSetting up libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...\r\nSetting up libjs-underscore (1.13.2~dfsg-2) ...\r\nSetting up libalgorithm-merge-perl (0.08-3) ...\r\nSetting up libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up libctf0:amd64 (2.38-4ubuntu2.1) ...\r\nSetting up libjpeg8:amd64 (8c-2ubuntu10) ...\r\nSetting up python3-distutils (3.10.6-1~22.04) ...\r\nSetting up cpp-11 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up python3-setuptools (59.6.0-1.2ubuntu0.22.04.1) ...\r\nSetting up fontconfig-config (2.13.1-4.2ubuntu5) ...\r\nSetting up python3-wheel (0.37.1-2ubuntu0.22.04.1) ...\r\nSetting up python3-pip (22.0.2+dfsg-1ubuntu0.2) ...\r\nSetting up libjs-sphinxdoc (4.3.2-1) ...\r\nSetting up libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up cpp (4:11.2.0-1ubuntu1) ...\r\nSetting up libc6-dev:amd64 (2.35-0ubuntu3.1) ...\r\nSetting up libtiff5:amd64 (4.3.0-6ubuntu0.4) ...\r\nSetting up libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...\r\nSetting up binutils-x86-64-linux-gnu (2.38-4ubuntu2.1) ...\r\nSetting up binutils (2.38-4ubuntu2.1) ...\r\nSetting up dpkg-dev (1.21.1ubuntu2.1) ...\r\nSetting up libexpat1-dev:amd64 (2.4.7-1ubuntu0.2) ...\r\nSetting up libgd3:amd64 (2.3.0-2ubuntu2) ...\r\nSetting up libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...\r\nSetting up gcc-11 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up libc-devtools (2.35-0ubuntu3.1) ...\r\nSetting up g++-11 (11.3.0-1ubuntu1~22.04) ...\r\nSetting up gcc (4:11.2.0-1ubuntu1) ...\r\nSetting up libpython3.10-dev:amd64 (3.10.6-1~22.04.2ubuntu1) ...\r\nSetting up python3.10-dev (3.10.6-1~22.04.2ubuntu1) ...\r\nSetting up g++ (4:11.2.0-1ubuntu1) ...\r\nupdate-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode\r\nSetting up build-essential (12.9ubuntu3) ...\r\nSetting up libpython3-dev:amd64 (3.10.6-1~22.04) ...\r\nSetting up python3-dev (3.10.6-1~22.04) ...\r\nProcessing triggers for man-db (2.10.2-1) ...\r\nProcessing triggers for libc-bin (2.35-0ubuntu3.1) ...\r\n", "stdout_lines": ["Reading package lists...", "Building dependency tree...", "Reading state information...", "The following additional packages will be installed:", "  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp", "  cpp-11 dpkg-dev fakeroot fontconfig-config fonts-dejavu-core g++ g++-11 gcc", "  gcc-11 gcc-11-base javascript-common libalgorithm-diff-perl", "  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan6 libatomic1", "  libbinutils libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev", "  libctf-nobfd0 libctf0 libdeflate0 libdpkg-perl libexpat1-dev libfakeroot", "  libfile-fcntllock-perl libfontconfig1 libfreetype6 libgcc-11-dev libgd3", "  libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libjs-jquery", "  libjs-sphinxdoc libjs-underscore liblsan0 libmpc3 libmpfr6 libnsl-dev", "  libpython3-dev libpython3.10 libpython3.10-dev libquadmath0 libstdc++-11-dev", "  libtiff5 libtirpc-dev libtsan0 libubsan1 libwebp7 libxpm4 linux-libc-dev", "  lto-disabled-list make manpages-dev python3-dev python3-distutils", "  python3-lib2to3 python3-setuptools python3-wheel python3.10-dev rpcsvc-proto", "  zlib1g-dev", "Suggested packages:", "  binutils-doc bzip2-doc cpp-doc gcc-11-locales debian-keyring g++-multilib", "  g++-11-multilib gcc-11-doc gcc-multilib autoconf automake libtool flex bison", "  gdb gcc-doc gcc-11-multilib apache2 | lighttpd | httpd glibc-doc bzr", "  libgd-tools libstdc++-11-doc make-doc python-setuptools-doc", "The following NEW packages will be installed:", "  binutils binutils-common binutils-x86-64-linux-gnu build-essential bzip2 cpp", "  cpp-11 dpkg-dev fakeroot fontconfig-config fonts-dejavu-core g++ g++-11 gcc", "  gcc-11 gcc-11-base javascript-common libalgorithm-diff-perl", "  libalgorithm-diff-xs-perl libalgorithm-merge-perl libasan6 libatomic1", "  libbinutils libc-dev-bin libc-devtools libc6-dev libcc1-0 libcrypt-dev", "  libctf-nobfd0 libctf0 libdeflate0 libdpkg-perl libexpat1-dev libfakeroot", "  libfile-fcntllock-perl libfontconfig1 libfreetype6 libgcc-11-dev libgd3", "  libgomp1 libisl23 libitm1 libjbig0 libjpeg-turbo8 libjpeg8 libjs-jquery", "  libjs-sphinxdoc libjs-underscore liblsan0 libmpc3 libmpfr6 libnsl-dev", "  libpython3-dev libpython3.10 libpython3.10-dev libquadmath0 libstdc++-11-dev", "  libtiff5 libtirpc-dev libtsan0 libubsan1 libwebp7 libxpm4 linux-libc-dev", "  lto-disabled-list make manpages-dev python3-dev python3-distutils", "  python3-lib2to3 python3-pip python3-setuptools python3-wheel python3.10-dev", "  rpcsvc-proto zlib1g-dev", "0 upgraded, 76 newly installed, 0 to remove and 0 not upgraded.", "Need to get 78.9 MB of archives.", "After this operation, 267 MB of additional disk space will be used.", "Get:1 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils-common amd64 2.38-4ubuntu2.1 [221 kB]", "Get:2 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libbinutils amd64 2.38-4ubuntu2.1 [661 kB]", "Get:3 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libctf-nobfd0 amd64 2.38-4ubuntu2.1 [107 kB]", "Get:4 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libctf0 amd64 2.38-4ubuntu2.1 [103 kB]", "Get:5 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils-x86-64-linux-gnu amd64 2.38-4ubuntu2.1 [2328 kB]", "Get:6 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 binutils amd64 2.38-4ubuntu2.1 [3198 B]", "Get:7 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-dev-bin amd64 2.35-0ubuntu3.1 [20.4 kB]", "Get:8 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 linux-libc-dev amd64 5.15.0-67.74 [1329 kB]", "Get:9 http://archive.ubuntu.com/ubuntu jammy/main amd64 libcrypt-dev amd64 1:4.4.27-1 [112 kB]", "Get:10 http://archive.ubuntu.com/ubuntu jammy/main amd64 rpcsvc-proto amd64 1.4.2-0ubuntu6 [68.5 kB]", "Get:11 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtirpc-dev amd64 1.3.2-2ubuntu0.1 [192 kB]", "Get:12 http://archive.ubuntu.com/ubuntu jammy/main amd64 libnsl-dev amd64 1.3.0-2build2 [71.3 kB]", "Get:13 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc6-dev amd64 2.35-0ubuntu3.1 [2099 kB]", "Get:14 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11-base amd64 11.3.0-1ubuntu1~22.04 [20.8 kB]", "Get:15 http://archive.ubuntu.com/ubuntu jammy/main amd64 libisl23 amd64 0.24-2build1 [727 kB]", "Get:16 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmpfr6 amd64 4.1.0-3build3 [1425 kB]", "Get:17 http://archive.ubuntu.com/ubuntu jammy/main amd64 libmpc3 amd64 1.2.1-2build1 [46.9 kB]", "Get:18 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 cpp-11 amd64 11.3.0-1ubuntu1~22.04 [9967 kB]", "Get:19 http://archive.ubuntu.com/ubuntu jammy/main amd64 cpp amd64 4:11.2.0-1ubuntu1 [27.7 kB]", "Get:20 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcc1-0 amd64 12.1.0-2ubuntu1~22.04 [47.4 kB]", "Get:21 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgomp1 amd64 12.1.0-2ubuntu1~22.04 [126 kB]", "Get:22 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libitm1 amd64 12.1.0-2ubuntu1~22.04 [30.2 kB]", "Get:23 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libatomic1 amd64 12.1.0-2ubuntu1~22.04 [10.4 kB]", "Get:24 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libasan6 amd64 11.3.0-1ubuntu1~22.04 [2284 kB]", "Get:25 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 liblsan0 amd64 12.1.0-2ubuntu1~22.04 [1069 kB]", "Get:26 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtsan0 amd64 11.3.0-1ubuntu1~22.04 [2262 kB]", "Get:27 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libubsan1 amd64 12.1.0-2ubuntu1~22.04 [976 kB]", "Get:28 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libquadmath0 amd64 12.1.0-2ubuntu1~22.04 [154 kB]", "Get:29 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libgcc-11-dev amd64 11.3.0-1ubuntu1~22.04 [2517 kB]", "Get:30 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 gcc-11 amd64 11.3.0-1ubuntu1~22.04 [20.1 MB]", "Get:31 http://archive.ubuntu.com/ubuntu jammy/main amd64 gcc amd64 4:11.2.0-1ubuntu1 [5112 B]", "Get:32 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libstdc++-11-dev amd64 11.3.0-1ubuntu1~22.04 [2087 kB]", "Get:33 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 g++-11 amd64 11.3.0-1ubuntu1~22.04 [11.4 MB]", "Get:34 http://archive.ubuntu.com/ubuntu jammy/main amd64 g++ amd64 4:11.2.0-1ubuntu1 [1412 B]", "Get:35 http://archive.ubuntu.com/ubuntu jammy/main amd64 make amd64 4.3-4.1build1 [180 kB]", "Get:36 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libdpkg-perl all 1.21.1ubuntu2.1 [237 kB]", "Get:37 http://archive.ubuntu.com/ubuntu jammy/main amd64 bzip2 amd64 1.0.8-5build1 [34.8 kB]", "Get:38 http://archive.ubuntu.com/ubuntu jammy/main amd64 lto-disabled-list all 24 [12.5 kB]", "Get:39 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 dpkg-dev all 1.21.1ubuntu2.1 [922 kB]", "Get:40 http://archive.ubuntu.com/ubuntu jammy/main amd64 build-essential amd64 12.9ubuntu3 [4744 B]", "Get:41 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfakeroot amd64 1.28-1ubuntu1 [31.5 kB]", "Get:42 http://archive.ubuntu.com/ubuntu jammy/main amd64 fakeroot amd64 1.28-1ubuntu1 [60.4 kB]", "Get:43 http://archive.ubuntu.com/ubuntu jammy/main amd64 fonts-dejavu-core all 2.37-2build1 [1041 kB]", "Get:44 http://archive.ubuntu.com/ubuntu jammy/main amd64 fontconfig-config all 2.13.1-4.2ubuntu5 [29.1 kB]", "Get:45 http://archive.ubuntu.com/ubuntu jammy/main amd64 javascript-common all 11+nmu1 [5936 B]", "Get:46 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-perl all 1.201-1 [41.8 kB]", "Get:47 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-diff-xs-perl amd64 0.04-6build3 [11.9 kB]", "Get:48 http://archive.ubuntu.com/ubuntu jammy/main amd64 libalgorithm-merge-perl all 0.08-3 [12.0 kB]", "Get:49 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libfreetype6 amd64 2.11.1+dfsg-1ubuntu0.1 [389 kB]", "Get:50 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfontconfig1 amd64 2.13.1-4.2ubuntu5 [131 kB]", "Get:51 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg-turbo8 amd64 2.1.2-0ubuntu1 [134 kB]", "Get:52 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjpeg8 amd64 8c-2ubuntu10 [2264 B]", "Get:53 http://archive.ubuntu.com/ubuntu jammy/main amd64 libdeflate0 amd64 1.10-2 [70.9 kB]", "Get:54 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libjbig0 amd64 2.1-3.1ubuntu0.22.04.1 [29.2 kB]", "Get:55 http://archive.ubuntu.com/ubuntu jammy/main amd64 libwebp7 amd64 1.2.2-2 [206 kB]", "Get:56 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libtiff5 amd64 4.3.0-6ubuntu0.4 [183 kB]", "Get:57 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libxpm4 amd64 1:3.5.12-1ubuntu0.22.04.1 [36.4 kB]", "Get:58 http://archive.ubuntu.com/ubuntu jammy/main amd64 libgd3 amd64 2.3.0-2ubuntu2 [129 kB]", "Get:59 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libc-devtools amd64 2.35-0ubuntu3.1 [28.9 kB]", "Get:60 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libexpat1-dev amd64 2.4.7-1ubuntu0.2 [147 kB]", "Get:61 http://archive.ubuntu.com/ubuntu jammy/main amd64 libfile-fcntllock-perl amd64 0.22-3build7 [33.9 kB]", "Get:62 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-jquery all 3.6.0+dfsg+~3.5.13-1 [321 kB]", "Get:63 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-underscore all 1.13.2~dfsg-2 [118 kB]", "Get:64 http://archive.ubuntu.com/ubuntu jammy/main amd64 libjs-sphinxdoc all 4.3.2-1 [139 kB]", "Get:65 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3.10 amd64 3.10.6-1~22.04.2ubuntu1 [1958 kB]", "Get:66 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 zlib1g-dev amd64 1:1.2.11.dfsg-2ubuntu9.2 [164 kB]", "Get:67 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3.10-dev amd64 3.10.6-1~22.04.2ubuntu1 [4755 kB]", "Get:68 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 libpython3-dev amd64 3.10.6-1~22.04 [7166 B]", "Get:69 http://archive.ubuntu.com/ubuntu jammy/main amd64 manpages-dev all 5.10-1ubuntu1 [2309 kB]", "Get:70 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3.10-dev amd64 3.10.6-1~22.04.2ubuntu1 [507 kB]", "Get:71 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-lib2to3 all 3.10.6-1~22.04 [77.6 kB]", "Get:72 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-distutils all 3.10.6-1~22.04 [139 kB]", "Get:73 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-dev amd64 3.10.6-1~22.04 [26.0 kB]", "Get:74 http://archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-setuptools all 59.6.0-1.2ubuntu0.22.04.1 [339 kB]", "Get:75 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python3-wheel all 0.37.1-2ubuntu0.22.04.1 [32.0 kB]", "Get:76 http://archive.ubuntu.com/ubuntu jammy-updates/universe amd64 python3-pip all 22.0.2+dfsg-1ubuntu0.2 [1305 kB]", "Fetched 78.9 MB in 3s (22.9 MB/s)", "Selecting previously unselected package binutils-common:amd64.", "(Reading database ... ", "(Reading database ... 5%", "(Reading database ... 10%", "(Reading database ... 15%", "(Reading database ... 20%", "(Reading database ... 25%", "(Reading database ... 30%", "(Reading database ... 35%", "(Reading database ... 40%", "(Reading database ... 45%", "(Reading database ... 50%", "(Reading database ... 55%", "(Reading database ... 60%", "(Reading database ... 65%", "(Reading database ... 70%", "(Reading database ... 75%", "(Reading database ... 80%", "(Reading database ... 85%", "(Reading database ... 90%", "(Reading database ... 95%", "(Reading database ... 100%", "(Reading database ... 21463 files and directories currently installed.)", "Preparing to unpack .../00-binutils-common_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking binutils-common:amd64 (2.38-4ubuntu2.1) ...", "Selecting previously unselected package libbinutils:amd64.", "Preparing to unpack .../01-libbinutils_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking libbinutils:amd64 (2.38-4ubuntu2.1) ...", "Selecting previously unselected package libctf-nobfd0:amd64.", "Preparing to unpack .../02-libctf-nobfd0_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking libctf-nobfd0:amd64 (2.38-4ubuntu2.1) ...", "Selecting previously unselected package libctf0:amd64.", "Preparing to unpack .../03-libctf0_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking libctf0:amd64 (2.38-4ubuntu2.1) ...", "Selecting previously unselected package binutils-x86-64-linux-gnu.", "Preparing to unpack .../04-binutils-x86-64-linux-gnu_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking binutils-x86-64-linux-gnu (2.38-4ubuntu2.1) ...", "Selecting previously unselected package binutils.", "Preparing to unpack .../05-binutils_2.38-4ubuntu2.1_amd64.deb ...", "Unpacking binutils (2.38-4ubuntu2.1) ...", "Selecting previously unselected package libc-dev-bin.", "Preparing to unpack .../06-libc-dev-bin_2.35-0ubuntu3.1_amd64.deb ...", "Unpacking libc-dev-bin (2.35-0ubuntu3.1) ...", "Selecting previously unselected package linux-libc-dev:amd64.", "Preparing to unpack .../07-linux-libc-dev_5.15.0-67.74_amd64.deb ...", "Unpacking linux-libc-dev:amd64 (5.15.0-67.74) ...", "Selecting previously unselected package libcrypt-dev:amd64.", "Preparing to unpack .../08-libcrypt-dev_1%3a4.4.27-1_amd64.deb ...", "Unpacking libcrypt-dev:amd64 (1:4.4.27-1) ...", "Selecting previously unselected package rpcsvc-proto.", "Preparing to unpack .../09-rpcsvc-proto_1.4.2-0ubuntu6_amd64.deb ...", "Unpacking rpcsvc-proto (1.4.2-0ubuntu6) ...", "Selecting previously unselected package libtirpc-dev:amd64.", "Preparing to unpack .../10-libtirpc-dev_1.3.2-2ubuntu0.1_amd64.deb ...", "Unpacking libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...", "Selecting previously unselected package libnsl-dev:amd64.", "Preparing to unpack .../11-libnsl-dev_1.3.0-2build2_amd64.deb ...", "Unpacking libnsl-dev:amd64 (1.3.0-2build2) ...", "Selecting previously unselected package libc6-dev:amd64.", "Preparing to unpack .../12-libc6-dev_2.35-0ubuntu3.1_amd64.deb ...", "Unpacking libc6-dev:amd64 (2.35-0ubuntu3.1) ...", "Selecting previously unselected package gcc-11-base:amd64.", "Preparing to unpack .../13-gcc-11-base_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package libisl23:amd64.", "Preparing to unpack .../14-libisl23_0.24-2build1_amd64.deb ...", "Unpacking libisl23:amd64 (0.24-2build1) ...", "Selecting previously unselected package libmpfr6:amd64.", "Preparing to unpack .../15-libmpfr6_4.1.0-3build3_amd64.deb ...", "Unpacking libmpfr6:amd64 (4.1.0-3build3) ...", "Selecting previously unselected package libmpc3:amd64.", "Preparing to unpack .../16-libmpc3_1.2.1-2build1_amd64.deb ...", "Unpacking libmpc3:amd64 (1.2.1-2build1) ...", "Selecting previously unselected package cpp-11.", "Preparing to unpack .../17-cpp-11_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking cpp-11 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package cpp.", "Preparing to unpack .../18-cpp_4%3a11.2.0-1ubuntu1_amd64.deb ...", "Unpacking cpp (4:11.2.0-1ubuntu1) ...", "Selecting previously unselected package libcc1-0:amd64.", "Preparing to unpack .../19-libcc1-0_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libgomp1:amd64.", "Preparing to unpack .../20-libgomp1_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libitm1:amd64.", "Preparing to unpack .../21-libitm1_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libatomic1:amd64.", "Preparing to unpack .../22-libatomic1_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libasan6:amd64.", "Preparing to unpack .../23-libasan6_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package liblsan0:amd64.", "Preparing to unpack .../24-liblsan0_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libtsan0:amd64.", "Preparing to unpack .../25-libtsan0_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package libubsan1:amd64.", "Preparing to unpack .../26-libubsan1_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libquadmath0:amd64.", "Preparing to unpack .../27-libquadmath0_12.1.0-2ubuntu1~22.04_amd64.deb ...", "Unpacking libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Selecting previously unselected package libgcc-11-dev:amd64.", "Preparing to unpack .../28-libgcc-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package gcc-11.", "Preparing to unpack .../29-gcc-11_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking gcc-11 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package gcc.", "Preparing to unpack .../30-gcc_4%3a11.2.0-1ubuntu1_amd64.deb ...", "Unpacking gcc (4:11.2.0-1ubuntu1) ...", "Selecting previously unselected package libstdc++-11-dev:amd64.", "Preparing to unpack .../31-libstdc++-11-dev_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package g++-11.", "Preparing to unpack .../32-g++-11_11.3.0-1ubuntu1~22.04_amd64.deb ...", "Unpacking g++-11 (11.3.0-1ubuntu1~22.04) ...", "Selecting previously unselected package g++.", "Preparing to unpack .../33-g++_4%3a11.2.0-1ubuntu1_amd64.deb ...", "Unpacking g++ (4:11.2.0-1ubuntu1) ...", "Selecting previously unselected package make.", "Preparing to unpack .../34-make_4.3-4.1build1_amd64.deb ...", "Unpacking make (4.3-4.1build1) ...", "Selecting previously unselected package libdpkg-perl.", "Preparing to unpack .../35-libdpkg-perl_1.21.1ubuntu2.1_all.deb ...", "Unpacking libdpkg-perl (1.21.1ubuntu2.1) ...", "Selecting previously unselected package bzip2.", "Preparing to unpack .../36-bzip2_1.0.8-5build1_amd64.deb ...", "Unpacking bzip2 (1.0.8-5build1) ...", "Selecting previously unselected package lto-disabled-list.", "Preparing to unpack .../37-lto-disabled-list_24_all.deb ...", "Unpacking lto-disabled-list (24) ...", "Selecting previously unselected package dpkg-dev.", "Preparing to unpack .../38-dpkg-dev_1.21.1ubuntu2.1_all.deb ...", "Unpacking dpkg-dev (1.21.1ubuntu2.1) ...", "Selecting previously unselected package build-essential.", "Preparing to unpack .../39-build-essential_12.9ubuntu3_amd64.deb ...", "Unpacking build-essential (12.9ubuntu3) ...", "Selecting previously unselected package libfakeroot:amd64.", "Preparing to unpack .../40-libfakeroot_1.28-1ubuntu1_amd64.deb ...", "Unpacking libfakeroot:amd64 (1.28-1ubuntu1) ...", "Selecting previously unselected package fakeroot.", "Preparing to unpack .../41-fakeroot_1.28-1ubuntu1_amd64.deb ...", "Unpacking fakeroot (1.28-1ubuntu1) ...", "Selecting previously unselected package fonts-dejavu-core.", "Preparing to unpack .../42-fonts-dejavu-core_2.37-2build1_all.deb ...", "Unpacking fonts-dejavu-core (2.37-2build1) ...", "Selecting previously unselected package fontconfig-config.", "Preparing to unpack .../43-fontconfig-config_2.13.1-4.2ubuntu5_all.deb ...", "Unpacking fontconfig-config (2.13.1-4.2ubuntu5) ...", "Selecting previously unselected package javascript-common.", "Preparing to unpack .../44-javascript-common_11+nmu1_all.deb ...", "Unpacking javascript-common (11+nmu1) ...", "Selecting previously unselected package libalgorithm-diff-perl.", "Preparing to unpack .../45-libalgorithm-diff-perl_1.201-1_all.deb ...", "Unpacking libalgorithm-diff-perl (1.201-1) ...", "Selecting previously unselected package libalgorithm-diff-xs-perl.", "Preparing to unpack .../46-libalgorithm-diff-xs-perl_0.04-6build3_amd64.deb ...", "Unpacking libalgorithm-diff-xs-perl (0.04-6build3) ...", "Selecting previously unselected package libalgorithm-merge-perl.", "Preparing to unpack .../47-libalgorithm-merge-perl_0.08-3_all.deb ...", "Unpacking libalgorithm-merge-perl (0.08-3) ...", "Selecting previously unselected package libfreetype6:amd64.", "Preparing to unpack .../48-libfreetype6_2.11.1+dfsg-1ubuntu0.1_amd64.deb ...", "Unpacking libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...", "Selecting previously unselected package libfontconfig1:amd64.", "Preparing to unpack .../49-libfontconfig1_2.13.1-4.2ubuntu5_amd64.deb ...", "Unpacking libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...", "Selecting previously unselected package libjpeg-turbo8:amd64.", "Preparing to unpack .../50-libjpeg-turbo8_2.1.2-0ubuntu1_amd64.deb ...", "Unpacking libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...", "Selecting previously unselected package libjpeg8:amd64.", "Preparing to unpack .../51-libjpeg8_8c-2ubuntu10_amd64.deb ...", "Unpacking libjpeg8:amd64 (8c-2ubuntu10) ...", "Selecting previously unselected package libdeflate0:amd64.", "Preparing to unpack .../52-libdeflate0_1.10-2_amd64.deb ...", "Unpacking libdeflate0:amd64 (1.10-2) ...", "Selecting previously unselected package libjbig0:amd64.", "Preparing to unpack .../53-libjbig0_2.1-3.1ubuntu0.22.04.1_amd64.deb ...", "Unpacking libjbig0:amd64 (2.1-3.1ubuntu0.22.04.1) ...", "Selecting previously unselected package libwebp7:amd64.", "Preparing to unpack .../54-libwebp7_1.2.2-2_amd64.deb ...", "Unpacking libwebp7:amd64 (1.2.2-2) ...", "Selecting previously unselected package libtiff5:amd64.", "Preparing to unpack .../55-libtiff5_4.3.0-6ubuntu0.4_amd64.deb ...", "Unpacking libtiff5:amd64 (4.3.0-6ubuntu0.4) ...", "Selecting previously unselected package libxpm4:amd64.", "Preparing to unpack .../56-libxpm4_1%3a3.5.12-1ubuntu0.22.04.1_amd64.deb ...", "Unpacking libxpm4:amd64 (1:3.5.12-1ubuntu0.22.04.1) ...", "Selecting previously unselected package libgd3:amd64.", "Preparing to unpack .../57-libgd3_2.3.0-2ubuntu2_amd64.deb ...", "Unpacking libgd3:amd64 (2.3.0-2ubuntu2) ...", "Selecting previously unselected package libc-devtools.", "Preparing to unpack .../58-libc-devtools_2.35-0ubuntu3.1_amd64.deb ...", "Unpacking libc-devtools (2.35-0ubuntu3.1) ...", "Selecting previously unselected package libexpat1-dev:amd64.", "Preparing to unpack .../59-libexpat1-dev_2.4.7-1ubuntu0.2_amd64.deb ...", "Unpacking libexpat1-dev:amd64 (2.4.7-1ubuntu0.2) ...", "Selecting previously unselected package libfile-fcntllock-perl.", "Preparing to unpack .../60-libfile-fcntllock-perl_0.22-3build7_amd64.deb ...", "Unpacking libfile-fcntllock-perl (0.22-3build7) ...", "Selecting previously unselected package libjs-jquery.", "Preparing to unpack .../61-libjs-jquery_3.6.0+dfsg+~3.5.13-1_all.deb ...", "Unpacking libjs-jquery (3.6.0+dfsg+~3.5.13-1) ...", "Selecting previously unselected package libjs-underscore.", "Preparing to unpack .../62-libjs-underscore_1.13.2~dfsg-2_all.deb ...", "Unpacking libjs-underscore (1.13.2~dfsg-2) ...", "Selecting previously unselected package libjs-sphinxdoc.", "Preparing to unpack .../63-libjs-sphinxdoc_4.3.2-1_all.deb ...", "Unpacking libjs-sphinxdoc (4.3.2-1) ...", "Selecting previously unselected package libpython3.10:amd64.", "Preparing to unpack .../64-libpython3.10_3.10.6-1~22.04.2ubuntu1_amd64.deb ...", "Unpacking libpython3.10:amd64 (3.10.6-1~22.04.2ubuntu1) ...", "Selecting previously unselected package zlib1g-dev:amd64.", "Preparing to unpack .../65-zlib1g-dev_1%3a1.2.11.dfsg-2ubuntu9.2_amd64.deb ...", "Unpacking zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...", "Selecting previously unselected package libpython3.10-dev:amd64.", "Preparing to unpack .../66-libpython3.10-dev_3.10.6-1~22.04.2ubuntu1_amd64.deb ...", "Unpacking libpython3.10-dev:amd64 (3.10.6-1~22.04.2ubuntu1) ...", "Selecting previously unselected package libpython3-dev:amd64.", "Preparing to unpack .../67-libpython3-dev_3.10.6-1~22.04_amd64.deb ...", "Unpacking libpython3-dev:amd64 (3.10.6-1~22.04) ...", "Selecting previously unselected package manpages-dev.", "Preparing to unpack .../68-manpages-dev_5.10-1ubuntu1_all.deb ...", "Unpacking manpages-dev (5.10-1ubuntu1) ...", "Selecting previously unselected package python3.10-dev.", "Preparing to unpack .../69-python3.10-dev_3.10.6-1~22.04.2ubuntu1_amd64.deb ...", "Unpacking python3.10-dev (3.10.6-1~22.04.2ubuntu1) ...", "Selecting previously unselected package python3-lib2to3.", "Preparing to unpack .../70-python3-lib2to3_3.10.6-1~22.04_all.deb ...", "Unpacking python3-lib2to3 (3.10.6-1~22.04) ...", "Selecting previously unselected package python3-distutils.", "Preparing to unpack .../71-python3-distutils_3.10.6-1~22.04_all.deb ...", "Unpacking python3-distutils (3.10.6-1~22.04) ...", "Selecting previously unselected package python3-dev.", "Preparing to unpack .../72-python3-dev_3.10.6-1~22.04_amd64.deb ...", "Unpacking python3-dev (3.10.6-1~22.04) ...", "Selecting previously unselected package python3-setuptools.", "Preparing to unpack .../73-python3-setuptools_59.6.0-1.2ubuntu0.22.04.1_all.deb ...", "Unpacking python3-setuptools (59.6.0-1.2ubuntu0.22.04.1) ...", "Selecting previously unselected package python3-wheel.", "Preparing to unpack .../74-python3-wheel_0.37.1-2ubuntu0.22.04.1_all.deb ...", "Unpacking python3-wheel (0.37.1-2ubuntu0.22.04.1) ...", "Selecting previously unselected package python3-pip.", "Preparing to unpack .../75-python3-pip_22.0.2+dfsg-1ubuntu0.2_all.deb ...", "Unpacking python3-pip (22.0.2+dfsg-1ubuntu0.2) ...", "Setting up javascript-common (11+nmu1) ...", "Setting up gcc-11-base:amd64 (11.3.0-1ubuntu1~22.04) ...", "Setting up manpages-dev (5.10-1ubuntu1) ...", "Setting up libpython3.10:amd64 (3.10.6-1~22.04.2ubuntu1) ...", "Setting up lto-disabled-list (24) ...", "Setting up libxpm4:amd64 (1:3.5.12-1ubuntu0.22.04.1) ...", "Setting up libfile-fcntllock-perl (0.22-3build7) ...", "Setting up libalgorithm-diff-perl (1.201-1) ...", "Setting up binutils-common:amd64 (2.38-4ubuntu2.1) ...", "Setting up libdeflate0:amd64 (1.10-2) ...", "Setting up linux-libc-dev:amd64 (5.15.0-67.74) ...", "Setting up libctf-nobfd0:amd64 (2.38-4ubuntu2.1) ...", "Setting up libgomp1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up bzip2 (1.0.8-5build1) ...", "Setting up libjbig0:amd64 (2.1-3.1ubuntu0.22.04.1) ...", "Setting up libfakeroot:amd64 (1.28-1ubuntu1) ...", "Setting up libasan6:amd64 (11.3.0-1ubuntu1~22.04) ...", "Setting up fakeroot (1.28-1ubuntu1) ...", "update-alternatives: using /usr/bin/fakeroot-sysv to provide /usr/bin/fakeroot (fakeroot) in auto mode", "Setting up libtirpc-dev:amd64 (1.3.2-2ubuntu0.1) ...", "Setting up rpcsvc-proto (1.4.2-0ubuntu6) ...", "Setting up libfreetype6:amd64 (2.11.1+dfsg-1ubuntu0.1) ...", "Setting up make (4.3-4.1build1) ...", "Setting up libmpfr6:amd64 (4.1.0-3build3) ...", "Setting up libquadmath0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up libmpc3:amd64 (1.2.1-2build1) ...", "Setting up libatomic1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up fonts-dejavu-core (2.37-2build1) ...", "Setting up libjpeg-turbo8:amd64 (2.1.2-0ubuntu1) ...", "Setting up libdpkg-perl (1.21.1ubuntu2.1) ...", "Setting up libwebp7:amd64 (1.2.2-2) ...", "Setting up libubsan1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up libnsl-dev:amd64 (1.3.0-2build2) ...", "Setting up libcrypt-dev:amd64 (1:4.4.27-1) ...", "Setting up libjs-jquery (3.6.0+dfsg+~3.5.13-1) ...", "Setting up libbinutils:amd64 (2.38-4ubuntu2.1) ...", "Setting up libisl23:amd64 (0.24-2build1) ...", "Setting up libc-dev-bin (2.35-0ubuntu3.1) ...", "Setting up python3-lib2to3 (3.10.6-1~22.04) ...", "Setting up libalgorithm-diff-xs-perl (0.04-6build3) ...", "Setting up libcc1-0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up liblsan0:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up libitm1:amd64 (12.1.0-2ubuntu1~22.04) ...", "Setting up libjs-underscore (1.13.2~dfsg-2) ...", "Setting up libalgorithm-merge-perl (0.08-3) ...", "Setting up libtsan0:amd64 (11.3.0-1ubuntu1~22.04) ...", "Setting up libctf0:amd64 (2.38-4ubuntu2.1) ...", "Setting up libjpeg8:amd64 (8c-2ubuntu10) ...", "Setting up python3-distutils (3.10.6-1~22.04) ...", "Setting up cpp-11 (11.3.0-1ubuntu1~22.04) ...", "Setting up python3-setuptools (59.6.0-1.2ubuntu0.22.04.1) ...", "Setting up fontconfig-config (2.13.1-4.2ubuntu5) ...", "Setting up python3-wheel (0.37.1-2ubuntu0.22.04.1) ...", "Setting up python3-pip (22.0.2+dfsg-1ubuntu0.2) ...", "Setting up libjs-sphinxdoc (4.3.2-1) ...", "Setting up libgcc-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...", "Setting up cpp (4:11.2.0-1ubuntu1) ...", "Setting up libc6-dev:amd64 (2.35-0ubuntu3.1) ...", "Setting up libtiff5:amd64 (4.3.0-6ubuntu0.4) ...", "Setting up libfontconfig1:amd64 (2.13.1-4.2ubuntu5) ...", "Setting up binutils-x86-64-linux-gnu (2.38-4ubuntu2.1) ...", "Setting up binutils (2.38-4ubuntu2.1) ...", "Setting up dpkg-dev (1.21.1ubuntu2.1) ...", "Setting up libexpat1-dev:amd64 (2.4.7-1ubuntu0.2) ...", "Setting up libgd3:amd64 (2.3.0-2ubuntu2) ...", "Setting up libstdc++-11-dev:amd64 (11.3.0-1ubuntu1~22.04) ...", "Setting up zlib1g-dev:amd64 (1:1.2.11.dfsg-2ubuntu9.2) ...", "Setting up gcc-11 (11.3.0-1ubuntu1~22.04) ...", "Setting up libc-devtools (2.35-0ubuntu3.1) ...", "Setting up g++-11 (11.3.0-1ubuntu1~22.04) ...", "Setting up gcc (4:11.2.0-1ubuntu1) ...", "Setting up libpython3.10-dev:amd64 (3.10.6-1~22.04.2ubuntu1) ...", "Setting up python3.10-dev (3.10.6-1~22.04.2ubuntu1) ...", "Setting up g++ (4:11.2.0-1ubuntu1) ...", "update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode", "Setting up build-essential (12.9ubuntu3) ...", "Setting up libpython3-dev:amd64 (3.10.6-1~22.04) ...", "Setting up python3-dev (3.10.6-1~22.04) ...", "Processing triggers for man-db (2.10.2-1) ...", "Processing triggers for libc-bin (2.35-0ubuntu3.1) ..."]}
2023-03-26 11:18:19,871 p=57018 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests'], state=present] *******************************************************************************************************************
2023-03-26 11:18:23,107 p=57018 u=craig n=ansible | changed: [caddy] => {"changed": true, "cmd": ["/usr/bin/python3", "-m", "pip.__main__", "install", "docker", "requests"], "name": ["docker", "requests"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Collecting docker\n  Downloading docker-6.0.1-py3-none-any.whl (147 kB)\n      147.5/147.5 KB 1.9 MB/s eta 0:00:00\nCollecting requests\n  Downloading requests-2.28.2-py3-none-any.whl (62 kB)\n      62.8/62.8 KB 3.9 MB/s eta 0:00:00\nCollecting websocket-client>=0.32.0\n  Downloading websocket_client-1.5.1-py3-none-any.whl (55 kB)\n      55.9/55.9 KB 2.9 MB/s eta 0:00:00\nCollecting packaging>=14.0\n  Downloading packaging-23.0-py3-none-any.whl (42 kB)\n      42.7/42.7 KB 2.4 MB/s eta 0:00:00\nCollecting urllib3>=1.26.0\n  Downloading urllib3-1.26.15-py2.py3-none-any.whl (140 kB)\n      140.9/140.9 KB 5.0 MB/s eta 0:00:00\nCollecting charset-normalizer<4,>=2\n  Downloading charset_normalizer-3.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (199 kB)\n      199.3/199.3 KB 7.6 MB/s eta 0:00:00\nCollecting certifi>=2017.4.17\n  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)\n      155.3/155.3 KB 5.8 MB/s eta 0:00:00\nCollecting idna<4,>=2.5\n  Downloading idna-3.4-py3-none-any.whl (61 kB)\n      61.5/61.5 KB 3.9 MB/s eta 0:00:00\nInstalling collected packages: websocket-client, urllib3, packaging, idna, charset-normalizer, certifi, requests, docker\nSuccessfully installed certifi-2022.12.7 charset-normalizer-3.1.0 docker-6.0.1 idna-3.4 packaging-23.0 requests-2.28.2 urllib3-1.26.15 websocket-client-1.5.1\n", "stdout_lines": ["Collecting docker", "  Downloading docker-6.0.1-py3-none-any.whl (147 kB)", "      147.5/147.5 KB 1.9 MB/s eta 0:00:00", "Collecting requests", "  Downloading requests-2.28.2-py3-none-any.whl (62 kB)", "      62.8/62.8 KB 3.9 MB/s eta 0:00:00", "Collecting websocket-client>=0.32.0", "  Downloading websocket_client-1.5.1-py3-none-any.whl (55 kB)", "      55.9/55.9 KB 2.9 MB/s eta 0:00:00", "Collecting packaging>=14.0", "  Downloading packaging-23.0-py3-none-any.whl (42 kB)", "      42.7/42.7 KB 2.4 MB/s eta 0:00:00", "Collecting urllib3>=1.26.0", "  Downloading urllib3-1.26.15-py2.py3-none-any.whl (140 kB)", "      140.9/140.9 KB 5.0 MB/s eta 0:00:00", "Collecting charset-normalizer<4,>=2", "  Downloading charset_normalizer-3.1.0-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (199 kB)", "      199.3/199.3 KB 7.6 MB/s eta 0:00:00", "Collecting certifi>=2017.4.17", "  Downloading certifi-2022.12.7-py3-none-any.whl (155 kB)", "      155.3/155.3 KB 5.8 MB/s eta 0:00:00", "Collecting idna<4,>=2.5", "  Downloading idna-3.4-py3-none-any.whl (61 kB)", "      61.5/61.5 KB 3.9 MB/s eta 0:00:00", "Installing collected packages: websocket-client, urllib3, packaging, idna, charset-normalizer, certifi, requests, docker", "Successfully installed certifi-2022.12.7 charset-normalizer-3.1.0 docker-6.0.1 idna-3.4 packaging-23.0 requests-2.28.2 urllib3-1.26.15 websocket-client-1.5.1"], "version": null, "virtualenv": null}
2023-03-26 11:18:23,126 p=57018 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:18:24,077 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:18:24,089 p=57018 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:18:25,835 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:18:25,845 p=57018 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:18:27,273 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 11:18:27,284 p=57018 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:18:28,769 p=57018 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "c43724b971717b15ffebd8d050204a7db84c3473", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 300, "state": "file", "uid": 0}
2023-03-26 11:18:28,780 p=57018 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:18:29,860 p=57018 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Unable to load docker-compose. Try `pip install docker-compose`. Error: Traceback (most recent call last):\n  File \"/tmp/ansible_ansible.builtin.docker_compose_payload_dc7i117r/ansible_ansible.builtin.docker_compose_payload.zip/ansible_collections/community/docker/plugins/modules/docker_compose.py\", line 497, in <module>\nModuleNotFoundError: No module named 'compose'\n"}
2023-03-26 11:18:29,862 p=57018 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:18:29,862 p=57018 u=craig n=ansible | caddy                      : ok=17   changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:19:39,490 p=57384 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:19:39,664 p=57384 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:19:39,675 p=57384 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:19:42,125 p=57384 u=craig n=ansible | ok: [caddy]
2023-03-26 11:19:42,134 p=57384 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:19:42,146 p=57384 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:19:42,153 p=57384 u=craig n=ansible | TASK [Include secrets file=../../../secrets.yaml] **********************************************************************************************************************************************************
2023-03-26 11:19:42,176 p=57384 u=craig n=ansible | ok: [caddy] => {"ansible_facts": {"google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "host_ip": "192.168.1.99", "proxmox_api_token_id": "root@pam!terraform", "proxmox_api_token_secret": "6165417e-cfcb-4839-a136-4f9e243968be", "proxmox_api_url": "https://192.168.1.99:8006/api2/json", "root_password": "$3z!b9YHBhH8#kSt$", "root_user": "root@pam"}, "ansible_included_var_files": ["/Users/craig/Projects/homelab/ansible/playbooks/caddy/../../../secrets.yaml"], "changed": false}
2023-03-26 11:19:42,182 p=57384 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:19:42,195 p=57384 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:19:42,206 p=57384 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:19:44,337 p=57384 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:19:44,347 p=57384 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:19:45,732 p=57384 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:19:47,174 p=57384 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:19:48,516 p=57384 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:19:49,940 p=57384 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:19:51,408 p=57384 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:19:52,809 p=57384 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:19:52,823 p=57384 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:19:54,046 p=57384 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:19:54,056 p=57384 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:19:55,260 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:19:55,271 p=57384 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:19:56,610 p=57384 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:19:56,619 p=57384 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:19:57,831 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "54513868000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "55984128", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:19:57,837 p=57384 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:19:58,751 p=57384 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:19:58,757 p=57384 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-26 11:20:00,037 p=57384 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:20:00,046 p=57384 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-26 11:20:04,869 p=57384 u=craig n=ansible | changed: [caddy] => {"changed": true, "cmd": ["/usr/bin/python3", "-m", "pip.__main__", "install", "docker", "requests", "docker-compose"], "name": ["docker", "requests", "docker-compose"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)\nRequirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)\nCollecting docker-compose\n  Downloading docker_compose-1.29.2-py2.py3-none-any.whl (114 kB)\n      114.8/114.8 KB 2.4 MB/s eta 0:00:00\nRequirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.5.1)\nRequirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)\nRequirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)\nRequirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)\nCollecting jsonschema<4,>=2.5.1\n  Downloading jsonschema-3.2.0-py2.py3-none-any.whl (56 kB)\n      56.3/56.3 KB 3.6 MB/s eta 0:00:00\nCollecting texttable<2,>=0.9.0\n  Downloading texttable-1.6.7-py2.py3-none-any.whl (10 kB)\nRequirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)\nCollecting docopt<1,>=0.6.1\n  Downloading docopt-0.6.2.tar.gz (25 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting python-dotenv<1,>=0.13.0\n  Downloading python_dotenv-0.21.1-py3-none-any.whl (19 kB)\nCollecting dockerpty<1,>=0.4.1\n  Downloading dockerpty-0.4.1.tar.gz (13 kB)\n  Preparing metadata (setup.py): started\n  Preparing metadata (setup.py): finished with status 'done'\nCollecting websocket-client>=0.32.0\n  Downloading websocket_client-0.59.0-py2.py3-none-any.whl (67 kB)\n      67.2/67.2 KB 4.4 MB/s eta 0:00:00\nCollecting paramiko>=2.4.3\n  Downloading paramiko-3.1.0-py3-none-any.whl (211 kB)\n      211.2/211.2 KB 6.6 MB/s eta 0:00:00\nRequirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)\nRequirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)\nCollecting attrs>=17.4.0\n  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)\n      60.0/60.0 KB 5.6 MB/s eta 0:00:00\nCollecting pyrsistent>=0.14.0\n  Downloading pyrsistent-0.19.3-py3-none-any.whl (57 kB)\n      57.5/57.5 KB 5.9 MB/s eta 0:00:00\nCollecting bcrypt>=3.2\n  Downloading bcrypt-4.0.1-cp36-abi3-manylinux_2_28_x86_64.whl (593 kB)\n      593.7/593.7 KB 16.4 MB/s eta 0:00:00\nRequirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)\nCollecting pynacl>=1.5\n  Downloading PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (856 kB)\n      856.7/856.7 KB 28.5 MB/s eta 0:00:00\nCollecting cffi>=1.4.1\n  Downloading cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (441 kB)\n      441.8/441.8 KB 21.8 MB/s eta 0:00:00\nCollecting pycparser\n  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)\n      118.7/118.7 KB 7.1 MB/s eta 0:00:00\nBuilding wheels for collected packages: dockerpty, docopt\n  Building wheel for dockerpty (setup.py): started\n  Building wheel for dockerpty (setup.py): finished with status 'done'\n  Created wheel for dockerpty: filename=dockerpty-0.4.1-py3-none-any.whl size=16614 sha256=bed87f3066b1c449a545868826785e960022909aaec5bec7b80ca0ea3b4dfd1a\n  Stored in directory: /root/.cache/pip/wheels/18/00/32/f75cd03098074f988a01c59a2e3a55ae9c0773eb66acb4cb5e\n  Building wheel for docopt (setup.py): started\n  Building wheel for docopt (setup.py): finished with status 'done'\n  Created wheel for docopt: filename=docopt-0.6.2-py2.py3-none-any.whl size=13723 sha256=f9412b6ff438e4bf79fba3dad6115bc3acf2d9e9a250de3153704cdef8599289\n  Stored in directory: /root/.cache/pip/wheels/fc/ab/d4/5da2067ac95b36618c629a5f93f809425700506f72c9732fac\nSuccessfully built dockerpty docopt\nInstalling collected packages: texttable, docopt, websocket-client, python-dotenv, pyrsistent, pycparser, dockerpty, bcrypt, attrs, jsonschema, cffi, pynacl, paramiko, docker-compose\n  Attempting uninstall: websocket-client\n    Found existing installation: websocket-client 1.5.1\n    Uninstalling websocket-client-1.5.1:\n      Successfully uninstalled websocket-client-1.5.1\nSuccessfully installed attrs-22.2.0 bcrypt-4.0.1 cffi-1.15.1 docker-compose-1.29.2 dockerpty-0.4.1 docopt-0.6.2 jsonschema-3.2.0 paramiko-3.1.0 pycparser-2.21 pynacl-1.5.0 pyrsistent-0.19.3 python-dotenv-0.21.1 texttable-1.6.7 websocket-client-0.59.0\n", "stdout_lines": ["Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)", "Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)", "Collecting docker-compose", "  Downloading docker_compose-1.29.2-py2.py3-none-any.whl (114 kB)", "      114.8/114.8 KB 2.4 MB/s eta 0:00:00", "Requirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.5.1)", "Requirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)", "Requirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)", "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)", "Requirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)", "Collecting jsonschema<4,>=2.5.1", "  Downloading jsonschema-3.2.0-py2.py3-none-any.whl (56 kB)", "      56.3/56.3 KB 3.6 MB/s eta 0:00:00", "Collecting texttable<2,>=0.9.0", "  Downloading texttable-1.6.7-py2.py3-none-any.whl (10 kB)", "Requirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)", "Collecting docopt<1,>=0.6.1", "  Downloading docopt-0.6.2.tar.gz (25 kB)", "  Preparing metadata (setup.py): started", "  Preparing metadata (setup.py): finished with status 'done'", "Collecting python-dotenv<1,>=0.13.0", "  Downloading python_dotenv-0.21.1-py3-none-any.whl (19 kB)", "Collecting dockerpty<1,>=0.4.1", "  Downloading dockerpty-0.4.1.tar.gz (13 kB)", "  Preparing metadata (setup.py): started", "  Preparing metadata (setup.py): finished with status 'done'", "Collecting websocket-client>=0.32.0", "  Downloading websocket_client-0.59.0-py2.py3-none-any.whl (67 kB)", "      67.2/67.2 KB 4.4 MB/s eta 0:00:00", "Collecting paramiko>=2.4.3", "  Downloading paramiko-3.1.0-py3-none-any.whl (211 kB)", "      211.2/211.2 KB 6.6 MB/s eta 0:00:00", "Requirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)", "Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)", "Collecting attrs>=17.4.0", "  Downloading attrs-22.2.0-py3-none-any.whl (60 kB)", "      60.0/60.0 KB 5.6 MB/s eta 0:00:00", "Collecting pyrsistent>=0.14.0", "  Downloading pyrsistent-0.19.3-py3-none-any.whl (57 kB)", "      57.5/57.5 KB 5.9 MB/s eta 0:00:00", "Collecting bcrypt>=3.2", "  Downloading bcrypt-4.0.1-cp36-abi3-manylinux_2_28_x86_64.whl (593 kB)", "      593.7/593.7 KB 16.4 MB/s eta 0:00:00", "Requirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)", "Collecting pynacl>=1.5", "  Downloading PyNaCl-1.5.0-cp36-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_24_x86_64.whl (856 kB)", "      856.7/856.7 KB 28.5 MB/s eta 0:00:00", "Collecting cffi>=1.4.1", "  Downloading cffi-1.15.1-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (441 kB)", "      441.8/441.8 KB 21.8 MB/s eta 0:00:00", "Collecting pycparser", "  Downloading pycparser-2.21-py2.py3-none-any.whl (118 kB)", "      118.7/118.7 KB 7.1 MB/s eta 0:00:00", "Building wheels for collected packages: dockerpty, docopt", "  Building wheel for dockerpty (setup.py): started", "  Building wheel for dockerpty (setup.py): finished with status 'done'", "  Created wheel for dockerpty: filename=dockerpty-0.4.1-py3-none-any.whl size=16614 sha256=bed87f3066b1c449a545868826785e960022909aaec5bec7b80ca0ea3b4dfd1a", "  Stored in directory: /root/.cache/pip/wheels/18/00/32/f75cd03098074f988a01c59a2e3a55ae9c0773eb66acb4cb5e", "  Building wheel for docopt (setup.py): started", "  Building wheel for docopt (setup.py): finished with status 'done'", "  Created wheel for docopt: filename=docopt-0.6.2-py2.py3-none-any.whl size=13723 sha256=f9412b6ff438e4bf79fba3dad6115bc3acf2d9e9a250de3153704cdef8599289", "  Stored in directory: /root/.cache/pip/wheels/fc/ab/d4/5da2067ac95b36618c629a5f93f809425700506f72c9732fac", "Successfully built dockerpty docopt", "Installing collected packages: texttable, docopt, websocket-client, python-dotenv, pyrsistent, pycparser, dockerpty, bcrypt, attrs, jsonschema, cffi, pynacl, paramiko, docker-compose", "  Attempting uninstall: websocket-client", "    Found existing installation: websocket-client 1.5.1", "    Uninstalling websocket-client-1.5.1:", "      Successfully uninstalled websocket-client-1.5.1", "Successfully installed attrs-22.2.0 bcrypt-4.0.1 cffi-1.15.1 docker-compose-1.29.2 dockerpty-0.4.1 docopt-0.6.2 jsonschema-3.2.0 paramiko-3.1.0 pycparser-2.21 pynacl-1.5.0 pyrsistent-0.19.3 python-dotenv-0.21.1 texttable-1.6.7 websocket-client-0.59.0"], "version": null, "virtualenv": null}
2023-03-26 11:20:04,887 p=57384 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:20:05,866 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:20:05,877 p=57384 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:20:07,448 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:20:07,458 p=57384 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:20:08,921 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8029405e9fec980590d1a15305fbe0aa4373702f", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 202, "state": "file", "uid": 0}
2023-03-26 11:20:08,932 p=57384 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:20:10,360 p=57384 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "c43724b971717b15ffebd8d050204a7db84c3473", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 300, "state": "file", "uid": 0}
2023-03-26 11:20:10,368 p=57384 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:20:12,326 p=57384 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "", "msg": "Error: pull failed with 404 Client Error for http+docker://localhost/v1.42/images/create?tag=latest&fromImage=caddy-custom: Not Found (\"pull access denied for caddy-custom, repository does not exist or may require 'docker login': denied: requested access to the resource is denied\")"}
2023-03-26 11:20:12,327 p=57384 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:20:12,327 p=57384 u=craig n=ansible | caddy                      : ok=17   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:22:43,431 p=57827 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:22:43,612 p=57827 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:22:43,623 p=57827 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:22:46,103 p=57827 u=craig n=ansible | ok: [caddy]
2023-03-26 11:22:46,112 p=57827 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:22:46,124 p=57827 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:22:46,131 p=57827 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-26 11:22:46,152 p=57827 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 11:22:46,158 p=57827 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:22:46,169 p=57827 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:22:46,179 p=57827 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:22:48,254 p=57827 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:22:48,261 p=57827 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:22:49,667 p=57827 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:22:51,001 p=57827 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:22:52,341 p=57827 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:22:53,756 p=57827 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:22:55,201 p=57827 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:22:56,548 p=57827 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:22:56,568 p=57827 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:22:57,794 p=57827 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:22:57,808 p=57827 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:22:58,892 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:22:58,909 p=57827 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:23:00,266 p=57827 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:23:00,281 p=57827 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:23:01,564 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "54760069000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "67706880", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:23:01,577 p=57827 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:23:02,636 p=57827 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:23:02,651 p=57827 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-26 11:23:03,960 p=57827 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:23:03,975 p=57827 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-26 11:23:05,560 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["/usr/bin/python3", "-m", "pip.__main__", "install", "docker", "requests", "docker-compose"], "name": ["docker", "requests", "docker-compose"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)\nRequirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)\nRequirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)\nRequirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)\nRequirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)\nRequirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)\nRequirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)\nRequirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)\nRequirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)\nRequirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)\nRequirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)\nRequirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)\nRequirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)\nRequirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)\nRequirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)\nRequirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)\nRequirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)\nRequirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)\nRequirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)\nRequirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)\nRequirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)\nRequirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)\n", "stdout_lines": ["Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)", "Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)", "Requirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)", "Requirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)", "Requirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)", "Requirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)", "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)", "Requirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)", "Requirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)", "Requirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)", "Requirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)", "Requirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)", "Requirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)", "Requirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)", "Requirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)", "Requirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)", "Requirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)", "Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)", "Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)", "Requirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)", "Requirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)", "Requirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)", "Requirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)", "Requirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)"], "version": null, "virtualenv": null}
2023-03-26 11:23:05,582 p=57827 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:23:06,525 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:23:06,531 p=57827 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:23:08,069 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:23:08,079 p=57827 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:23:09,980 p=57827 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "md5sum": "ed51e4e5295743836b13064ea447c062", "mode": "0644", "owner": "root", "size": 196, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679844188.156943-58014-120695324728142/source", "state": "file", "uid": 0}
2023-03-26 11:23:09,992 p=57827 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:23:11,424 p=57827 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "c43724b971717b15ffebd8d050204a7db84c3473", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 300, "state": "file", "uid": 0}
2023-03-26 11:23:11,434 p=57827 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:23:13,139 p=57827 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "", "msg": "Error: pull failed with 404 Client Error for http+docker://localhost/v1.42/images/create?tag=latest&fromImage=caddy-custom: Not Found (\"pull access denied for caddy-custom, repository does not exist or may require 'docker login': denied: requested access to the resource is denied\")"}
2023-03-26 11:23:13,141 p=57827 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:23:13,141 p=57827 u=craig n=ansible | caddy                      : ok=17   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 11:24:55,075 p=58223 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:24:55,252 p=58223 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:24:55,261 p=58223 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:24:57,591 p=58223 u=craig n=ansible | ok: [caddy]
2023-03-26 11:24:57,599 p=58223 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:24:57,611 p=58223 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:24:57,618 p=58223 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-26 11:24:57,643 p=58223 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 11:24:57,652 p=58223 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:24:57,670 p=58223 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:24:57,682 p=58223 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:25:00,126 p=58223 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:25:00,133 p=58223 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:25:01,422 p=58223 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:25:02,691 p=58223 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:25:03,951 p=58223 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:25:05,190 p=58223 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:25:06,442 p=58223 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:25:07,735 p=58223 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:25:07,748 p=58223 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:25:08,950 p=58223 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:25:08,960 p=58223 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:25:09,980 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:25:09,985 p=58223 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:25:11,294 p=58223 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:25:11,304 p=58223 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:25:12,504 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "54916014000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "67321856", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "7", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:25:12,514 p=58223 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:25:13,519 p=58223 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:25:13,529 p=58223 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-26 11:25:14,850 p=58223 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:25:14,861 p=58223 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-26 11:25:16,363 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["/usr/bin/python3", "-m", "pip.__main__", "install", "docker", "requests", "docker-compose"], "name": ["docker", "requests", "docker-compose"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)\nRequirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)\nRequirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)\nRequirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)\nRequirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)\nRequirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)\nRequirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)\nRequirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)\nRequirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)\nRequirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)\nRequirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)\nRequirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)\nRequirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)\nRequirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)\nRequirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)\nRequirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)\nRequirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)\nRequirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)\nRequirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)\nRequirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)\nRequirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)\nRequirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)\n", "stdout_lines": ["Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)", "Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)", "Requirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)", "Requirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)", "Requirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)", "Requirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)", "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)", "Requirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)", "Requirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)", "Requirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)", "Requirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)", "Requirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)", "Requirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)", "Requirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)", "Requirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)", "Requirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)", "Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)", "Requirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)", "Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)", "Requirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)", "Requirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)", "Requirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)", "Requirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)", "Requirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)"], "version": null, "virtualenv": null}
2023-03-26 11:25:16,380 p=58223 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:25:17,312 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:25:17,323 p=58223 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:25:18,831 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "fedccc7b7e4aaa2b9488d74c7f2c69f3ae92fbc6", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 124, "state": "file", "uid": 0}
2023-03-26 11:25:18,841 p=58223 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:25:20,287 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 11:25:20,299 p=58223 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:25:22,211 p=58223 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "md5sum": "f88dcaaf613b65ee412d49aafbdad86c", "mode": "0644", "owner": "root", "size": 293, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679844320.38412-58422-180764051406495/source", "state": "file", "uid": 0}
2023-03-26 11:25:22,223 p=58223 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:31:15,813 p=58223 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 11:31:15,827 p=58223 u=craig n=ansible | TASK [docker_swarm_node : Check if Docker Swarm is already initialized _raw_params=docker info -f "{{ '{{.Swarm.LocalNodeState}}' }}"] *********************************************************************
2023-03-26 11:31:17,476 p=58223 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["docker", "info", "-f", "{{.Swarm.LocalNodeState}}"], "delta": "0:00:00.675289", "end": "2023-03-26 15:31:17.365060", "msg": "", "rc": 0, "start": "2023-03-26 15:31:16.689771", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2023-03-26 11:31:17,486 p=58223 u=craig n=ansible | TASK [docker_swarm_node : Initialize Docker Swarm _raw_params=docker swarm init] ***************************************************************************************************************************
2023-03-26 11:31:17,500 p=58223 u=craig n=ansible | skipping: [caddy] => {"changed": false, "skip_reason": "Conditional result was False"}
2023-03-26 11:31:17,507 p=58223 u=craig n=ansible | TASK [docker_swarm_node : Join Docker Swarm as a worker _raw_params=docker swarm join --token "{{ hostvars[groups['lxc']['swarm-master']].swarm_init_result.stdout_lines[-2].split(' ')[-1] }}" "{{ hostvars[groups['lxc']['swarm-master']].ansible_host }}:2377"] ***
2023-03-26 11:31:17,522 p=58223 u=craig n=ansible | fatal: [caddy]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'list object' has no attribute 'swarm-master'\n\nThe error appears to be in '/Users/craig/Projects/homelab/ansible/roles/docker_swarm_node/tasks/main.yaml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Join Docker Swarm as a worker\n  ^ here\n"}
2023-03-26 11:31:17,523 p=58223 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:31:17,523 p=58223 u=craig n=ansible | caddy                      : ok=19   changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-26 11:48:42,741 p=60301 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 11:48:42,942 p=60301 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-26 11:48:42,953 p=60301 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-26 11:48:45,797 p=60301 u=craig n=ansible | ok: [caddy]
2023-03-26 11:48:45,806 p=60301 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-26 11:48:45,821 p=60301 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 11:48:45,828 p=60301 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-26 11:48:45,849 p=60301 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 11:48:45,855 p=60301 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-26 11:48:45,867 p=60301 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 11:48:45,878 p=60301 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-26 11:48:48,900 p=60301 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:48:48,911 p=60301 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-26 11:48:50,338 p=60301 u=craig n=ansible | ok: [caddy] => (item=apt-transport-https) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "apt-transport-https"}
2023-03-26 11:48:51,708 p=60301 u=craig n=ansible | ok: [caddy] => (item=ca-certificates) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "ca-certificates"}
2023-03-26 11:48:53,088 p=60301 u=craig n=ansible | ok: [caddy] => (item=curl) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "curl"}
2023-03-26 11:48:54,534 p=60301 u=craig n=ansible | ok: [caddy] => (item=gnupg) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "gnupg"}
2023-03-26 11:48:55,899 p=60301 u=craig n=ansible | ok: [caddy] => (item=lsb-release) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "lsb-release"}
2023-03-26 11:48:57,337 p=60301 u=craig n=ansible | ok: [caddy] => (item=software-properties-common) => {"ansible_loop_var": "item", "cache_update_time": 1679837102, "cache_updated": false, "changed": false, "item": "software-properties-common"}
2023-03-26 11:48:57,351 p=60301 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-26 11:48:58,604 p=60301 u=craig n=ansible | ok: [caddy] => {"before": ["8D81803C0EBFCD88", "7EA0A9C3F273FCD8", "D94AA3F0EFE21092", "871920D1991BC93C"], "changed": false, "fp": "8D81803C0EBFCD88", "id": "8D81803C0EBFCD88", "key_id": "8D81803C0EBFCD88", "short_id": "0EBFCD88"}
2023-03-26 11:48:58,615 p=60301 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-26 11:48:59,804 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "repo": "deb [arch=amd64] https://download.docker.com/linux/ubuntu jammy stable", "state": "present"}
2023-03-26 11:48:59,815 p=60301 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-26 11:49:01,365 p=60301 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:49:01,376 p=60301 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-26 11:49:02,617 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "enabled": true, "name": "docker", "state": "started", "status": {"ActiveEnterTimestamp": "Sun 2023-03-26 02:17:04 UTC", "ActiveEnterTimestampMonotonic": "2432800035853", "ActiveExitTimestamp": "n/a", "ActiveExitTimestampMonotonic": "0", "ActiveState": "active", "After": "system.slice docker.socket containerd.service network-online.target firewalld.service basic.target sysinit.target time-set.target systemd-journald.socket", "AllowIsolate": "no", "AssertResult": "yes", "AssertTimestamp": "Sun 2023-03-26 02:17:02 UTC", "AssertTimestampMonotonic": "2432798834761", "Before": "shutdown.target multi-user.target", "BlockIOAccounting": "no", "BlockIOWeight": "[not set]", "CPUAccounting": "yes", "CPUAffinityFromNUMA": "no", "CPUQuotaPerSecUSec": "infinity", "CPUQuotaPeriodUSec": "infinity", "CPUSchedulingPolicy": "0", "CPUSchedulingPriority": "0", "CPUSchedulingResetOnFork": "no", "CPUShares": "[not set]", "CPUUsageNSec": "82183411000", "CPUWeight": "[not set]", "CacheDirectoryMode": "0755", "CanFreeze": "yes", "CanIsolate": "no", "CanReload": "yes", "CanStart": "yes", "CanStop": "yes", "CapabilityBoundingSet": "cap_chown cap_dac_override cap_dac_read_search cap_fowner cap_fsetid cap_kill cap_setgid cap_setuid cap_setpcap cap_linux_immutable cap_net_bind_service cap_net_broadcast cap_net_admin cap_net_raw cap_ipc_lock cap_ipc_owner cap_sys_module cap_sys_rawio cap_sys_chroot cap_sys_ptrace cap_sys_pacct cap_sys_admin cap_sys_boot cap_sys_nice cap_sys_resource cap_sys_time cap_sys_tty_config cap_mknod cap_lease cap_audit_write cap_audit_control cap_setfcap cap_mac_override cap_mac_admin cap_syslog cap_wake_alarm cap_block_suspend cap_audit_read cap_perfmon cap_bpf cap_checkpoint_restore", "CleanResult": "success", "CollectMode": "inactive", "ConditionResult": "yes", "ConditionTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ConditionTimestampMonotonic": "2432798834760", "ConfigurationDirectoryMode": "0755", "Conflicts": "shutdown.target", "ControlGroup": "/system.slice/docker.service", "ControlPID": "0", "CoredumpFilter": "0x33", "DefaultDependencies": "yes", "DefaultMemoryLow": "0", "DefaultMemoryMin": "0", "Delegate": "yes", "DelegateControllers": "cpu cpuacct cpuset io blkio memory devices pids bpf-firewall bpf-devices bpf-foreign bpf-socket-bind", "Description": "Docker Application Container Engine", "DevicePolicy": "auto", "Documentation": "https://docs.docker.com", "DynamicUser": "no", "EffectiveCPUs": "9", "EffectiveMemoryNodes": "0", "ExecMainCode": "0", "ExecMainExitTimestamp": "n/a", "ExecMainExitTimestampMonotonic": "0", "ExecMainPID": "13591", "ExecMainStartTimestamp": "Sun 2023-03-26 02:17:02 UTC", "ExecMainStartTimestampMonotonic": "2432798835264", "ExecMainStatus": "0", "ExecReload": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; ignore_errors=no ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecReloadEx": "{ path=/bin/kill ; argv[]=/bin/kill -s HUP $MAINPID ; flags= ; start_time=[n/a] ; stop_time=[n/a] ; pid=0 ; code=(null) ; status=0/0 }", "ExecStart": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; ignore_errors=no ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "ExecStartEx": "{ path=/usr/bin/dockerd ; argv[]=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock ; flags= ; start_time=[Sun 2023-03-26 02:17:02 UTC] ; stop_time=[n/a] ; pid=13591 ; code=(null) ; status=0/0 }", "FailureAction": "none", "FileDescriptorStoreMax": "0", "FinalKillSignal": "9", "FragmentPath": "/lib/systemd/system/docker.service", "FreezerState": "running", "GID": "[not set]", "GuessMainPID": "yes", "IOAccounting": "no", "IOReadBytes": "18446744073709551615", "IOReadOperations": "18446744073709551615", "IOSchedulingClass": "2", "IOSchedulingPriority": "4", "IOWeight": "[not set]", "IOWriteBytes": "18446744073709551615", "IOWriteOperations": "18446744073709551615", "IPAccounting": "no", "IPEgressBytes": "[no data]", "IPEgressPackets": "[no data]", "IPIngressBytes": "[no data]", "IPIngressPackets": "[no data]", "Id": "docker.service", "IgnoreOnIsolate": "no", "IgnoreSIGPIPE": "yes", "InactiveEnterTimestamp": "n/a", "InactiveEnterTimestampMonotonic": "0", "InactiveExitTimestamp": "Sun 2023-03-26 02:17:02 UTC", "InactiveExitTimestampMonotonic": "2432798836125", "InvocationID": "32434b5b68044e38a1ca9c98fec0ae80", "JobRunningTimeoutUSec": "infinity", "JobTimeoutAction": "none", "JobTimeoutUSec": "infinity", "KeyringMode": "private", "KillMode": "process", "KillSignal": "15", "LimitAS": "infinity", "LimitASSoft": "infinity", "LimitCORE": "infinity", "LimitCORESoft": "infinity", "LimitCPU": "infinity", "LimitCPUSoft": "infinity", "LimitDATA": "infinity", "LimitDATASoft": "infinity", "LimitFSIZE": "infinity", "LimitFSIZESoft": "infinity", "LimitLOCKS": "infinity", "LimitLOCKSSoft": "infinity", "LimitMEMLOCK": "65536", "LimitMEMLOCKSoft": "65536", "LimitMSGQUEUE": "819200", "LimitMSGQUEUESoft": "819200", "LimitNICE": "0", "LimitNICESoft": "0", "LimitNOFILE": "infinity", "LimitNOFILESoft": "infinity", "LimitNPROC": "infinity", "LimitNPROCSoft": "infinity", "LimitRSS": "infinity", "LimitRSSSoft": "infinity", "LimitRTPRIO": "0", "LimitRTPRIOSoft": "0", "LimitRTTIME": "infinity", "LimitRTTIMESoft": "infinity", "LimitSIGPENDING": "127619", "LimitSIGPENDINGSoft": "127619", "LimitSTACK": "infinity", "LimitSTACKSoft": "8388608", "LoadState": "loaded", "LockPersonality": "no", "LogLevelMax": "-1", "LogRateLimitBurst": "0", "LogRateLimitIntervalUSec": "0", "LogsDirectoryMode": "0755", "MainPID": "13591", "ManagedOOMMemoryPressure": "auto", "ManagedOOMMemoryPressureLimit": "0", "ManagedOOMPreference": "none", "ManagedOOMSwap": "auto", "MemoryAccounting": "yes", "MemoryAvailable": "infinity", "MemoryCurrent": "168050688", "MemoryDenyWriteExecute": "no", "MemoryHigh": "infinity", "MemoryLimit": "infinity", "MemoryLow": "0", "MemoryMax": "infinity", "MemoryMin": "0", "MemorySwapMax": "infinity", "MountAPIVFS": "no", "NFileDescriptorStore": "0", "NRestarts": "0", "NUMAPolicy": "n/a", "Names": "docker.service", "NeedDaemonReload": "no", "Nice": "0", "NoNewPrivileges": "no", "NonBlocking": "no", "NotifyAccess": "main", "OOMPolicy": "continue", "OOMScoreAdjust": "-500", "OnFailureJobMode": "replace", "OnSuccessJobMode": "fail", "Perpetual": "no", "PrivateDevices": "no", "PrivateIPC": "no", "PrivateMounts": "no", "PrivateNetwork": "no", "PrivateTmp": "no", "PrivateUsers": "no", "ProcSubset": "all", "ProtectClock": "no", "ProtectControlGroups": "no", "ProtectHome": "no", "ProtectHostname": "no", "ProtectKernelLogs": "no", "ProtectKernelModules": "no", "ProtectKernelTunables": "no", "ProtectProc": "default", "ProtectSystem": "no", "RefuseManualStart": "no", "RefuseManualStop": "no", "ReloadResult": "success", "RemainAfterExit": "no", "RemoveIPC": "no", "Requires": "docker.socket system.slice sysinit.target", "Restart": "always", "RestartKillSignal": "15", "RestartUSec": "2s", "RestrictNamespaces": "no", "RestrictRealtime": "no", "RestrictSUIDSGID": "no", "Result": "success", "RootDirectoryStartOnly": "no", "RuntimeDirectoryMode": "0755", "RuntimeDirectoryPreserve": "no", "RuntimeMaxUSec": "infinity", "SameProcessGroup": "no", "SecureBits": "0", "SendSIGHUP": "no", "SendSIGKILL": "yes", "Slice": "system.slice", "StandardError": "inherit", "StandardInput": "null", "StandardOutput": "journal", "StartLimitAction": "none", "StartLimitBurst": "3", "StartLimitIntervalUSec": "1min", "StartupBlockIOWeight": "[not set]", "StartupCPUShares": "[not set]", "StartupCPUWeight": "[not set]", "StartupIOWeight": "[not set]", "StateChangeTimestamp": "Sun 2023-03-26 02:17:04 UTC", "StateChangeTimestampMonotonic": "2432800035853", "StateDirectoryMode": "0755", "StatusErrno": "0", "StopWhenUnneeded": "no", "SubState": "running", "SuccessAction": "none", "SyslogFacility": "3", "SyslogLevel": "6", "SyslogLevelPrefix": "yes", "SyslogPriority": "30", "SystemCallErrorNumber": "2147483646", "TTYReset": "no", "TTYVHangup": "no", "TTYVTDisallocate": "no", "TasksAccounting": "yes", "TasksCurrent": "36", "TasksMax": "infinity", "TimeoutAbortUSec": "1min 30s", "TimeoutCleanUSec": "infinity", "TimeoutStartFailureMode": "terminate", "TimeoutStartUSec": "infinity", "TimeoutStopFailureMode": "terminate", "TimeoutStopUSec": "1min 30s", "TimerSlackNSec": "50000", "Transient": "no", "TriggeredBy": "docker.socket", "Type": "notify", "UID": "[not set]", "UMask": "0022", "UnitFilePreset": "enabled", "UnitFileState": "enabled", "UtmpMode": "init", "WantedBy": "multi-user.target", "Wants": "network-online.target containerd.service", "WatchdogSignal": "6", "WatchdogTimestamp": "n/a", "WatchdogTimestampMonotonic": "0", "WatchdogUSec": "0"}}
2023-03-26 11:49:02,627 p=60301 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-26 11:49:03,660 p=60301 u=craig n=ansible | ok: [caddy] => {"append": true, "changed": false, "comment": "", "group": 1000, "groups": "docker", "home": "/home/stantonius", "move_home": false, "name": "stantonius", "shell": "/bin/bash", "state": "present", "uid": 1000}
2023-03-26 11:49:03,670 p=60301 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-26 11:49:05,037 p=60301 u=craig n=ansible | ok: [caddy] => {"cache_update_time": 1679837102, "cache_updated": false, "changed": false}
2023-03-26 11:49:05,047 p=60301 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-26 11:49:07,361 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["/usr/bin/python3", "-m", "pip.__main__", "install", "docker", "requests", "docker-compose"], "name": ["docker", "requests", "docker-compose"], "requirements": null, "state": "present", "stderr": "WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv\n", "stderr_lines": ["WARNING: Running pip as the 'root' user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv"], "stdout": "Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)\nRequirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)\nRequirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)\nRequirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)\nRequirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)\nRequirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)\nRequirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)\nRequirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)\nRequirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)\nRequirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)\nRequirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)\nRequirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)\nRequirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)\nRequirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)\nRequirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)\nRequirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)\nRequirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)\nRequirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)\nRequirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)\nRequirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)\nRequirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)\nRequirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)\nRequirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)\nRequirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)\nRequirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)\nRequirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)\n", "stdout_lines": ["Requirement already satisfied: docker in /usr/local/lib/python3.10/dist-packages (6.0.1)", "Requirement already satisfied: requests in /usr/local/lib/python3.10/dist-packages (2.28.2)", "Requirement already satisfied: docker-compose in /usr/local/lib/python3.10/dist-packages (1.29.2)", "Requirement already satisfied: websocket-client>=0.32.0 in /usr/local/lib/python3.10/dist-packages (from docker) (0.59.0)", "Requirement already satisfied: packaging>=14.0 in /usr/local/lib/python3.10/dist-packages (from docker) (23.0)", "Requirement already satisfied: urllib3>=1.26.0 in /usr/local/lib/python3.10/dist-packages (from docker) (1.26.15)", "Requirement already satisfied: idna<4,>=2.5 in /usr/local/lib/python3.10/dist-packages (from requests) (3.4)", "Requirement already satisfied: certifi>=2017.4.17 in /usr/local/lib/python3.10/dist-packages (from requests) (2022.12.7)", "Requirement already satisfied: charset-normalizer<4,>=2 in /usr/local/lib/python3.10/dist-packages (from requests) (3.1.0)", "Requirement already satisfied: docopt<1,>=0.6.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.6.2)", "Requirement already satisfied: dockerpty<1,>=0.4.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.4.1)", "Requirement already satisfied: jsonschema<4,>=2.5.1 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (3.2.0)", "Requirement already satisfied: texttable<2,>=0.9.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (1.6.7)", "Requirement already satisfied: distro<2,>=1.5.0 in /usr/lib/python3/dist-packages (from docker-compose) (1.7.0)", "Requirement already satisfied: PyYAML<6,>=3.10 in /usr/lib/python3/dist-packages (from docker-compose) (5.4.1)", "Requirement already satisfied: python-dotenv<1,>=0.13.0 in /usr/local/lib/python3.10/dist-packages (from docker-compose) (0.21.1)", "Requirement already satisfied: paramiko>=2.4.3 in /usr/local/lib/python3.10/dist-packages (from docker) (3.1.0)", "Requirement already satisfied: six>=1.3.0 in /usr/lib/python3/dist-packages (from dockerpty<1,>=0.4.1->docker-compose) (1.16.0)", "Requirement already satisfied: attrs>=17.4.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (22.2.0)", "Requirement already satisfied: pyrsistent>=0.14.0 in /usr/local/lib/python3.10/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (0.19.3)", "Requirement already satisfied: setuptools in /usr/lib/python3/dist-packages (from jsonschema<4,>=2.5.1->docker-compose) (59.6.0)", "Requirement already satisfied: bcrypt>=3.2 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (4.0.1)", "Requirement already satisfied: cryptography>=3.3 in /usr/lib/python3/dist-packages (from paramiko>=2.4.3->docker) (3.4.8)", "Requirement already satisfied: pynacl>=1.5 in /usr/local/lib/python3.10/dist-packages (from paramiko>=2.4.3->docker) (1.5.0)", "Requirement already satisfied: cffi>=1.4.1 in /usr/local/lib/python3.10/dist-packages (from pynacl>=1.5->paramiko>=2.4.3->docker) (1.15.1)", "Requirement already satisfied: pycparser in /usr/local/lib/python3.10/dist-packages (from cffi>=1.4.1->pynacl>=1.5->paramiko>=2.4.3->docker) (2.21)"], "version": null, "virtualenv": null}
2023-03-26 11:49:07,375 p=60301 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-26 11:49:08,344 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 11:49:08,356 p=60301 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-26 11:49:10,429 p=60301 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "1395e26ae63d30bafa741c2cad03d0f01b01888b", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "30fb1afa201baa94a2199b3a926c9e4e", "mode": "0644", "owner": "root", "size": 120, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679845748.441556-60496-235038296010312/source", "state": "file", "uid": 0}
2023-03-26 11:49:10,440 p=60301 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-26 11:49:11,906 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 11:49:11,917 p=60301 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-26 11:49:13,400 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 11:49:13,412 p=60301 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-26 11:49:16,514 p=60301 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 11:49:16,533 p=60301 u=craig n=ansible | TASK [docker_swarm_node : Check if Docker Swarm is already initialized _raw_params=docker info -f "{{ '{{.Swarm.LocalNodeState}}' }}"] *********************************************************************
2023-03-26 11:49:18,231 p=60301 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["docker", "info", "-f", "{{.Swarm.LocalNodeState}}"], "delta": "0:00:00.700462", "end": "2023-03-26 15:49:18.034547", "msg": "", "rc": 0, "start": "2023-03-26 15:49:17.334085", "stderr": "", "stderr_lines": [], "stdout": "active", "stdout_lines": ["active"]}
2023-03-26 11:49:18,242 p=60301 u=craig n=ansible | TASK [docker_swarm_node : Initialize Docker Swarm _raw_params=docker swarm init] ***************************************************************************************************************************
2023-03-26 11:49:18,257 p=60301 u=craig n=ansible | skipping: [caddy] => {"changed": false, "skip_reason": "Conditional result was False"}
2023-03-26 11:49:18,265 p=60301 u=craig n=ansible | TASK [docker_swarm_node : Join Docker Swarm as a worker _raw_params=docker swarm join --token "{{ hostvars[groups['lxc']['swarm-master']].swarm_init_result.stdout_lines[-2].split(' ')[-1] }}" "{{ hostvars[groups['lxc']['swarm-master']].ansible_host }}:2377"] ***
2023-03-26 11:49:18,278 p=60301 u=craig n=ansible | fatal: [caddy]: FAILED! => {"msg": "The task includes an option with an undefined variable. The error was: 'list object' has no attribute 'swarm-master'\n\nThe error appears to be in '/Users/craig/Projects/homelab/ansible/roles/docker_swarm_node/tasks/main.yaml': line 13, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Join Docker Swarm as a worker\n  ^ here\n"}
2023-03-26 11:49:18,279 p=60301 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-26 11:49:18,279 p=60301 u=craig n=ansible | caddy                      : ok=19   changed=2    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-26 20:31:55,741 p=83124 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 20:31:56,044 p=83124 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 20:31:56,053 p=83124 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 20:31:57,519 p=83124 u=craig n=ansible | ok: [caddy]
2023-03-26 20:31:57,526 p=83124 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 20:31:57,536 p=83124 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 20:31:57,542 p=83124 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 20:31:57,563 p=83124 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 20:31:57,569 p=83124 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 20:31:57,580 p=83124 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 20:31:57,591 p=83124 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 20:31:58,196 p=83124 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 20:31:58,205 p=83124 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 20:31:58,575 p=83124 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 20:31:58,582 p=83124 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 20:31:59,330 p=83124 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "dc5c7e7e588e8cda2c6cc3f0eee1d1150e1c2623", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "c70a8880f6a3c12b73acc33af7067a16", "mode": "0644", "owner": "root", "size": 56, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679877118.608-83168-210984145075035/source", "state": "file", "uid": 0}
2023-03-26 20:31:59,337 p=83124 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 20:31:59,848 p=83124 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 20:31:59,859 p=83124 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 20:32:00,378 p=83124 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 20:32:00,387 p=83124 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 20:32:03,050 p=83124 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 20:32:03,071 p=83124 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 20:32:03,071 p=83124 u=craig n=ansible | caddy                      : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 20:38:41,732 p=83755 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 20:38:41,882 p=83755 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 20:38:41,890 p=83755 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 20:38:43,338 p=83755 u=craig n=ansible | ok: [caddy]
2023-03-26 20:38:43,344 p=83755 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 20:38:43,354 p=83755 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 20:38:43,361 p=83755 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 20:38:43,381 p=83755 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 20:38:43,387 p=83755 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 20:38:43,397 p=83755 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 20:38:43,409 p=83755 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 20:38:43,918 p=83755 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 20:38:43,927 p=83755 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 20:38:44,285 p=83755 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 20:38:44,293 p=83755 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 20:38:45,023 p=83755 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "57a7c2de5d981aff241776a2b3a66694615f4d73", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "f02cfb3b08a3b8a0c9ac21febd0fd385", "mode": "0644", "owner": "root", "size": 80, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679877524.318804-83798-238947400724017/source", "state": "file", "uid": 0}
2023-03-26 20:38:45,030 p=83755 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 20:38:45,515 p=83755 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 20:38:45,522 p=83755 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 20:38:46,019 p=83755 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 20:38:46,027 p=83755 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 20:38:48,313 p=83755 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 20:38:48,332 p=83755 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 20:38:48,332 p=83755 u=craig n=ansible | caddy                      : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 20:40:54,044 p=84039 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 20:40:54,184 p=84039 u=craig n=ansible | ERROR! couldn't resolve module/action 'ansible.builtin.docker_exec'. This often indicates a misspelling, missing collection, or incorrect module path.

The error appears to be in '/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/main.yaml': line 39, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Reload Caddy configuration
  ^ here

2023-03-26 20:44:26,842 p=84323 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 20:44:26,991 p=84323 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 20:44:26,999 p=84323 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 20:44:28,427 p=84323 u=craig n=ansible | ok: [caddy]
2023-03-26 20:44:28,433 p=84323 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 20:44:28,444 p=84323 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 20:44:28,451 p=84323 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 20:44:28,470 p=84323 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 20:44:28,476 p=84323 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 20:44:28,487 p=84323 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 20:44:28,499 p=84323 u=craig n=ansible | TASK [caddy_docker : Check Caddy service status _raw_params=systemctl is-active caddy] ************************
2023-03-26 20:44:28,850 p=84323 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["systemctl", "is-active", "caddy"], "delta": "0:00:00.003810", "end": "2023-03-27 00:44:28.834366", "failed_when_result": false, "msg": "non-zero return code", "rc": 3, "start": "2023-03-27 00:44:28.830556", "stderr": "", "stderr_lines": [], "stdout": "inactive", "stdout_lines": ["inactive"]}
2023-03-26 20:44:28,857 p=84323 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 20:44:29,218 p=84323 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 20:44:29,226 p=84323 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 20:44:29,815 p=84323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "57a7c2de5d981aff241776a2b3a66694615f4d73", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 80, "state": "file", "uid": 0}
2023-03-26 20:44:29,824 p=84323 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 20:44:30,348 p=84323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 20:44:30,358 p=84323 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 20:44:30,880 p=84323 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 20:44:30,890 p=84323 u=craig n=ansible | TASK [caddy_docker : Reload Caddy service name=caddy, state=reloaded] *****************************************
2023-03-26 20:44:30,901 p=84323 u=craig n=ansible | skipping: [caddy] => {"changed": false, "skip_reason": "Conditional result was False"}
2023-03-26 20:44:30,909 p=84323 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ******
2023-03-26 20:44:33,211 p=84323 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 20:44:33,231 p=84323 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 20:44:33,231 p=84323 u=craig n=ansible | caddy                      : ok=10   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-26 20:44:53,857 p=84479 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 20:44:54,005 p=84479 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 20:44:54,013 p=84479 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 20:44:55,109 p=84479 u=craig n=ansible | ok: [caddy]
2023-03-26 20:44:55,116 p=84479 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 20:44:55,127 p=84479 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 20:44:55,133 p=84479 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 20:44:55,153 p=84479 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 20:44:55,159 p=84479 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 20:44:55,170 p=84479 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 20:44:55,195 p=84479 u=craig n=ansible | TASK [caddy_docker : Check Caddy service status _raw_params=systemctl is-active caddy] ************************
2023-03-26 20:44:55,543 p=84479 u=craig n=ansible | ok: [caddy] => {"changed": false, "cmd": ["systemctl", "is-active", "caddy"], "delta": "0:00:00.004116", "end": "2023-03-27 00:44:55.528975", "failed_when_result": false, "msg": "non-zero return code", "rc": 3, "start": "2023-03-27 00:44:55.524859", "stderr": "", "stderr_lines": [], "stdout": "inactive", "stdout_lines": ["inactive"]}
2023-03-26 20:44:55,549 p=84479 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 20:44:55,903 p=84479 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 20:44:55,911 p=84479 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 20:44:56,485 p=84479 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "57a7c2de5d981aff241776a2b3a66694615f4d73", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 80, "state": "file", "uid": 0}
2023-03-26 20:44:56,494 p=84479 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 20:44:57,029 p=84479 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 20:44:57,039 p=84479 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 20:44:57,560 p=84479 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 20:44:57,569 p=84479 u=craig n=ansible | TASK [caddy_docker : Reload Caddy service name=caddy, state=reloaded] *****************************************
2023-03-26 20:44:57,582 p=84479 u=craig n=ansible | skipping: [caddy] => {"changed": false, "skip_reason": "Conditional result was False"}
2023-03-26 20:44:57,589 p=84479 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ******
2023-03-26 20:44:59,727 p=84479 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 20:44:59,745 p=84479 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 20:44:59,746 p=84479 u=craig n=ansible | caddy                      : ok=10   changed=1    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-26 21:10:24,638 p=86319 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:10:24,811 p=86319 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 21:10:24,820 p=86319 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 21:10:26,254 p=86319 u=craig n=ansible | ok: [caddy]
2023-03-26 21:10:26,260 p=86319 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 21:10:26,270 p=86319 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 21:10:26,277 p=86319 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 21:10:26,298 p=86319 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 21:10:26,304 p=86319 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 21:10:26,315 p=86319 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 21:10:26,326 p=86319 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 21:10:26,869 p=86319 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 21:10:26,877 p=86319 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 21:10:27,233 p=86319 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 21:10:27,241 p=86319 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 21:10:27,813 p=86319 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "57a7c2de5d981aff241776a2b3a66694615f4d73", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 80, "state": "file", "uid": 0}
2023-03-26 21:10:27,821 p=86319 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 21:10:28,336 p=86319 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 21:10:28,346 p=86319 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 21:10:28,887 p=86319 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 21:10:28,896 p=86319 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 21:10:31,117 p=86319 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 21:10:31,136 p=86319 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 21:10:31,136 p=86319 u=craig n=ansible | caddy                      : ok=10   changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 21:34:16,379 p=88010 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:34:16,569 p=88010 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 21:34:16,578 p=88010 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 21:34:18,057 p=88010 u=craig n=ansible | ok: [caddy]
2023-03-26 21:34:18,065 p=88010 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 21:34:18,076 p=88010 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 21:34:18,083 p=88010 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 21:34:18,104 p=88010 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 21:34:18,110 p=88010 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 21:34:18,121 p=88010 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 21:34:18,146 p=88010 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 21:34:18,669 p=88010 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 21:34:18,678 p=88010 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 21:34:19,048 p=88010 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 21:34:19,056 p=88010 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 21:34:19,802 p=88010 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "5efd48c92c16c9292feda050277d7b2b62aec87a", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "b834975325db383b1e5d259863ae83b9", "mode": "0644", "owner": "root", "size": 55, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679880859.082603-88053-20764241860258/source", "state": "file", "uid": 0}
2023-03-26 21:34:19,808 p=88010 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 21:34:20,312 p=88010 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 21:34:20,322 p=88010 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 21:34:20,833 p=88010 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 21:34:20,842 p=88010 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 21:34:23,173 p=88010 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 21:34:23,194 p=88010 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 21:34:23,194 p=88010 u=craig n=ansible | caddy                      : ok=10   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 21:37:18,800 p=88358 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:37:18,963 p=88358 u=craig n=ansible | ERROR! couldn't resolve module/action 'ansible.builtin.docker_exec'. This often indicates a misspelling, missing collection, or incorrect module path.

The error appears to be in '/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/main.yaml': line 39, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: Reload Caddy configuration
  ^ here

2023-03-26 21:38:25,934 p=88472 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:38:26,130 p=88472 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 21:38:26,140 p=88472 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 21:38:27,604 p=88472 u=craig n=ansible | ok: [caddy]
2023-03-26 21:38:27,611 p=88472 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 21:38:27,621 p=88472 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 21:38:27,628 p=88472 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 21:38:27,649 p=88472 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 21:38:27,655 p=88472 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 21:38:27,666 p=88472 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 21:38:27,693 p=88472 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 21:38:28,208 p=88472 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 21:38:28,217 p=88472 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 21:38:28,587 p=88472 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 21:38:28,594 p=88472 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 21:38:29,164 p=88472 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "5efd48c92c16c9292feda050277d7b2b62aec87a", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 55, "state": "file", "uid": 0}
2023-03-26 21:38:29,172 p=88472 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 21:38:29,689 p=88472 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 21:38:29,699 p=88472 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 21:38:30,222 p=88472 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 21:38:30,231 p=88472 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 21:38:32,574 p=88472 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 21:38:32,583 p=88472 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, workdir=/etc/caddy] ****
2023-03-26 21:38:33,117 p=88472 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Unsupported parameters for (community.docker.docker_container_exec) module: workdir. Supported parameters include: tls_hostname, command, docker_host (docker_url), tty, tls, stdin, api_version (docker_api_version), client_cert (cert_path, tls_client_cert), stdin_add_newline, user, timeout, use_ssh_client, debug, validate_certs (tls_verify), detach, ca_cert (cacert_path, tls_ca_cert), container, chdir, argv, ssl_version, client_key (key_path, tls_client_key), strip_empty_ends, env."}
2023-03-26 21:38:33,118 p=88472 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 21:38:33,118 p=88472 u=craig n=ansible | caddy                      : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 21:39:05,453 p=88635 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:39:05,621 p=88635 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 21:39:05,629 p=88635 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 21:39:06,734 p=88635 u=craig n=ansible | ok: [caddy]
2023-03-26 21:39:06,743 p=88635 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 21:39:06,754 p=88635 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 21:39:06,761 p=88635 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 21:39:06,781 p=88635 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 21:39:06,787 p=88635 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 21:39:06,798 p=88635 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 21:39:06,824 p=88635 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 21:39:07,429 p=88635 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 21:39:07,438 p=88635 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 21:39:07,797 p=88635 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 21:39:07,805 p=88635 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 21:39:08,405 p=88635 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "5efd48c92c16c9292feda050277d7b2b62aec87a", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 55, "state": "file", "uid": 0}
2023-03-26 21:39:08,414 p=88635 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 21:39:08,950 p=88635 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 21:39:08,960 p=88635 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 21:39:09,475 p=88635 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "2415e8bf441442b281af4abee7092b5296eac25d", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 293, "state": "file", "uid": 0}
2023-03-26 21:39:09,484 p=88635 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 21:39:11,761 p=88635 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy_caddy_1": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "f2aec47042d136d10df205a8290da9a1e1cac338d24031fb51c4360a154ceaa7", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "503fdf99db18"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 21:39:11,770 p=88635 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ******
2023-03-26 21:39:12,359 p=88635 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Could not find container \"caddy\""}
2023-03-26 21:39:12,360 p=88635 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 21:39:12,360 p=88635 u=craig n=ansible | caddy                      : ok=10   changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 21:45:34,164 p=89200 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 21:45:34,336 p=89200 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 21:45:34,344 p=89200 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 21:45:35,854 p=89200 u=craig n=ansible | ok: [caddy]
2023-03-26 21:45:35,861 p=89200 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 21:45:35,871 p=89200 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 21:45:35,878 p=89200 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 21:45:35,899 p=89200 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 21:45:35,905 p=89200 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 21:45:35,917 p=89200 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 21:45:35,942 p=89200 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 21:45:36,573 p=89200 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": null, "exists": false}
2023-03-26 21:45:36,582 p=89200 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 21:45:36,955 p=89200 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 21:45:36,964 p=89200 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 21:45:37,557 p=89200 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "5efd48c92c16c9292feda050277d7b2b62aec87a", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 55, "state": "file", "uid": 0}
2023-03-26 21:45:37,565 p=89200 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 21:45:38,087 p=89200 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 21:45:38,097 p=89200 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 21:45:38,798 p=89200 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "566db96a84acf3052a5e73f74402cd613def6bc5", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "md5sum": "058627ac487ceb02d022989a426948fc", "mode": "0644", "owner": "root", "size": 319, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679881538.1252532-89266-223235338491420/source", "state": "file", "uid": 0}
2023-03-26 21:45:38,804 p=89200 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 21:45:42,002 p=89200 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "b0333da8c0b8"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 21:45:42,012 p=89200 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ******
2023-03-26 21:45:42,696 p=89200 u=craig n=ansible | changed: [caddy] => {"changed": true, "rc": 0, "stderr": "{\"level\":\"info\",\"ts\":1679881542.6482234,\"msg\":\"using adjacent Caddyfile\"}", "stderr_lines": ["{\"level\":\"info\",\"ts\":1679881542.6482234,\"msg\":\"using adjacent Caddyfile\"}"], "stdout": "", "stdout_lines": []}
2023-03-26 21:45:42,716 p=89200 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 21:45:42,716 p=89200 u=craig n=ansible | caddy                      : ok=11   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 22:02:30,729 p=90637 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 22:02:30,918 p=90637 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 22:02:30,927 p=90637 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 22:02:32,383 p=90637 u=craig n=ansible | ok: [caddy]
2023-03-26 22:02:32,389 p=90637 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 22:02:32,400 p=90637 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 22:02:32,407 p=90637 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 22:02:32,428 p=90637 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 22:02:32,434 p=90637 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 22:02:32,446 p=90637 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 22:02:32,457 p=90637 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 22:02:32,947 p=90637 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": {"AppArmorProfile": "docker-default", "Args": ["run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Config": {"AttachStderr": false, "AttachStdin": false, "AttachStdout": false, "Cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Domainname": "", "Entrypoint": null, "Env": ["CADDY_DNS_API_KEY=QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "CADDY_VERSION=v2.6.4", "XDG_CONFIG_HOME=/config", "XDG_DATA_HOME=/data"], "ExposedPorts": {"2019/tcp": {}, "443/tcp": {}, "443/udp": {}, "80/tcp": {}}, "Hostname": "b0333da8c0b8", "Image": "caddy", "Labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "OnBuild": null, "OpenStdin": false, "StdinOnce": false, "Tty": false, "User": "", "Volumes": {"/config": {}, "/data": {}}, "WorkingDir": "/srv"}, "Created": "2023-03-27T01:45:41.198375022Z", "Driver": "overlay2", "ExecIDs": null, "GraphDriver": {"Data": {"LowerDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6-init/diff:/var/lib/docker/overlay2/a82620ad56cac80997e9fd45034f1ae82a8ab4bc12e280aa4041448f9300398d/diff:/var/lib/docker/overlay2/e8a5c0b4fadc4c292e11d5efa64fb7dc45bb6e31e5eb54725eccb01952822d2e/diff:/var/lib/docker/overlay2/0c7522c45447fc80d43791b1fd70ffc2e0c8c2f7c78274e15af23b5f28e76feb/diff:/var/lib/docker/overlay2/887a28d027cffe9aaab9aaf7d10121ae2448e915fa29448432866b5f18250ab4/diff:/var/lib/docker/overlay2/b53b37a6a143b00290caeccb5a0855c65aa59011a9de4c773e1a5d947e2d6396/diff", "MergedDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/merged", "UpperDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/diff", "WorkDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/work"}, "Name": "overlay2"}, "HostConfig": {"AutoRemove": false, "Binds": ["caddy_caddy_data:/data:rw", "caddy_caddy_config:/config:rw"], "BlkioDeviceReadBps": null, "BlkioDeviceReadIOps": null, "BlkioDeviceWriteBps": null, "BlkioDeviceWriteIOps": null, "BlkioWeight": 0, "BlkioWeightDevice": null, "CapAdd": null, "CapDrop": null, "Cgroup": "", "CgroupParent": "", "CgroupnsMode": "private", "ConsoleSize": [0, 0], "ContainerIDFile": "", "CpuCount": 0, "CpuPercent": 0, "CpuPeriod": 0, "CpuQuota": 0, "CpuRealtimePeriod": 0, "CpuRealtimeRuntime": 0, "CpuShares": 0, "CpusetCpus": "", "CpusetMems": "", "DeviceCgroupRules": null, "DeviceRequests": null, "Devices": null, "Dns": null, "DnsOptions": null, "DnsSearch": null, "ExtraHosts": null, "GroupAdd": null, "IOMaximumBandwidth": 0, "IOMaximumIOps": 0, "IpcMode": "private", "Isolation": "", "Links": null, "LogConfig": {"Config": {}, "Type": "json-file"}, "MaskedPaths": ["/proc/asound", "/proc/acpi", "/proc/kcore", "/proc/keys", "/proc/latency_stats", "/proc/timer_list", "/proc/timer_stats", "/proc/sched_debug", "/proc/scsi", "/sys/firmware"], "Memory": 0, "MemoryReservation": 0, "MemorySwap": 0, "MemorySwappiness": null, "NanoCpus": 0, "NetworkMode": "caddy_default", "OomKillDisable": null, "OomScoreAdj": 0, "PidMode": "", "PidsLimit": null, "PortBindings": {"443/tcp": [{"HostIp": "", "HostPort": "443"}], "80/tcp": [{"HostIp": "", "HostPort": "80"}]}, "Privileged": false, "PublishAllPorts": false, "ReadonlyPaths": ["/proc/bus", "/proc/fs", "/proc/irq", "/proc/sys", "/proc/sysrq-trigger"], "ReadonlyRootfs": false, "RestartPolicy": {"MaximumRetryCount": 0, "Name": ""}, "Runtime": "runc", "SecurityOpt": null, "ShmSize": 67108864, "UTSMode": "", "Ulimits": null, "UsernsMode": "", "VolumeDriver": "", "VolumesFrom": []}, "HostnamePath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hostname", "HostsPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hosts", "Id": "b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39", "Image": "sha256:a994e8295eb8d3397814558efd1d6d4efd6df0e3ebccb020584fe4febfe9de3e", "LogPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39-json.log", "MountLabel": "", "Mounts": [{"Destination": "/data", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_data", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_data/_data", "Type": "volume"}, {"Destination": "/config", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_config", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_config/_data", "Type": "volume"}], "Name": "/caddy", "NetworkSettings": {"Bridge": "", "EndpointID": "", "Gateway": "", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "HairpinMode": false, "IPAddress": "", "IPPrefixLen": 0, "IPv6Gateway": "", "LinkLocalIPv6Address": "", "LinkLocalIPv6PrefixLen": 0, "MacAddress": "", "Networks": {"caddy_default": {"Aliases": ["caddy", "b0333da8c0b8"], "DriverOpts": null, "EndpointID": "a69fdfdef331db01ce90e01b84e257dbd1c97b2cad884b60bb2f6b499b72f950", "Gateway": "172.19.0.1", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "IPAMConfig": null, "IPAddress": "172.19.0.2", "IPPrefixLen": 16, "IPv6Gateway": "", "Links": null, "MacAddress": "02:42:ac:13:00:02", "NetworkID": "3010e077b1bda059908b4f385356ab4513c293df9a8b0f33edf388f5ae22c82d"}}, "Ports": {"2019/tcp": null, "443/tcp": [{"HostIp": "0.0.0.0", "HostPort": "443"}, {"HostIp": "::", "HostPort": "443"}], "443/udp": null, "80/tcp": [{"HostIp": "0.0.0.0", "HostPort": "80"}, {"HostIp": "::", "HostPort": "80"}]}, "SandboxID": "817adeaeb9071897f0063d4c1df580df6d6e58ef39ae673eb5243269a6dd7dd8", "SandboxKey": "/var/run/docker/netns/817adeaeb907", "SecondaryIPAddresses": null, "SecondaryIPv6Addresses": null}, "Path": "caddy", "Platform": "linux", "ProcessLabel": "", "ResolvConfPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/resolv.conf", "RestartCount": 0, "State": {"Dead": false, "Error": "", "ExitCode": 0, "FinishedAt": "0001-01-01T00:00:00Z", "OOMKilled": false, "Paused": false, "Pid": 72355, "Restarting": false, "Running": true, "StartedAt": "2023-03-27T01:45:41.939447226Z", "Status": "running"}}, "exists": true}
2023-03-26 22:02:32,955 p=90637 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 22:02:33,305 p=90637 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 22:02:33,312 p=90637 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 22:02:34,062 p=90637 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "8abc2e3f774e29606f21f0c04185d65b58ad3bcf", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "afc39d00bde7eec24698b374f2008ebd", "mode": "0644", "owner": "root", "size": 84, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679882553.338469-90678-38903887922585/source", "state": "file", "uid": 0}
2023-03-26 22:02:34,069 p=90637 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 22:02:34,584 p=90637 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 22:02:34,594 p=90637 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 22:02:35,100 p=90637 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "566db96a84acf3052a5e73f74402cd613def6bc5", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 319, "state": "file", "uid": 0}
2023-03-26 22:02:35,109 p=90637 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state={{ 'started' if caddy_container.exists and caddy_container.container.State.Running else 'present' }}, build=True, pull=True] ***
2023-03-26 22:02:35,700 p=90637 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "value of state must be one of: absent, present, got: started"}
2023-03-26 22:02:35,701 p=90637 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 22:02:35,702 p=90637 u=craig n=ansible | caddy                      : ok=9    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-26 22:03:56,553 p=90853 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 22:03:56,728 p=90853 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 22:03:56,737 p=90853 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 22:03:58,120 p=90853 u=craig n=ansible | ok: [caddy]
2023-03-26 22:03:58,127 p=90853 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 22:03:58,138 p=90853 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 22:03:58,144 p=90853 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 22:03:58,166 p=90853 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 22:03:58,172 p=90853 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 22:03:58,184 p=90853 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 22:03:58,195 p=90853 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 22:03:58,723 p=90853 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": {"AppArmorProfile": "docker-default", "Args": ["run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Config": {"AttachStderr": false, "AttachStdin": false, "AttachStdout": false, "Cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Domainname": "", "Entrypoint": null, "Env": ["CADDY_DNS_API_KEY=QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "CADDY_VERSION=v2.6.4", "XDG_CONFIG_HOME=/config", "XDG_DATA_HOME=/data"], "ExposedPorts": {"2019/tcp": {}, "443/tcp": {}, "443/udp": {}, "80/tcp": {}}, "Hostname": "b0333da8c0b8", "Image": "caddy", "Labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "OnBuild": null, "OpenStdin": false, "StdinOnce": false, "Tty": false, "User": "", "Volumes": {"/config": {}, "/data": {}}, "WorkingDir": "/srv"}, "Created": "2023-03-27T01:45:41.198375022Z", "Driver": "overlay2", "ExecIDs": null, "GraphDriver": {"Data": {"LowerDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6-init/diff:/var/lib/docker/overlay2/a82620ad56cac80997e9fd45034f1ae82a8ab4bc12e280aa4041448f9300398d/diff:/var/lib/docker/overlay2/e8a5c0b4fadc4c292e11d5efa64fb7dc45bb6e31e5eb54725eccb01952822d2e/diff:/var/lib/docker/overlay2/0c7522c45447fc80d43791b1fd70ffc2e0c8c2f7c78274e15af23b5f28e76feb/diff:/var/lib/docker/overlay2/887a28d027cffe9aaab9aaf7d10121ae2448e915fa29448432866b5f18250ab4/diff:/var/lib/docker/overlay2/b53b37a6a143b00290caeccb5a0855c65aa59011a9de4c773e1a5d947e2d6396/diff", "MergedDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/merged", "UpperDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/diff", "WorkDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/work"}, "Name": "overlay2"}, "HostConfig": {"AutoRemove": false, "Binds": ["caddy_caddy_data:/data:rw", "caddy_caddy_config:/config:rw"], "BlkioDeviceReadBps": null, "BlkioDeviceReadIOps": null, "BlkioDeviceWriteBps": null, "BlkioDeviceWriteIOps": null, "BlkioWeight": 0, "BlkioWeightDevice": null, "CapAdd": null, "CapDrop": null, "Cgroup": "", "CgroupParent": "", "CgroupnsMode": "private", "ConsoleSize": [0, 0], "ContainerIDFile": "", "CpuCount": 0, "CpuPercent": 0, "CpuPeriod": 0, "CpuQuota": 0, "CpuRealtimePeriod": 0, "CpuRealtimeRuntime": 0, "CpuShares": 0, "CpusetCpus": "", "CpusetMems": "", "DeviceCgroupRules": null, "DeviceRequests": null, "Devices": null, "Dns": null, "DnsOptions": null, "DnsSearch": null, "ExtraHosts": null, "GroupAdd": null, "IOMaximumBandwidth": 0, "IOMaximumIOps": 0, "IpcMode": "private", "Isolation": "", "Links": null, "LogConfig": {"Config": {}, "Type": "json-file"}, "MaskedPaths": ["/proc/asound", "/proc/acpi", "/proc/kcore", "/proc/keys", "/proc/latency_stats", "/proc/timer_list", "/proc/timer_stats", "/proc/sched_debug", "/proc/scsi", "/sys/firmware"], "Memory": 0, "MemoryReservation": 0, "MemorySwap": 0, "MemorySwappiness": null, "NanoCpus": 0, "NetworkMode": "caddy_default", "OomKillDisable": null, "OomScoreAdj": 0, "PidMode": "", "PidsLimit": null, "PortBindings": {"443/tcp": [{"HostIp": "", "HostPort": "443"}], "80/tcp": [{"HostIp": "", "HostPort": "80"}]}, "Privileged": false, "PublishAllPorts": false, "ReadonlyPaths": ["/proc/bus", "/proc/fs", "/proc/irq", "/proc/sys", "/proc/sysrq-trigger"], "ReadonlyRootfs": false, "RestartPolicy": {"MaximumRetryCount": 0, "Name": ""}, "Runtime": "runc", "SecurityOpt": null, "ShmSize": 67108864, "UTSMode": "", "Ulimits": null, "UsernsMode": "", "VolumeDriver": "", "VolumesFrom": []}, "HostnamePath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hostname", "HostsPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hosts", "Id": "b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39", "Image": "sha256:a994e8295eb8d3397814558efd1d6d4efd6df0e3ebccb020584fe4febfe9de3e", "LogPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39-json.log", "MountLabel": "", "Mounts": [{"Destination": "/data", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_data", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_data/_data", "Type": "volume"}, {"Destination": "/config", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_config", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_config/_data", "Type": "volume"}], "Name": "/caddy", "NetworkSettings": {"Bridge": "", "EndpointID": "", "Gateway": "", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "HairpinMode": false, "IPAddress": "", "IPPrefixLen": 0, "IPv6Gateway": "", "LinkLocalIPv6Address": "", "LinkLocalIPv6PrefixLen": 0, "MacAddress": "", "Networks": {"caddy_default": {"Aliases": ["caddy", "b0333da8c0b8"], "DriverOpts": null, "EndpointID": "a69fdfdef331db01ce90e01b84e257dbd1c97b2cad884b60bb2f6b499b72f950", "Gateway": "172.19.0.1", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "IPAMConfig": null, "IPAddress": "172.19.0.2", "IPPrefixLen": 16, "IPv6Gateway": "", "Links": null, "MacAddress": "02:42:ac:13:00:02", "NetworkID": "3010e077b1bda059908b4f385356ab4513c293df9a8b0f33edf388f5ae22c82d"}}, "Ports": {"2019/tcp": null, "443/tcp": [{"HostIp": "0.0.0.0", "HostPort": "443"}, {"HostIp": "::", "HostPort": "443"}], "443/udp": null, "80/tcp": [{"HostIp": "0.0.0.0", "HostPort": "80"}, {"HostIp": "::", "HostPort": "80"}]}, "SandboxID": "817adeaeb9071897f0063d4c1df580df6d6e58ef39ae673eb5243269a6dd7dd8", "SandboxKey": "/var/run/docker/netns/817adeaeb907", "SecondaryIPAddresses": null, "SecondaryIPv6Addresses": null}, "Path": "caddy", "Platform": "linux", "ProcessLabel": "", "ResolvConfPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/resolv.conf", "RestartCount": 0, "State": {"Dead": false, "Error": "", "ExitCode": 0, "FinishedAt": "0001-01-01T00:00:00Z", "OOMKilled": false, "Paused": false, "Pid": 72355, "Restarting": false, "Running": true, "StartedAt": "2023-03-27T01:45:41.939447226Z", "Status": "running"}}, "exists": true}
2023-03-26 22:03:58,732 p=90853 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 22:03:59,104 p=90853 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 22:03:59,112 p=90853 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 22:03:59,697 p=90853 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "8abc2e3f774e29606f21f0c04185d65b58ad3bcf", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Caddyfile", "size": 84, "state": "file", "uid": 0}
2023-03-26 22:03:59,706 p=90853 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 22:04:00,235 p=90853 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 22:04:00,244 p=90853 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 22:04:00,762 p=90853 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "566db96a84acf3052a5e73f74402cd613def6bc5", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 319, "state": "file", "uid": 0}
2023-03-26 22:04:00,771 p=90853 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ******
2023-03-26 22:04:03,113 p=90853 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "b0333da8c0b8"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 22:04:03,122 p=90853 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ******
2023-03-26 22:04:03,803 p=90853 u=craig n=ansible | changed: [caddy] => {"changed": true, "rc": 0, "stderr": "{\"level\":\"info\",\"ts\":1679882643.7776155,\"msg\":\"using adjacent Caddyfile\"}", "stderr_lines": ["{\"level\":\"info\",\"ts\":1679882643.7776155,\"msg\":\"using adjacent Caddyfile\"}"], "stdout": "", "stdout_lines": []}
2023-03-26 22:04:03,822 p=90853 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 22:04:03,822 p=90853 u=craig n=ansible | caddy                      : ok=11   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 22:11:48,529 p=91534 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 22:11:48,724 p=91534 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 22:11:48,734 p=91534 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 22:11:50,167 p=91534 u=craig n=ansible | ok: [caddy]
2023-03-26 22:11:50,173 p=91534 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 22:11:50,184 p=91534 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 22:11:50,190 p=91534 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 22:11:50,211 p=91534 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 22:11:50,217 p=91534 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 22:11:50,228 p=91534 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 22:11:50,239 p=91534 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 22:11:50,793 p=91534 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": {"AppArmorProfile": "docker-default", "Args": ["run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Config": {"AttachStderr": false, "AttachStdin": false, "AttachStdout": false, "Cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Domainname": "", "Entrypoint": null, "Env": ["CADDY_DNS_API_KEY=QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "CADDY_VERSION=v2.6.4", "XDG_CONFIG_HOME=/config", "XDG_DATA_HOME=/data"], "ExposedPorts": {"2019/tcp": {}, "443/tcp": {}, "443/udp": {}, "80/tcp": {}}, "Hostname": "b0333da8c0b8", "Image": "caddy", "Labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "OnBuild": null, "OpenStdin": false, "StdinOnce": false, "Tty": false, "User": "", "Volumes": {"/config": {}, "/data": {}}, "WorkingDir": "/srv"}, "Created": "2023-03-27T01:45:41.198375022Z", "Driver": "overlay2", "ExecIDs": null, "GraphDriver": {"Data": {"LowerDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6-init/diff:/var/lib/docker/overlay2/a82620ad56cac80997e9fd45034f1ae82a8ab4bc12e280aa4041448f9300398d/diff:/var/lib/docker/overlay2/e8a5c0b4fadc4c292e11d5efa64fb7dc45bb6e31e5eb54725eccb01952822d2e/diff:/var/lib/docker/overlay2/0c7522c45447fc80d43791b1fd70ffc2e0c8c2f7c78274e15af23b5f28e76feb/diff:/var/lib/docker/overlay2/887a28d027cffe9aaab9aaf7d10121ae2448e915fa29448432866b5f18250ab4/diff:/var/lib/docker/overlay2/b53b37a6a143b00290caeccb5a0855c65aa59011a9de4c773e1a5d947e2d6396/diff", "MergedDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/merged", "UpperDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/diff", "WorkDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/work"}, "Name": "overlay2"}, "HostConfig": {"AutoRemove": false, "Binds": ["caddy_caddy_data:/data:rw", "caddy_caddy_config:/config:rw"], "BlkioDeviceReadBps": null, "BlkioDeviceReadIOps": null, "BlkioDeviceWriteBps": null, "BlkioDeviceWriteIOps": null, "BlkioWeight": 0, "BlkioWeightDevice": null, "CapAdd": null, "CapDrop": null, "Cgroup": "", "CgroupParent": "", "CgroupnsMode": "private", "ConsoleSize": [0, 0], "ContainerIDFile": "", "CpuCount": 0, "CpuPercent": 0, "CpuPeriod": 0, "CpuQuota": 0, "CpuRealtimePeriod": 0, "CpuRealtimeRuntime": 0, "CpuShares": 0, "CpusetCpus": "", "CpusetMems": "", "DeviceCgroupRules": null, "DeviceRequests": null, "Devices": null, "Dns": null, "DnsOptions": null, "DnsSearch": null, "ExtraHosts": null, "GroupAdd": null, "IOMaximumBandwidth": 0, "IOMaximumIOps": 0, "IpcMode": "private", "Isolation": "", "Links": null, "LogConfig": {"Config": {}, "Type": "json-file"}, "MaskedPaths": ["/proc/asound", "/proc/acpi", "/proc/kcore", "/proc/keys", "/proc/latency_stats", "/proc/timer_list", "/proc/timer_stats", "/proc/sched_debug", "/proc/scsi", "/sys/firmware"], "Memory": 0, "MemoryReservation": 0, "MemorySwap": 0, "MemorySwappiness": null, "NanoCpus": 0, "NetworkMode": "caddy_default", "OomKillDisable": null, "OomScoreAdj": 0, "PidMode": "", "PidsLimit": null, "PortBindings": {"443/tcp": [{"HostIp": "", "HostPort": "443"}], "80/tcp": [{"HostIp": "", "HostPort": "80"}]}, "Privileged": false, "PublishAllPorts": false, "ReadonlyPaths": ["/proc/bus", "/proc/fs", "/proc/irq", "/proc/sys", "/proc/sysrq-trigger"], "ReadonlyRootfs": false, "RestartPolicy": {"MaximumRetryCount": 0, "Name": ""}, "Runtime": "runc", "SecurityOpt": null, "ShmSize": 67108864, "UTSMode": "", "Ulimits": null, "UsernsMode": "", "VolumeDriver": "", "VolumesFrom": []}, "HostnamePath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hostname", "HostsPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hosts", "Id": "b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39", "Image": "sha256:a994e8295eb8d3397814558efd1d6d4efd6df0e3ebccb020584fe4febfe9de3e", "LogPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39-json.log", "MountLabel": "", "Mounts": [{"Destination": "/data", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_data", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_data/_data", "Type": "volume"}, {"Destination": "/config", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_config", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_config/_data", "Type": "volume"}], "Name": "/caddy", "NetworkSettings": {"Bridge": "", "EndpointID": "", "Gateway": "", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "HairpinMode": false, "IPAddress": "", "IPPrefixLen": 0, "IPv6Gateway": "", "LinkLocalIPv6Address": "", "LinkLocalIPv6PrefixLen": 0, "MacAddress": "", "Networks": {"caddy_default": {"Aliases": ["caddy", "b0333da8c0b8"], "DriverOpts": null, "EndpointID": "a69fdfdef331db01ce90e01b84e257dbd1c97b2cad884b60bb2f6b499b72f950", "Gateway": "172.19.0.1", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "IPAMConfig": null, "IPAddress": "172.19.0.2", "IPPrefixLen": 16, "IPv6Gateway": "", "Links": null, "MacAddress": "02:42:ac:13:00:02", "NetworkID": "3010e077b1bda059908b4f385356ab4513c293df9a8b0f33edf388f5ae22c82d"}}, "Ports": {"2019/tcp": null, "443/tcp": [{"HostIp": "0.0.0.0", "HostPort": "443"}, {"HostIp": "::", "HostPort": "443"}], "443/udp": null, "80/tcp": [{"HostIp": "0.0.0.0", "HostPort": "80"}, {"HostIp": "::", "HostPort": "80"}]}, "SandboxID": "817adeaeb9071897f0063d4c1df580df6d6e58ef39ae673eb5243269a6dd7dd8", "SandboxKey": "/var/run/docker/netns/817adeaeb907", "SecondaryIPAddresses": null, "SecondaryIPv6Addresses": null}, "Path": "caddy", "Platform": "linux", "ProcessLabel": "", "ResolvConfPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/resolv.conf", "RestartCount": 0, "State": {"Dead": false, "Error": "", "ExitCode": 0, "FinishedAt": "0001-01-01T00:00:00Z", "OOMKilled": false, "Paused": false, "Pid": 72355, "Restarting": false, "Running": true, "StartedAt": "2023-03-27T01:45:41.939447226Z", "Status": "running"}}, "exists": true}
2023-03-26 22:11:50,801 p=91534 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 22:11:51,186 p=91534 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 22:11:51,195 p=91534 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 22:11:51,961 p=91534 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "5dc6b437babc62616bbff28f4f131e2079766c7d", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "2c38ffb00c3fe92bb81b9d371c1206a6", "mode": "0644", "owner": "root", "size": 269, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679883111.221332-91579-50975617252834/source", "state": "file", "uid": 0}
2023-03-26 22:11:51,968 p=91534 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 22:11:52,473 p=91534 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 22:11:52,482 p=91534 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 22:11:53,010 p=91534 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "566db96a84acf3052a5e73f74402cd613def6bc5", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 319, "state": "file", "uid": 0}
2023-03-26 22:11:53,019 p=91534 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ******
2023-03-26 22:11:55,307 p=91534 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "b0333da8c0b8"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 22:11:55,317 p=91534 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ******
2023-03-26 22:11:56,030 p=91534 u=craig n=ansible | changed: [caddy] => {"changed": true, "rc": 0, "stderr": "{\"level\":\"info\",\"ts\":1679883116.0039456,\"msg\":\"using adjacent Caddyfile\"}", "stderr_lines": ["{\"level\":\"info\",\"ts\":1679883116.0039456,\"msg\":\"using adjacent Caddyfile\"}"], "stdout": "", "stdout_lines": []}
2023-03-26 22:11:56,048 p=91534 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 22:11:56,048 p=91534 u=craig n=ansible | caddy                      : ok=11   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-26 22:14:03,157 p=91818 u=craig n=ansible | Using /Users/craig/Projects/homelab/ansible.cfg as config file
2023-03-26 22:14:03,330 p=91818 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *****************************************************************************
2023-03-26 22:14:03,339 p=91818 u=craig n=ansible | TASK [Gathering Facts ] ***************************************************************************************
2023-03-26 22:14:04,756 p=91818 u=craig n=ansible | ok: [caddy]
2023-03-26 22:14:04,762 p=91818 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ***********************************************************
2023-03-26 22:14:04,772 p=91818 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-26 22:14:04,779 p=91818 u=craig n=ansible | TASK [Include secrets] ****************************************************************************************
2023-03-26 22:14:04,799 p=91818 u=craig n=ansible | ok: [caddy] => {"censored": "the output has been hidden due to the fact that 'no_log: true' was specified for this result", "changed": false}
2023-03-26 22:14:04,805 p=91818 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] ************************************************
2023-03-26 22:14:04,816 p=91818 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw=="
}
2023-03-26 22:14:04,827 p=91818 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] *************************************************
2023-03-26 22:14:05,307 p=91818 u=craig n=ansible | ok: [caddy] => {"changed": false, "container": {"AppArmorProfile": "docker-default", "Args": ["run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Config": {"AttachStderr": false, "AttachStdin": false, "AttachStdout": false, "Cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "Domainname": "", "Entrypoint": null, "Env": ["CADDY_DNS_API_KEY=QWdBRUsxZnR5VG90LTJZTTZTWTV4Zw==", "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin", "CADDY_VERSION=v2.6.4", "XDG_CONFIG_HOME=/config", "XDG_DATA_HOME=/data"], "ExposedPorts": {"2019/tcp": {}, "443/tcp": {}, "443/udp": {}, "80/tcp": {}}, "Hostname": "b0333da8c0b8", "Image": "caddy", "Labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "OnBuild": null, "OpenStdin": false, "StdinOnce": false, "Tty": false, "User": "", "Volumes": {"/config": {}, "/data": {}}, "WorkingDir": "/srv"}, "Created": "2023-03-27T01:45:41.198375022Z", "Driver": "overlay2", "ExecIDs": null, "GraphDriver": {"Data": {"LowerDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6-init/diff:/var/lib/docker/overlay2/a82620ad56cac80997e9fd45034f1ae82a8ab4bc12e280aa4041448f9300398d/diff:/var/lib/docker/overlay2/e8a5c0b4fadc4c292e11d5efa64fb7dc45bb6e31e5eb54725eccb01952822d2e/diff:/var/lib/docker/overlay2/0c7522c45447fc80d43791b1fd70ffc2e0c8c2f7c78274e15af23b5f28e76feb/diff:/var/lib/docker/overlay2/887a28d027cffe9aaab9aaf7d10121ae2448e915fa29448432866b5f18250ab4/diff:/var/lib/docker/overlay2/b53b37a6a143b00290caeccb5a0855c65aa59011a9de4c773e1a5d947e2d6396/diff", "MergedDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/merged", "UpperDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/diff", "WorkDir": "/var/lib/docker/overlay2/80c2f164ca69c7b58fb4506960df860a3d0704e6ac1eba52a6571e506c7a3dd6/work"}, "Name": "overlay2"}, "HostConfig": {"AutoRemove": false, "Binds": ["caddy_caddy_data:/data:rw", "caddy_caddy_config:/config:rw"], "BlkioDeviceReadBps": null, "BlkioDeviceReadIOps": null, "BlkioDeviceWriteBps": null, "BlkioDeviceWriteIOps": null, "BlkioWeight": 0, "BlkioWeightDevice": null, "CapAdd": null, "CapDrop": null, "Cgroup": "", "CgroupParent": "", "CgroupnsMode": "private", "ConsoleSize": [0, 0], "ContainerIDFile": "", "CpuCount": 0, "CpuPercent": 0, "CpuPeriod": 0, "CpuQuota": 0, "CpuRealtimePeriod": 0, "CpuRealtimeRuntime": 0, "CpuShares": 0, "CpusetCpus": "", "CpusetMems": "", "DeviceCgroupRules": null, "DeviceRequests": null, "Devices": null, "Dns": null, "DnsOptions": null, "DnsSearch": null, "ExtraHosts": null, "GroupAdd": null, "IOMaximumBandwidth": 0, "IOMaximumIOps": 0, "IpcMode": "private", "Isolation": "", "Links": null, "LogConfig": {"Config": {}, "Type": "json-file"}, "MaskedPaths": ["/proc/asound", "/proc/acpi", "/proc/kcore", "/proc/keys", "/proc/latency_stats", "/proc/timer_list", "/proc/timer_stats", "/proc/sched_debug", "/proc/scsi", "/sys/firmware"], "Memory": 0, "MemoryReservation": 0, "MemorySwap": 0, "MemorySwappiness": null, "NanoCpus": 0, "NetworkMode": "caddy_default", "OomKillDisable": null, "OomScoreAdj": 0, "PidMode": "", "PidsLimit": null, "PortBindings": {"443/tcp": [{"HostIp": "", "HostPort": "443"}], "80/tcp": [{"HostIp": "", "HostPort": "80"}]}, "Privileged": false, "PublishAllPorts": false, "ReadonlyPaths": ["/proc/bus", "/proc/fs", "/proc/irq", "/proc/sys", "/proc/sysrq-trigger"], "ReadonlyRootfs": false, "RestartPolicy": {"MaximumRetryCount": 0, "Name": ""}, "Runtime": "runc", "SecurityOpt": null, "ShmSize": 67108864, "UTSMode": "", "Ulimits": null, "UsernsMode": "", "VolumeDriver": "", "VolumesFrom": []}, "HostnamePath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hostname", "HostsPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/hosts", "Id": "b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39", "Image": "sha256:a994e8295eb8d3397814558efd1d6d4efd6df0e3ebccb020584fe4febfe9de3e", "LogPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39-json.log", "MountLabel": "", "Mounts": [{"Destination": "/data", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_data", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_data/_data", "Type": "volume"}, {"Destination": "/config", "Driver": "local", "Mode": "rw", "Name": "caddy_caddy_config", "Propagation": "", "RW": true, "Source": "/var/lib/docker/volumes/caddy_caddy_config/_data", "Type": "volume"}], "Name": "/caddy", "NetworkSettings": {"Bridge": "", "EndpointID": "", "Gateway": "", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "HairpinMode": false, "IPAddress": "", "IPPrefixLen": 0, "IPv6Gateway": "", "LinkLocalIPv6Address": "", "LinkLocalIPv6PrefixLen": 0, "MacAddress": "", "Networks": {"caddy_default": {"Aliases": ["caddy", "b0333da8c0b8"], "DriverOpts": null, "EndpointID": "a69fdfdef331db01ce90e01b84e257dbd1c97b2cad884b60bb2f6b499b72f950", "Gateway": "172.19.0.1", "GlobalIPv6Address": "", "GlobalIPv6PrefixLen": 0, "IPAMConfig": null, "IPAddress": "172.19.0.2", "IPPrefixLen": 16, "IPv6Gateway": "", "Links": null, "MacAddress": "02:42:ac:13:00:02", "NetworkID": "3010e077b1bda059908b4f385356ab4513c293df9a8b0f33edf388f5ae22c82d"}}, "Ports": {"2019/tcp": null, "443/tcp": [{"HostIp": "0.0.0.0", "HostPort": "443"}, {"HostIp": "::", "HostPort": "443"}], "443/udp": null, "80/tcp": [{"HostIp": "0.0.0.0", "HostPort": "80"}, {"HostIp": "::", "HostPort": "80"}]}, "SandboxID": "817adeaeb9071897f0063d4c1df580df6d6e58ef39ae673eb5243269a6dd7dd8", "SandboxKey": "/var/run/docker/netns/817adeaeb907", "SecondaryIPAddresses": null, "SecondaryIPv6Addresses": null}, "Path": "caddy", "Platform": "linux", "ProcessLabel": "", "ResolvConfPath": "/var/lib/docker/containers/b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39/resolv.conf", "RestartCount": 0, "State": {"Dead": false, "Error": "", "ExitCode": 0, "FinishedAt": "0001-01-01T00:00:00Z", "OOMKilled": false, "Paused": false, "Pid": 72355, "Restarting": false, "Running": true, "StartedAt": "2023-03-27T01:45:41.939447226Z", "Status": "running"}}, "exists": true}
2023-03-26 22:14:05,315 p=91818 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] *********************************
2023-03-26 22:14:05,676 p=91818 u=craig n=ansible | ok: [caddy] => {"changed": false, "gid": 0, "group": "root", "mode": "0755", "owner": "root", "path": "/opt/caddy", "size": 4096, "state": "directory", "uid": 0}
2023-03-26 22:14:05,683 p=91818 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] *********************************
2023-03-26 22:14:06,467 p=91818 u=craig n=ansible | changed: [caddy] => {"changed": true, "checksum": "7338945564416ad0ffdee978cc8fc5c267ace8fd", "dest": "/opt/caddy/Caddyfile", "gid": 0, "group": "root", "md5sum": "3dda908f5f4c3931c2dcfeb3466e3ff1", "mode": "0644", "owner": "root", "size": 284, "src": "/home/stantonius/.ansible/tmp/ansible-tmp-1679883245.7146251-91863-36881181022190/source", "state": "file", "uid": 0}
2023-03-26 22:14:06,473 p=91818 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ******************************
2023-03-26 22:14:06,962 p=91818 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "1ccdd07ddf798c5bfb2cf2f1fb4bd03609361e73", "dest": "/opt/caddy/Dockerfile", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/Dockerfile", "size": 196, "state": "file", "uid": 0}
2023-03-26 22:14:06,972 p=91818 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] ***
2023-03-26 22:14:07,469 p=91818 u=craig n=ansible | ok: [caddy] => {"changed": false, "checksum": "566db96a84acf3052a5e73f74402cd613def6bc5", "dest": "/opt/caddy/docker-compose.yml", "gid": 0, "group": "root", "mode": "0644", "owner": "root", "path": "/opt/caddy/docker-compose.yml", "size": 319, "state": "file", "uid": 0}
2023-03-26 22:14:07,476 p=91818 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ******
2023-03-26 22:14:09,865 p=91818 u=craig n=ansible | changed: [caddy] => {"changed": true, "services": {"caddy": {"caddy": {"cmd": ["caddy", "run", "--config", "/etc/caddy/Caddyfile", "--adapter", "caddyfile"], "image": "caddy", "labels": {"com.docker.compose.config-hash": "81af0f8bf35811803850168b275a3189f7792ac25e3633dda9ecac6cec4f5296", "com.docker.compose.container-number": "1", "com.docker.compose.oneoff": "False", "com.docker.compose.project": "caddy", "com.docker.compose.project.config_files": "/opt/caddy/docker-compose.yml", "com.docker.compose.project.working_dir": "/opt/caddy", "com.docker.compose.service": "caddy", "com.docker.compose.version": "1.29.2", "org.opencontainers.image.description": "a powerful, enterprise-ready, open source web server with automatic HTTPS written in Go", "org.opencontainers.image.documentation": "https://caddyserver.com/docs", "org.opencontainers.image.licenses": "Apache-2.0", "org.opencontainers.image.source": "https://github.com/caddyserver/caddy-docker", "org.opencontainers.image.title": "Caddy", "org.opencontainers.image.url": "https://caddyserver.com", "org.opencontainers.image.vendor": "Light Code Labs", "org.opencontainers.image.version": "v2.6.4"}, "networks": {"caddy_default": {"IPAddress": "172.19.0.2", "IPPrefixLen": 16, "aliases": ["caddy", "b0333da8c0b8"], "globalIPv6": "", "globalIPv6PrefixLen": 0, "links": null, "macAddress": "02:42:ac:13:00:02"}}, "state": {"running": true, "status": "running"}}}}}
2023-03-26 22:14:09,874 p=91818 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ******
2023-03-26 22:14:10,660 p=91818 u=craig n=ansible | changed: [caddy] => {"changed": true, "rc": 0, "stderr": "{\"level\":\"info\",\"ts\":1679883250.6366224,\"msg\":\"using adjacent Caddyfile\"}", "stderr_lines": ["{\"level\":\"info\",\"ts\":1679883250.6366224,\"msg\":\"using adjacent Caddyfile\"}"], "stdout": "", "stdout_lines": []}
2023-03-26 22:14:10,682 p=91818 u=craig n=ansible | PLAY RECAP ****************************************************************************************************
2023-03-26 22:14:10,682 p=91818 u=craig n=ansible | caddy                      : ok=11   changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-27 21:35:07,641 p=54031 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-27 21:35:07,641 p=54031 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-27 21:35:07,641 p=54031 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-27 21:35:07,648 p=54031 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-27 21:35:08,070 p=54031 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-27 21:35:08,083 p=54031 u=craig n=ansible | ERROR! vars file ~/Projects/homelab/vault.yaml was not found
Could not find file on the Ansible Controller.
If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-27 21:36:23,139 p=54310 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-27 21:36:23,139 p=54310 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-27 21:36:23,139 p=54310 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-27 21:36:23,143 p=54310 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-27 21:36:23,444 p=54310 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-27 21:36:23,463 p=54310 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-27 21:36:25,010 p=54310 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:36:25,041 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-27 21:36:26,005 p=54310 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:36:26,024 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-27 21:36:26,408 p=54310 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:36:26,426 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-27 21:36:27,190 p=54310 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:36:27,221 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-27 21:36:27,530 p=54310 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-27 21:36:27,546 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:36:27,556 p=54310 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-27 21:36:27,571 p=54310 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:37:00,578 p=54310 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for creating VM. Last line in task before timeout: [{'n': 1, 't': '  Logical volume \"vm-108-disk-0\" created.'}]"}
2023-03-27 21:37:00,582 p=54310 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-27 21:37:00,582 p=54310 u=craig n=ansible | 192.168.1.99               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-27 21:39:47,522 p=54645 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-27 21:39:47,522 p=54645 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-27 21:39:47,522 p=54645 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-27 21:39:47,526 p=54645 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-27 21:39:47,801 p=54645 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-27 21:39:47,819 p=54645 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-27 21:39:49,324 p=54645 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:39:49,355 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-27 21:39:50,180 p=54645 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:39:50,196 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-27 21:39:50,563 p=54645 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:39:50,581 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-27 21:39:51,380 p=54645 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:39:51,411 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-27 21:39:51,714 p=54645 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-27 21:39:51,730 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:39:51,742 p=54645 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-27 21:39:51,758 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:39:52,204 p=54645 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:39:52,223 p=54645 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-27 21:40:21,782 p=54645 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-27 21:40:21,783 p=54645 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for starting VM. Last line in task before timeout: [{'t': 'no content', 'n': 1}]"}
2023-03-27 21:40:21,785 p=54645 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-27 21:40:21,785 p=54645 u=craig n=ansible | 192.168.1.99               : ok=6    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-27 21:42:55,080 p=54983 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-27 21:42:55,080 p=54983 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-27 21:42:55,080 p=54983 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-27 21:42:55,084 p=54983 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-27 21:42:55,363 p=54983 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-27 21:42:55,381 p=54983 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-27 21:42:56,888 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:42:56,919 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-27 21:42:57,778 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:42:57,798 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-27 21:42:58,175 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:42:58,193 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-27 21:42:58,979 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:42:59,010 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-27 21:42:59,316 p=54983 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-27 21:42:59,333 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:42:59,343 p=54983 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-27 21:42:59,358 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 21:42:59,852 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:42:59,872 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-27 21:43:00,242 p=54983 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-27 21:43:00,242 p=54983 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 21:43:00,263 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *********************************************************************************
2023-03-27 21:43:00,298 p=54983 u=craig n=ansible | changed: [192.168.1.99]
2023-03-27 21:43:00,324 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ********************************************
2023-03-27 21:43:00,655 p=54983 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-27 21:43:00,691 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] **************************************************************************
2023-03-27 21:43:07,760 p=54983 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.5]
2023-03-27 21:43:07,791 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ********************************************************************************************************
2023-03-27 21:43:09,260 p=54983 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-27 21:43:09,291 p=54983 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ********************************************************************************************************************
2023-03-27 21:44:20,265 p=54983 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.5]
2023-03-27 21:44:20,298 p=54983 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] *******************************************************************************
2023-03-27 21:44:20,905 p=54983 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-27 21:44:20,977 p=54983 u=craig n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: dnsmasq

2023-03-27 21:44:20,978 p=54983 u=craig n=ansible | PLAY [Create a user and lock down the container] ***********************************************************************************************************************************************************
2023-03-27 21:44:20,978 p=54983 u=craig n=ansible | skipping: no hosts matched
2023-03-27 21:44:20,995 p=54983 u=craig n=ansible | PLAY [Install gui] *****************************************************************************************************************************************************************************************
2023-03-27 21:44:20,995 p=54983 u=craig n=ansible | skipping: no hosts matched
2023-03-27 21:44:20,995 p=54983 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-27 21:44:20,995 p=54983 u=craig n=ansible | 192.168.1.99               : ok=13   changed=4    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-27 22:00:24,642 p=56389 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-27 22:00:24,642 p=56389 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-27 22:00:24,642 p=56389 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-27 22:00:24,646 p=56389 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-27 22:00:24,925 p=56389 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-27 22:00:24,942 p=56389 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-27 22:00:26,479 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:26,511 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-27 22:00:27,312 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:27,331 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-27 22:00:27,691 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:27,710 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-27 22:00:28,476 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:28,506 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-27 22:00:28,817 p=56389 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-27 22:00:28,833 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 22:00:28,843 p=56389 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-27 22:00:28,859 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-27 22:00:29,298 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:29,314 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-27 22:00:29,679 p=56389 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-27 22:00:29,679 p=56389 u=craig n=ansible | ok: [192.168.1.99]
2023-03-27 22:00:29,701 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *********************************************************************************
2023-03-27 22:00:29,727 p=56389 u=craig n=ansible | changed: [192.168.1.99]
2023-03-27 22:00:29,752 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ********************************************
2023-03-27 22:00:30,074 p=56389 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-27 22:00:30,111 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] **************************************************************************
2023-03-27 22:00:32,177 p=56389 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.5]
2023-03-27 22:00:32,207 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ********************************************************************************************************
2023-03-27 22:00:33,638 p=56389 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-27 22:00:33,668 p=56389 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ********************************************************************************************************************
2023-03-27 22:00:34,685 p=56389 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-27 22:00:34,716 p=56389 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] *******************************************************************************
2023-03-27 22:00:35,190 p=56389 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-27 22:00:35,254 p=56389 u=craig n=ansible | [WARNING]: Could not match supplied host pattern, ignoring: dnsmasq

2023-03-27 22:00:35,254 p=56389 u=craig n=ansible | PLAY [Create a user and lock down the container] ***********************************************************************************************************************************************************
2023-03-27 22:00:35,254 p=56389 u=craig n=ansible | skipping: no hosts matched
2023-03-27 22:00:35,272 p=56389 u=craig n=ansible | PLAY [Install gui] *****************************************************************************************************************************************************************************************
2023-03-27 22:00:35,272 p=56389 u=craig n=ansible | skipping: no hosts matched
2023-03-27 22:00:35,272 p=56389 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-27 22:00:35,272 p=56389 u=craig n=ansible | 192.168.1.99               : ok=13   changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-29 18:58:02,024 p=70468 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 18:58:02,042 p=70468 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 18:58:03,806 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:03,838 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 18:58:04,699 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:04,721 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 18:58:05,072 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:05,089 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 18:58:05,806 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:05,837 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 18:58:06,148 p=70468 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 18:58:06,164 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 18:58:06,175 p=70468 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 18:58:06,191 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 18:58:06,654 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:06,674 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-29 18:58:07,024 p=70468 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-29 18:58:07,024 p=70468 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 18:58:07,042 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *********************************************************************************
2023-03-29 18:58:07,074 p=70468 u=craig n=ansible | changed: [192.168.1.99]
2023-03-29 18:58:07,100 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ********************************************
2023-03-29 18:58:07,432 p=70468 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-29 18:58:07,467 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] **************************************************************************
2023-03-29 18:58:11,126 p=70468 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.5]
2023-03-29 18:58:11,157 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ********************************************************************************************************
2023-03-29 18:58:12,461 p=70468 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-29 18:58:12,496 p=70468 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ********************************************************************************************************************
2023-03-29 18:58:13,392 p=70468 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-29 18:58:13,420 p=70468 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] *******************************************************************************
2023-03-29 18:58:13,901 p=70468 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.5]
2023-03-29 18:58:13,977 p=70468 u=craig n=ansible | PLAY [Create a user and lock down the container] ***********************************************************************************************************************************************************
2023-03-29 18:58:14,005 p=70468 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 18:58:14,961 p=70468 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 18:58:14,992 p=70468 u=craig n=ansible | TASK [create_user : Ensure group sudo exists name=sudo, state=present] *************************************************************************************************************************************
2023-03-29 18:58:15,357 p=70468 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 18:58:15,373 p=70468 u=craig n=ansible | TASK [create_user : Allow sudo group to have passwordless sudo path=/etc/sudoers, state=present, regexp=^%sudo, line=%sudo ALL=(ALL) NOPASSWD: ALL, validate=/usr/sbin/visudo -cf %s] **********************
2023-03-29 18:58:15,757 p=70468 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 18:58:15,772 p=70468 u=craig n=ansible | TASK [create_user : Create a new user name={{machine_user}}, password={{machine_password | string | password_hash('sha512')}}, shell=/bin/bash, groups=sudo, append=True] **********************************
2023-03-29 18:58:16,958 p=70468 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 18:58:16,974 p=70468 u=craig n=ansible | TASK [create_user : Create the .ssh directory path=/home/{{machine_user}}/.ssh, state=directory, mode=0700, owner={{machine_user}}, group={{machine_user}}] ************************************************
2023-03-29 18:58:17,249 p=70468 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 18:58:17,265 p=70468 u=craig n=ansible | TASK [create_user : Copy the ssh key to the new user src={{machine_ssh_key}}, dest=/home/{{machine_user}}/.ssh/authorized_keys, mode=0600, owner={{machine_user}}, group={{machine_user}}] *****************
2023-03-29 18:58:17,907 p=70468 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 18:58:17,937 p=70468 u=craig n=ansible | TASK [lockdown : Ensure the /run/sshd directory exists path=/run/sshd, state=directory, mode=493] **********************************************************************************************************
2023-03-29 18:58:18,204 p=70468 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 18:58:18,220 p=70468 u=craig n=ansible | TASK [lockdown : Update SSH configuration to be more secure dest=/etc/ssh/sshd_config, regexp={{ item.regexp }}, line={{ item.line }}, state=present, validate=sshd -T -f %s, mode=420] ********************
2023-03-29 18:58:18,502 p=70468 u=craig n=ansible | changed: [dnsmasq] => (item={'regexp': '^#?PasswordAuthentication', 'line': 'PasswordAuthentication no'})
2023-03-29 18:58:18,768 p=70468 u=craig n=ansible | changed: [dnsmasq] => (item={'regexp': '^#?PermitRootLogin', 'line': 'PermitRootLogin no'})
2023-03-29 18:58:19,039 p=70468 u=craig n=ansible | changed: [dnsmasq] => (item={'regexp': '^#?Port', 'line': 'Port 22'})
2023-03-29 18:58:19,310 p=70468 u=craig n=ansible | changed: [dnsmasq] => (item={'regexp': '^#?PermitEmptyPasswords', 'line': 'PermitEmptyPasswords no'})
2023-03-29 18:58:19,346 p=70468 u=craig n=ansible | RUNNING HANDLER [restart ssh name=sshd, state=restarted] ***************************************************************************************************************************************************
2023-03-29 18:58:19,989 p=70468 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 18:58:20,035 p=70468 u=craig n=ansible | PLAY [Install gui] *****************************************************************************************************************************************************************************************
2023-03-29 18:58:20,050 p=70468 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 18:58:21,105 p=70468 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 18:58:21,134 p=70468 u=craig n=ansible | TASK [lxc_gui : Ensure system is up to date update_cache=True, upgrade=True] *******************************************************************************************************************************
2023-03-29 18:58:21,144 p=70468 u=craig n=ansible | skipping: [dnsmasq]
2023-03-29 18:58:21,159 p=70468 u=craig n=ansible | TASK [lxc_gui : Install xrdp and Xfce4 desktop and force if needed and install dependencies and recommends name={{item}}, state=present, force=True, install_recommends=True] ******************************
2023-03-29 18:58:21,173 p=70468 u=craig n=ansible | skipping: [dnsmasq] => (item=xfce4) 
2023-03-29 18:58:21,174 p=70468 u=craig n=ansible | skipping: [dnsmasq] => (item=xfce4-session) 
2023-03-29 18:58:21,174 p=70468 u=craig n=ansible | skipping: [dnsmasq] => (item=xrdp) 
2023-03-29 18:58:21,190 p=70468 u=craig n=ansible | TASK [lxc_gui : Make sure xrdp is running name=xrdp, state=started, enabled=True] **************************************************************************************************************************
2023-03-29 18:58:21,201 p=70468 u=craig n=ansible | skipping: [dnsmasq]
2023-03-29 18:58:21,216 p=70468 u=craig n=ansible | TASK [lxc_gui : Install chrome using wget and apt install deb=https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb, state=present, force=True, install_recommends=True] ***************
2023-03-29 18:58:21,227 p=70468 u=craig n=ansible | skipping: [dnsmasq]
2023-03-29 18:58:21,270 p=70468 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 18:58:21,270 p=70468 u=craig n=ansible | 192.168.1.99               : ok=13   changed=3    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-29 18:58:21,270 p=70468 u=craig n=ansible | dnsmasq                    : ok=10   changed=6    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2023-03-29 18:59:41,403 p=70923 u=craig n=ansible | PLAY [Install and run dnsmasq in Docker] *******************************************************************************************************************************************************************
2023-03-29 18:59:41,420 p=70923 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 18:59:42,705 p=70923 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 18:59:42,722 p=70923 u=craig n=ansible | TASK [ansible.builtin.include_vars file=./config.json] *****************************************************************************************************************************************************
2023-03-29 18:59:42,734 p=70923 u=craig n=ansible | fatal: [dnsmasq]: FAILED! => {"ansible_facts": {}, "ansible_included_var_files": [], "changed": false, "message": "Could not find or access './config.json'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/vars/./config.json\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/./config.json\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/vars/./config.json\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/./config.json on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-29 18:59:42,735 p=70923 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 18:59:42,735 p=70923 u=craig n=ansible | dnsmasq                    : ok=1    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 19:00:40,112 p=71037 u=craig n=ansible | PLAY [Install and run dnsmasq in Docker] *******************************************************************************************************************************************************************
2023-03-29 19:00:40,129 p=71037 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 19:00:41,190 p=71037 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 19:00:41,219 p=71037 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 19:00:42,420 p=71037 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 19:00:42,439 p=71037 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 19:00:44,362 p=71037 u=craig n=ansible | changed: [dnsmasq] => (item=apt-transport-https)
2023-03-29 19:00:45,061 p=71037 u=craig n=ansible | ok: [dnsmasq] => (item=ca-certificates)
2023-03-29 19:00:48,661 p=71037 u=craig n=ansible | changed: [dnsmasq] => (item=curl)
2023-03-29 19:00:54,230 p=71037 u=craig n=ansible | changed: [dnsmasq] => (item=gnupg)
2023-03-29 19:00:54,998 p=71037 u=craig n=ansible | ok: [dnsmasq] => (item=lsb-release)
2023-03-29 19:01:09,271 p=71037 u=craig n=ansible | changed: [dnsmasq] => (item=software-properties-common)
2023-03-29 19:01:09,295 p=71037 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 19:01:10,089 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:01:10,107 p=71037 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 19:01:12,399 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:01:12,417 p=71037 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 19:01:36,400 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:01:36,420 p=71037 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 19:01:37,138 p=71037 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 19:01:37,157 p=71037 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 19:01:37,624 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:01:37,640 p=71037 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 19:02:10,474 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:02:10,495 p=71037 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 19:02:16,192 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:02:16,225 p=71037 u=craig n=ansible | TASK [Create configuration directory path=/opt/dnsmasq/config, state=directory, owner=root, group=root, mode=493] ******************************************************************************************
2023-03-29 19:02:16,613 p=71037 u=craig n=ansible | changed: [dnsmasq]
2023-03-29 19:02:16,630 p=71037 u=craig n=ansible | TASK [Configure dnsmasq src=config_dnsmasq.conf.j2, dest=/opt/dnsmasq/config/dnsmasq.conf, owner=root, group=root, mode=420] *******************************************************************************
2023-03-29 19:02:16,699 p=71037 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-29 19:02:16,699 p=71037 u=craig n=ansible | fatal: [dnsmasq]: FAILED! => {"changed": false, "msg": "Could not find or access 'config_dnsmasq.conf.j2'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/templates/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/templates/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/config_dnsmasq.conf.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-29 19:02:16,700 p=71037 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 19:02:16,700 p=71037 u=craig n=ansible | dnsmasq                    : ok=11   changed=8    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 19:03:20,209 p=71413 u=craig n=ansible | PLAY [Install and run dnsmasq in Docker] *******************************************************************************************************************************************************************
2023-03-29 19:03:20,226 p=71413 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 19:03:21,647 p=71413 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 19:03:21,661 p=71413 u=craig n=ansible | TASK [Create configuration directory path=/opt/dnsmasq/config, state=directory, owner=root, group=root, mode=493] ******************************************************************************************
2023-03-29 19:03:22,018 p=71413 u=craig n=ansible | ok: [dnsmasq]
2023-03-29 19:03:22,035 p=71413 u=craig n=ansible | TASK [Configure dnsmasq src=config_dnsmasq.conf.j2, dest=/opt/dnsmasq/config/dnsmasq.conf, owner=root, group=root, mode=420] *******************************************************************************
2023-03-29 19:03:22,106 p=71413 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-29 19:03:22,106 p=71413 u=craig n=ansible | fatal: [dnsmasq]: FAILED! => {"changed": false, "msg": "Could not find or access 'config_dnsmasq.conf.j2'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/templates/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/templates/config_dnsmasq.conf.j2\n\t/Users/craig/Projects/homelab/ansible/playbooks/dns/config_dnsmasq.conf.j2 on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-29 19:03:22,107 p=71413 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 19:03:22,107 p=71413 u=craig n=ansible | dnsmasq                    : ok=2    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 19:54:37,251 p=73663 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-29 19:54:37,251 p=73663 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-29 19:54:37,251 p=73663 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-29 19:54:37,255 p=73663 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-29 19:54:37,557 p=73663 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 19:54:37,575 p=73663 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 19:54:39,023 p=73663 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:54:39,055 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 19:54:39,864 p=73663 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:54:39,882 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 19:54:40,240 p=73663 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:54:40,258 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 19:54:40,971 p=73663 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:54:41,000 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 19:54:41,306 p=73663 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 19:54:41,321 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 19:54:41,332 p=73663 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 19:54:41,347 p=73663 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 19:55:20,045 p=73663 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for creating VM. Last line in task before timeout: [{'t': '  Logical volume \"vm-112-disk-0\" created.', 'n': 1}]"}
2023-03-29 19:55:20,047 p=73663 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 19:55:20,047 p=73663 u=craig n=ansible | 192.168.1.99               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 19:56:39,913 p=74005 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-29 19:56:39,913 p=74005 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-29 19:56:39,913 p=74005 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-29 19:56:39,917 p=74005 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-29 19:56:40,214 p=74005 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ********************************************************************************************************************************************************************
2023-03-29 19:56:40,232 p=74005 u=craig n=ansible | TASK [Gathering Facts ] **************************************************************************************************************************************************************************************
2023-03-29 19:56:41,733 p=74005 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:56:41,764 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] *****************************************************************************************************************************************
2023-03-29 19:56:42,589 p=74005 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:56:42,611 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *******************************************************************
2023-03-29 19:56:42,969 p=74005 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:56:42,987 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] *****************************************************
2023-03-29 19:56:43,734 p=74005 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:56:43,769 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] ****************************************************************************************************
2023-03-29 19:56:44,084 p=74005 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 19:56:44,099 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 19:56:44,111 p=74005 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 19:56:44,127 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 19:56:44,580 p=74005 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 19:56:44,602 p=74005 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *********************************************************
2023-03-29 19:57:14,136 p=74005 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-29 19:57:14,137 p=74005 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for starting VM. Last line in task before timeout: [{'n': 1, 't': 'no content'}]"}
2023-03-29 19:57:14,138 p=74005 u=craig n=ansible | PLAY RECAP ***************************************************************************************************************************************************************************************************
2023-03-29 19:57:14,138 p=74005 u=craig n=ansible | 192.168.1.99               : ok=6    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 20:06:32,060 p=74945 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-29 20:06:32,060 p=74945 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-29 20:06:32,060 p=74945 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-29 20:06:32,065 p=74945 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-29 20:06:32,447 p=74945 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 20:06:32,465 p=74945 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:06:34,102 p=74945 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:06:34,134 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 20:06:34,991 p=74945 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:06:35,007 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 20:06:35,374 p=74945 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:06:35,391 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 20:06:36,104 p=74945 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:06:36,134 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 20:06:36,457 p=74945 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 20:06:36,473 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:06:36,483 p=74945 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 20:06:36,500 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:06:36,948 p=74945 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:06:36,964 p=74945 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-29 20:07:15,347 p=74945 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-29 20:07:15,348 p=74945 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for starting VM. Last line in task before timeout: [{'t': \"TASK ERROR: Configuration file 'nodes/bigprox/lxc/112.conf' does not exist\", 'n': 1}]"}
2023-03-29 20:07:15,349 p=74945 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 20:07:15,349 p=74945 u=craig n=ansible | 192.168.1.99               : ok=6    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 20:15:32,385 p=75714 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-29 20:15:32,385 p=75714 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-29 20:15:32,386 p=75714 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-29 20:15:32,390 p=75714 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-29 20:15:32,686 p=75714 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 20:15:32,704 p=75714 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:15:34,229 p=75714 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:15:34,259 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 20:15:35,096 p=75714 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:15:35,113 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 20:15:35,467 p=75714 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:15:35,484 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 20:15:36,201 p=75714 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:15:36,228 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 20:15:36,584 p=75714 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 20:15:36,600 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:15:36,610 p=75714 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 20:15:36,626 p=75714 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:16:11,903 p=75714 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for creating VM. Last line in task before timeout: [{'n': 1, 't': '  Logical volume \"vm-112-disk-0\" created.'}]"}
2023-03-29 20:16:11,905 p=75714 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 20:16:11,905 p=75714 u=craig n=ansible | 192.168.1.99               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 20:19:13,806 p=76154 u=craig n=ansible | [WARNING]:  * Failed to parse /Users/craig/Projects/homelab/inventory.ini with ini plugin: /Users/craig/Projects/homelab/inventory.ini:21: Expected key=value host variable assignment, got: ansible_host

2023-03-29 20:19:13,806 p=76154 u=craig n=ansible | [WARNING]: Unable to parse /Users/craig/Projects/homelab/inventory.ini as an inventory source

2023-03-29 20:19:13,806 p=76154 u=craig n=ansible | [WARNING]: No inventory was parsed, only implicit localhost is available

2023-03-29 20:19:13,810 p=76154 u=craig n=ansible | [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2023-03-29 20:19:14,115 p=76154 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 20:19:14,133 p=76154 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:19:15,627 p=76154 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:19:15,658 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 20:19:16,528 p=76154 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:19:16,546 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 20:19:16,890 p=76154 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:19:16,906 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 20:19:17,600 p=76154 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:19:17,627 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 20:19:17,950 p=76154 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 20:19:17,967 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:19:17,977 p=76154 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 20:19:17,993 p=76154 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:20:06,887 p=76154 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for creating VM. Last line in task before timeout: [{'t': '  Logical volume \"vm-112-disk-0\" created.', 'n': 1}]"}
2023-03-29 20:20:06,889 p=76154 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 20:20:06,890 p=76154 u=craig n=ansible | 192.168.1.99               : ok=5    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 20:21:30,711 p=76453 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 20:21:30,729 p=76453 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:21:32,221 p=76453 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:21:32,252 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 20:21:33,068 p=76453 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:21:33,087 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 20:21:33,439 p=76453 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:21:33,456 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 20:21:34,207 p=76453 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:21:34,238 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 20:21:34,542 p=76453 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 20:21:34,558 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:21:34,569 p=76453 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 20:21:34,585 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:21:35,031 p=76453 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:21:35,049 p=76453 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-29 20:22:04,566 p=76453 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-29 20:22:04,567 p=76453 u=craig n=ansible | fatal: [192.168.1.99]: FAILED! => {"changed": false, "msg": "Reached timeout while waiting for starting VM. Last line in task before timeout: [{'n': 1, 't': 'no content'}]"}
2023-03-29 20:22:04,568 p=76453 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 20:22:04,568 p=76453 u=craig n=ansible | 192.168.1.99               : ok=6    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-29 20:22:09,927 p=76633 u=craig n=ansible | PLAY [Create an LXC container in Proxmox] ******************************************************************************************************************************************************************
2023-03-29 20:22:09,944 p=76633 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:22:11,247 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:11,279 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Install proxmoxer on main host name=proxmoxer] ***************************************************************************************************************************************
2023-03-29 20:22:12,082 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:12,101 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Create a directory to house the ssh keys to pass to a new LXC path=/var/lib/vz/snippets/, state=directory, mode=448] *****************************************************************
2023-03-29 20:22:12,450 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:12,468 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Copy the bash script to snippets directory and make it executable src=enable_lxc_ssh_hook.sh, dest=/var/lib/vz/snippets, mode=448] ***************************************************
2023-03-29 20:22:13,208 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:13,239 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Print the ssh key and store it to a variable _raw_params=cat {{ machine_ssh_key }}] **************************************************************************************************
2023-03-29 20:22:13,548 p=76633 u=craig n=ansible | changed: [192.168.1.99 -> localhost]
2023-03-29 20:22:13,564 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Create LXC without hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:22:13,574 p=76633 u=craig n=ansible | skipping: [192.168.1.99]
2023-03-29 20:22:13,590 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Create LXC with hookscript vmid={{ machine_id }}, node=bigprox, api_user={{root_user}}, api_password={{root_password}}, api_host={{host_ip}}, hostname={{machine_name}}, password={{machine_password}}, ostemplate=local:vztmpl/{{machine_image}}, storage=local-lvm, unprivileged=1, features=['nesting=1', 'keyctl=1'], hookscript=local:snippets/enable_lxc_ssh_hook.sh, netif={'net0':'name=enp6s0,gw=192.168.1.1,ip={{machine_ip}},bridge=vmbr0'}, pubkey={{ssh_key.stdout}}, cores={{machine_cores}}, cpus={{machine_cpus}}, memory={{machine_ram}}, disk={{machine_disk}}, onboot={{onboot}}] ***
2023-03-29 20:22:14,049 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:14,068 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Start container vmid={{ machine_id }}, api_user=root@pam, api_password={{root_password}}, api_host={{host_ip}}, state=started] *******************************************************
2023-03-29 20:22:14,418 p=76633 u=craig n=ansible | [DEPRECATION WARNING]: The default value `false` for the parameter "unprivileged" is deprecated and it will be replaced with `true`. This feature will be removed from community.general in version 7.0.0. 
Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2023-03-29 20:22:14,419 p=76633 u=craig n=ansible | ok: [192.168.1.99]
2023-03-29 20:22:14,439 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Add new container to inventory name={{machine_ip | regex_replace('/.*', '')}}, groups=proxmox_nodes] *********************************************************************************
2023-03-29 20:22:14,473 p=76633 u=craig n=ansible | changed: [192.168.1.99]
2023-03-29 20:22:14,499 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Wait for port 22 to become open on the host host={{machine_ip | regex_replace('/.*', '')}}, port=22, state=started, sleep=5, timeout=300] ********************************************
2023-03-29 20:22:14,836 p=76633 u=craig n=ansible | ok: [192.168.1.99 -> localhost]
2023-03-29 20:22:14,871 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Allow release-info to change for APT repositories _raw_params=apt-get update -y --allow-releaseinfo-change] **************************************************************************
2023-03-29 20:22:19,467 p=76633 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.8]
2023-03-29 20:22:19,498 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Run the equivalent of "apt-get update" update_cache=True, force_apt_get=True] ********************************************************************************************************
2023-03-29 20:22:20,661 p=76633 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.8]
2023-03-29 20:22:20,688 p=76633 u=craig n=ansible | TASK [pm_create_lxc : Update all packages to their latest version name=*, state=latest] ********************************************************************************************************************
2023-03-29 20:23:23,255 p=76633 u=craig n=ansible | changed: [192.168.1.99 -> 192.168.1.8]
2023-03-29 20:23:23,285 p=76633 u=craig n=ansible | TASK [pm_create_lxc : add rsa public key to remote host user=root, state=present, key={{ lookup('file', machine_ssh_key) }}] *******************************************************************************
2023-03-29 20:23:23,841 p=76633 u=craig n=ansible | ok: [192.168.1.99 -> 192.168.1.8]
2023-03-29 20:23:23,916 p=76633 u=craig n=ansible | PLAY [Create a user and lock down the container] ***********************************************************************************************************************************************************
2023-03-29 20:23:23,929 p=76633 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:23:24,863 p=76633 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 20:23:24,894 p=76633 u=craig n=ansible | TASK [create_user : Ensure group sudo exists name=sudo, state=present] *************************************************************************************************************************************
2023-03-29 20:23:25,273 p=76633 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 20:23:25,289 p=76633 u=craig n=ansible | TASK [create_user : Allow sudo group to have passwordless sudo path=/etc/sudoers, state=present, regexp=^%sudo, line=%sudo ALL=(ALL) NOPASSWD: ALL, validate=/usr/sbin/visudo -cf %s] **********************
2023-03-29 20:23:25,674 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:25,690 p=76633 u=craig n=ansible | TASK [create_user : Create a new user name={{machine_user}}, password={{machine_password | string | password_hash('sha512')}}, shell=/bin/bash, groups=sudo, append=True] **********************************
2023-03-29 20:23:26,902 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:26,921 p=76633 u=craig n=ansible | TASK [create_user : Create the .ssh directory path=/home/{{machine_user}}/.ssh, state=directory, mode=0700, owner={{machine_user}}, group={{machine_user}}] ************************************************
2023-03-29 20:23:27,208 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:27,227 p=76633 u=craig n=ansible | TASK [create_user : Copy the ssh key to the new user src={{machine_ssh_key}}, dest=/home/{{machine_user}}/.ssh/authorized_keys, mode=0600, owner={{machine_user}}, group={{machine_user}}] *****************
2023-03-29 20:23:27,901 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:27,931 p=76633 u=craig n=ansible | TASK [lockdown : Ensure the /run/sshd directory exists path=/run/sshd, state=directory, mode=493] **********************************************************************************************************
2023-03-29 20:23:28,232 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:28,251 p=76633 u=craig n=ansible | TASK [lockdown : Update SSH configuration to be more secure dest=/etc/ssh/sshd_config, regexp={{ item.regexp }}, line={{ item.line }}, state=present, validate=sshd -T -f %s, mode=420] ********************
2023-03-29 20:23:28,551 p=76633 u=craig n=ansible | changed: [unbound-dns] => (item={'regexp': '^#?PasswordAuthentication', 'line': 'PasswordAuthentication no'})
2023-03-29 20:23:28,843 p=76633 u=craig n=ansible | changed: [unbound-dns] => (item={'regexp': '^#?PermitRootLogin', 'line': 'PermitRootLogin no'})
2023-03-29 20:23:29,130 p=76633 u=craig n=ansible | changed: [unbound-dns] => (item={'regexp': '^#?Port', 'line': 'Port 22'})
2023-03-29 20:23:29,402 p=76633 u=craig n=ansible | changed: [unbound-dns] => (item={'regexp': '^#?PermitEmptyPasswords', 'line': 'PermitEmptyPasswords no'})
2023-03-29 20:23:29,434 p=76633 u=craig n=ansible | RUNNING HANDLER [restart ssh name=sshd, state=restarted] ***************************************************************************************************************************************************
2023-03-29 20:23:30,174 p=76633 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 20:23:30,221 p=76633 u=craig n=ansible | PLAY [Install gui] *****************************************************************************************************************************************************************************************
2023-03-29 20:23:30,236 p=76633 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 20:23:31,557 p=76633 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 20:23:31,587 p=76633 u=craig n=ansible | TASK [lxc_gui : Ensure system is up to date update_cache=True, upgrade=True] *******************************************************************************************************************************
2023-03-29 20:23:31,599 p=76633 u=craig n=ansible | skipping: [unbound-dns]
2023-03-29 20:23:31,614 p=76633 u=craig n=ansible | TASK [lxc_gui : Install xrdp and Xfce4 desktop and force if needed and install dependencies and recommends name={{item}}, state=present, force=True, install_recommends=True] ******************************
2023-03-29 20:23:31,629 p=76633 u=craig n=ansible | skipping: [unbound-dns] => (item=xfce4) 
2023-03-29 20:23:31,632 p=76633 u=craig n=ansible | skipping: [unbound-dns] => (item=xfce4-session) 
2023-03-29 20:23:31,632 p=76633 u=craig n=ansible | skipping: [unbound-dns] => (item=xrdp) 
2023-03-29 20:23:31,650 p=76633 u=craig n=ansible | TASK [lxc_gui : Make sure xrdp is running name=xrdp, state=started, enabled=True] **************************************************************************************************************************
2023-03-29 20:23:31,661 p=76633 u=craig n=ansible | skipping: [unbound-dns]
2023-03-29 20:23:31,680 p=76633 u=craig n=ansible | TASK [lxc_gui : Install chrome using wget and apt install deb=https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb, state=present, force=True, install_recommends=True] ***************
2023-03-29 20:23:31,691 p=76633 u=craig n=ansible | skipping: [unbound-dns]
2023-03-29 20:23:31,738 p=76633 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 20:23:31,738 p=76633 u=craig n=ansible | 192.168.1.99               : ok=13   changed=4    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
2023-03-29 20:23:31,738 p=76633 u=craig n=ansible | unbound-dns                : ok=10   changed=7    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2023-03-29 22:30:50,387 p=83873 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:30:50,405 p=83873 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:30:51,768 p=83873 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:30:51,798 p=83873 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:30:53,681 p=83873 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:30:53,702 p=83873 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:30:55,790 p=83873 u=craig n=ansible | changed: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:30:56,547 p=83873 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:31:00,664 p=83873 u=craig n=ansible | changed: [unbound-dns] => (item=curl)
2023-03-29 22:31:04,939 p=83873 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-29 22:32:11,066 p=84066 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:32:11,084 p=84066 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:32:12,435 p=84066 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:32:12,463 p=84066 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:32:13,861 p=84066 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:32:13,881 p=84066 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:32:14,688 p=84066 u=craig n=ansible | ok: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:32:15,429 p=84066 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:32:16,156 p=84066 u=craig n=ansible | ok: [unbound-dns] => (item=curl)
2023-03-29 22:32:16,932 p=84066 u=craig n=ansible | ok: [unbound-dns] => (item=gnupg)
2023-03-29 22:32:17,668 p=84066 u=craig n=ansible | ok: [unbound-dns] => (item=lsb-release)
2023-03-29 22:32:31,499 p=84066 u=craig n=ansible | changed: [unbound-dns] => (item=software-properties-common)
2023-03-29 22:32:31,522 p=84066 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 22:32:32,390 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:32:32,411 p=84066 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 22:32:34,740 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:32:34,762 p=84066 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 22:32:58,616 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:32:58,637 p=84066 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 22:32:59,381 p=84066 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:32:59,400 p=84066 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 22:32:59,898 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:32:59,920 p=84066 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 22:33:31,975 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:33:31,998 p=84066 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 22:33:37,836 p=84066 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:33:37,873 p=84066 u=craig n=ansible | TASK [Generate unbound.conf from Jinja2 template src=unbound.conf.j2, dest=/path/to/output/unbound.conf] ***************************************************************************************************
2023-03-29 22:33:38,707 p=84066 u=craig n=ansible | fatal: [unbound-dns]: FAILED! => {"changed": false, "checksum": "b7eb0ed85b7e2ee25e3963f770d082235e67ca24", "msg": "Destination directory /path/to/output does not exist"}
2023-03-29 22:33:38,708 p=84066 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 22:33:38,708 p=84066 u=craig n=ansible | unbound-dns                : ok=10   changed=7    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 22:34:44,249 p=84449 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:34:44,267 p=84449 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:34:45,667 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:45,696 p=84449 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:34:47,640 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:47,662 p=84449 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:34:48,502 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:34:49,322 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:34:50,137 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=curl)
2023-03-29 22:34:50,947 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=gnupg)
2023-03-29 22:34:51,867 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=lsb-release)
2023-03-29 22:34:52,686 p=84449 u=craig n=ansible | ok: [unbound-dns] => (item=software-properties-common)
2023-03-29 22:34:52,710 p=84449 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 22:34:53,395 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:53,414 p=84449 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 22:34:54,019 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:54,040 p=84449 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 22:34:54,938 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:54,959 p=84449 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 22:34:55,630 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:55,648 p=84449 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 22:34:56,103 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:56,121 p=84449 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 22:34:56,937 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:56,959 p=84449 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 22:34:58,118 p=84449 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:34:58,154 p=84449 u=craig n=ansible | TASK [Generate unbound.conf from Jinja2 template src=unbound.conf.j2, dest=/path/to/output/unbound.conf] ***************************************************************************************************
2023-03-29 22:34:58,957 p=84449 u=craig n=ansible | fatal: [unbound-dns]: FAILED! => {"changed": false, "checksum": "b7eb0ed85b7e2ee25e3963f770d082235e67ca24", "msg": "Destination directory /path/to/output does not exist"}
2023-03-29 22:34:58,958 p=84449 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 22:34:58,958 p=84449 u=craig n=ansible | unbound-dns                : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 22:39:45,790 p=84982 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:39:45,808 p=84982 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:39:47,202 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:47,230 p=84982 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:39:48,925 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:48,945 p=84982 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:39:49,790 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:39:50,611 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:39:51,406 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=curl)
2023-03-29 22:39:52,198 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=gnupg)
2023-03-29 22:39:53,010 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=lsb-release)
2023-03-29 22:39:53,805 p=84982 u=craig n=ansible | ok: [unbound-dns] => (item=software-properties-common)
2023-03-29 22:39:53,828 p=84982 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 22:39:54,499 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:54,518 p=84982 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 22:39:55,094 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:55,113 p=84982 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 22:39:55,871 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:55,887 p=84982 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 22:39:56,580 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:56,598 p=84982 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 22:39:57,064 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:57,083 p=84982 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 22:39:57,944 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:57,965 p=84982 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 22:39:59,052 p=84982 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:39:59,084 p=84982 u=craig n=ansible | TASK [Create output directory for generated configs path={{ config_output_dir }}, state=directory, mode=0755] **********************************************************************************************
2023-03-29 22:39:59,480 p=84982 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:39:59,499 p=84982 u=craig n=ansible | TASK [Generate unbound.conf from Jinja2 template src=unbound.conf.j2, dest={{ config_output_dir }}/unbound.conf] *******************************************************************************************
2023-03-29 22:40:00,325 p=84982 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:40:00,342 p=84982 u=craig n=ansible | TASK [Ensure Unbound container is running name=unbound-dns, image=mvance/unbound:latest, state=started, restart_policy=always, ports=['53:53/udp', '53:53/tcp'], volumes=['{{ config_output_dir }}/unbound.conf:/opt/unbound/etc/unbound/unbound.conf:ro']] ***
2023-03-29 22:40:13,445 p=84982 u=craig n=ansible | fatal: [unbound-dns]: FAILED! => {"changed": false, "msg": "Error starting container 75aa27d2ecd13fc46fdb32541faa4f4f6b18e830cf30177a951e79fc6e15eef0: 500 Server Error for http+docker://localhost/v1.42/containers/75aa27d2ecd13fc46fdb32541faa4f4f6b18e830cf30177a951e79fc6e15eef0/start: Internal Server Error (\"driver failed programming external connectivity on endpoint unbound-dns (c584fa1d35bea10760db73c97b8b74daefeff742dea03d9802fd21ba42c5a5f2): Error starting userland proxy: listen tcp4 0.0.0.0:53: bind: address already in use\")"}
2023-03-29 22:40:13,447 p=84982 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 22:40:13,447 p=84982 u=craig n=ansible | unbound-dns                : ok=12   changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-29 22:44:50,718 p=85518 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:44:50,735 p=85518 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:44:52,256 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:44:52,285 p=85518 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:44:54,008 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:44:54,027 p=85518 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:44:54,892 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:44:55,698 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:44:56,536 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=curl)
2023-03-29 22:44:57,370 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=gnupg)
2023-03-29 22:44:58,160 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=lsb-release)
2023-03-29 22:44:59,008 p=85518 u=craig n=ansible | ok: [unbound-dns] => (item=software-properties-common)
2023-03-29 22:44:59,033 p=85518 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 22:44:59,689 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:44:59,709 p=85518 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 22:45:00,279 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:00,298 p=85518 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 22:45:01,151 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:01,170 p=85518 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 22:45:01,839 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:01,857 p=85518 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 22:45:02,315 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:02,333 p=85518 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 22:45:03,200 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:03,220 p=85518 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 22:45:04,429 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:04,461 p=85518 u=craig n=ansible | TASK [Check if systemd-resolved is running name=systemd-resolved, state=stopped, enabled=False] ************************************************************************************************************
2023-03-29 22:45:05,148 p=85518 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:45:05,167 p=85518 u=craig n=ansible | TASK [Stop systemd-resolved name=systemd-resolved, state=stopped] ******************************************************************************************************************************************
2023-03-29 22:45:05,565 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:05,586 p=85518 u=craig n=ansible | TASK [Disable systemd-resolved name=systemd-resolved, enabled=False] ***************************************************************************************************************************************
2023-03-29 22:45:05,987 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:06,006 p=85518 u=craig n=ansible | TASK [Create output directory for generated configs path={{ config_output_dir }}, state=directory, mode=0755] **********************************************************************************************
2023-03-29 22:45:06,387 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:06,404 p=85518 u=craig n=ansible | TASK [Generate unbound.conf from Jinja2 template src=unbound.conf.j2, dest={{ config_output_dir }}/unbound.conf] *******************************************************************************************
2023-03-29 22:45:07,023 p=85518 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:45:07,041 p=85518 u=craig n=ansible | TASK [Ensure Unbound container is running name=unbound-dns, image=mvance/unbound:latest, state=started, restart_policy=always, ports=['53:53/udp', '53:53/tcp'], volumes=['{{ config_output_dir }}/unbound.conf:/opt/unbound/etc/unbound/unbound.conf:ro']] ***
2023-03-29 22:45:08,423 p=85518 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:45:08,454 p=85518 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 22:45:08,454 p=85518 u=craig n=ansible | unbound-dns                : ok=16   changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-03-29 22:54:36,333 p=86590 u=craig n=ansible | PLAY [Configure and Deploy Unbound container using Ansible] ************************************************************************************************************************************************
2023-03-29 22:54:36,350 p=86590 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-29 22:54:37,846 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:37,876 p=86590 u=craig n=ansible | TASK [docker : Update apt cache update_cache=True] *********************************************************************************************************************************************************
2023-03-29 22:54:42,749 p=86590 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:54:42,774 p=86590 u=craig n=ansible | TASK [docker : Install required packages name={{ item }}, state=present] ***********************************************************************************************************************************
2023-03-29 22:54:43,712 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=apt-transport-https)
2023-03-29 22:54:44,440 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=ca-certificates)
2023-03-29 22:54:45,174 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=curl)
2023-03-29 22:54:45,926 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=gnupg)
2023-03-29 22:54:46,648 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=lsb-release)
2023-03-29 22:54:47,382 p=86590 u=craig n=ansible | ok: [unbound-dns] => (item=software-properties-common)
2023-03-29 22:54:47,406 p=86590 u=craig n=ansible | TASK [docker : Add Docker GPG key url=https://download.docker.com/linux/ubuntu/gpg, state=present] *********************************************************************************************************
2023-03-29 22:54:48,069 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:48,091 p=86590 u=craig n=ansible | TASK [docker : Add Docker repository repo=deb [arch=amd64] https://download.docker.com/linux/ubuntu {{ ansible_distribution_release }} stable, state=present] **********************************************
2023-03-29 22:54:48,614 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:48,632 p=86590 u=craig n=ansible | TASK [docker : Install Docker name=docker-ce, state=present] ***********************************************************************************************************************************************
2023-03-29 22:54:49,359 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:49,378 p=86590 u=craig n=ansible | TASK [docker : Start and enable Docker service name=docker, state=started, enabled=True] *******************************************************************************************************************
2023-03-29 22:54:49,998 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:50,014 p=86590 u=craig n=ansible | TASK [docker : Add user to docker group name={{ ansible_user }}, groups=docker, append=True] ***************************************************************************************************************
2023-03-29 22:54:50,439 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:50,457 p=86590 u=craig n=ansible | TASK [docker : Install python3-pip name=python3-pip, state=present] ****************************************************************************************************************************************
2023-03-29 22:54:51,193 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:51,213 p=86590 u=craig n=ansible | TASK [docker : Install Docker SDK for Python name=['docker', 'requests', 'docker-compose'], state=present] *************************************************************************************************
2023-03-29 22:54:52,550 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:52,583 p=86590 u=craig n=ansible | TASK [Check if systemd-resolved is running name=systemd-resolved, state=stopped, enabled=False] ************************************************************************************************************
2023-03-29 22:54:52,984 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:53,005 p=86590 u=craig n=ansible | TASK [Stop systemd-resolved name=systemd-resolved, state=stopped] ******************************************************************************************************************************************
2023-03-29 22:54:53,016 p=86590 u=craig n=ansible | skipping: [unbound-dns]
2023-03-29 22:54:53,031 p=86590 u=craig n=ansible | TASK [Disable systemd-resolved name=systemd-resolved, enabled=False] ***************************************************************************************************************************************
2023-03-29 22:54:53,046 p=86590 u=craig n=ansible | skipping: [unbound-dns]
2023-03-29 22:54:53,061 p=86590 u=craig n=ansible | TASK [Create output directory for generated configs path={{ config_output_dir }}, state=directory, mode=0755] **********************************************************************************************
2023-03-29 22:54:53,439 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:53,457 p=86590 u=craig n=ansible | TASK [Generate unbound.conf from Jinja2 template src=unbound.conf.j2, dest={{ config_output_dir }}/unbound.conf] *******************************************************************************************
2023-03-29 22:54:54,280 p=86590 u=craig n=ansible | changed: [unbound-dns]
2023-03-29 22:54:54,296 p=86590 u=craig n=ansible | TASK [Ensure Unbound container is running name=unbound-dns, image=mvance/unbound:latest, state=started, restart_policy=always, ports=['53:53/udp', '53:53/tcp'], volumes=['{{ config_output_dir }}/unbound.conf:/opt/unbound/etc/unbound/unbound.conf:ro']] ***
2023-03-29 22:54:55,145 p=86590 u=craig n=ansible | ok: [unbound-dns]
2023-03-29 22:54:55,178 p=86590 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-29 22:54:55,178 p=86590 u=craig n=ansible | unbound-dns                : ok=14   changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-03-30 21:01:52,585 p=21474 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:01:52,595 p=21474 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:01:54,283 p=21474 u=craig n=ansible | ok: [caddy]
2023-03-30 21:01:54,311 p=21474 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:01:54,965 p=21474 u=craig n=ansible | ok: [caddy]
2023-03-30 21:01:54,975 p=21474 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:01:55,359 p=21474 u=craig n=ansible | ok: [caddy]
2023-03-30 21:01:55,369 p=21474 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-30 21:01:56,147 p=21474 u=craig n=ansible | changed: [caddy]
2023-03-30 21:01:56,154 p=21474 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:01:56,676 p=21474 u=craig n=ansible | ok: [caddy]
2023-03-30 21:01:56,687 p=21474 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:01:56,761 p=21474 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: ansible.errors.AnsibleUndefinedVariable: 'google_domains_api_key' is undefined
2023-03-30 21:01:56,761 p=21474 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "AnsibleUndefinedVariable: 'google_domains_api_key' is undefined"}
2023-03-30 21:01:56,762 p=21474 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:01:56,762 p=21474 u=craig n=ansible | caddy                      : ok=5    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-03-30 21:03:49,009 p=21743 u=craig n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/caddy.yaml': line 4, column 14, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   vars_files: ../../../secrets.yaml
             ^ here

2023-03-30 21:04:03,855 p=21796 u=craig n=ansible | ERROR! We were unable to read either as JSON nor YAML, these are the errors we got from each:
JSON: Expecting value: line 1 column 1 (char 0)

Syntax Error while loading YAML.
  mapping values are not allowed in this context

The error appears to be in '/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/caddy.yaml': line 4, column 14, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


   vars_files:
             ^ here

2023-03-30 21:04:43,845 p=21854 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:04:43,855 p=21854 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:04:45,289 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:45,296 p=21854 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:04:45,319 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:45,331 p=21854 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:04:45,904 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:45,914 p=21854 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:04:46,288 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:46,297 p=21854 u=craig n=ansible | TASK [caddy_docker : Copy Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ******************************************************************************************************************************
2023-03-30 21:04:47,179 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:47,190 p=21854 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:04:47,891 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:47,902 p=21854 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:04:48,419 p=21854 u=craig n=ansible | ok: [caddy]
2023-03-30 21:04:48,429 p=21854 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:08:07,325 p=21854 u=craig n=ansible |  [ERROR]: User interrupted execution

2023-03-30 21:08:09,770 p=22225 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:08:09,779 p=22225 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:08:10,989 p=22225 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:10,998 p=22225 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:08:11,020 p=22225 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:11,032 p=22225 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:08:11,685 p=22225 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:11,695 p=22225 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:08:12,064 p=22225 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:12,074 p=22225 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:08:12,086 p=22225 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:08:12,092 p=22225 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=updated_Caddyfile, dest=/opt/caddy/Caddyfile] ********************************************************************************************************************
2023-03-30 21:08:12,166 p=22225 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-30 21:08:12,166 p=22225 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Could not find or access 'updated_Caddyfile'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/updated_Caddyfile on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-30 21:08:12,167 p=22225 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:08:12,167 p=22225 u=craig n=ansible | caddy                      : ok=4    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-30 21:08:45,345 p=22332 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:08:45,353 p=22332 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:08:46,457 p=22332 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:46,465 p=22332 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:08:46,488 p=22332 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:46,499 p=22332 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:08:47,035 p=22332 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:47,044 p=22332 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:08:47,413 p=22332 u=craig n=ansible | ok: [caddy]
2023-03-30 21:08:47,422 p=22332 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:08:47,434 p=22332 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:08:47,441 p=22332 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=updated_Caddyfile, dest=/opt/caddy/Caddyfile] ********************************************************************************************************************
2023-03-30 21:08:47,554 p=22332 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-30 21:08:47,554 p=22332 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Could not find or access 'updated_Caddyfile'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/updated_Caddyfile on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-30 21:08:47,555 p=22332 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:08:47,555 p=22332 u=craig n=ansible | caddy                      : ok=4    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-30 21:10:43,425 p=22540 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:10:43,435 p=22540 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:10:44,893 p=22540 u=craig n=ansible | ok: [caddy]
2023-03-30 21:10:44,900 p=22540 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:10:44,921 p=22540 u=craig n=ansible | ok: [caddy]
2023-03-30 21:10:44,933 p=22540 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:10:45,447 p=22540 u=craig n=ansible | ok: [caddy]
2023-03-30 21:10:45,457 p=22540 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:10:45,837 p=22540 u=craig n=ansible | ok: [caddy]
2023-03-30 21:10:45,844 p=22540 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:10:45,857 p=22540 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:10:45,863 p=22540 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=updated_Caddyfile, dest=/opt/caddy/Caddyfile] ********************************************************************************************************************
2023-03-30 21:10:45,937 p=22540 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: If you are using a module and expect the file to exist on the remote, see the remote_src option
2023-03-30 21:10:45,938 p=22540 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "Could not find or access 'updated_Caddyfile'\nSearched in:\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/files/updated_Caddyfile\n\t/Users/craig/Projects/homelab/ansible/playbooks/caddy_update/updated_Caddyfile on the Ansible Controller.\nIf you are using a module and expect the file to exist on the remote, see the remote_src option"}
2023-03-30 21:10:45,938 p=22540 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:10:45,938 p=22540 u=craig n=ansible | caddy                      : ok=4    changed=0    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2023-03-30 21:11:26,264 p=22658 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:11:26,273 p=22658 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:11:27,390 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:27,399 p=22658 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:11:27,422 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:27,433 p=22658 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:11:27,990 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:28,000 p=22658 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:11:28,376 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:28,385 p=22658 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:11:28,397 p=22658 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:11:28,403 p=22658 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:11:29,002 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:29,011 p=22658 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:11:29,550 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:29,560 p=22658 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:11:30,087 p=22658 u=craig n=ansible | ok: [caddy]
2023-03-30 21:11:30,097 p=22658 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:11:30,111 p=22658 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:11:30,118 p=22658 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:11:30,131 p=22658 u=craig n=ansible | fatal: [caddy]: FAILED! => {"msg": "The conditional check 'caddy_container.exists == True and updated_caddyfile.changed == True' failed. The error was: error while evaluating conditional (caddy_container.exists == True and updated_caddyfile.changed == True): 'updated_caddyfile' is undefined\n\nThe error appears to be in '/Users/craig/Projects/homelab/ansible/roles/caddy_docker/tasks/main.yaml': line 48, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: Reload Caddy configuration\n  ^ here\n"}
2023-03-30 21:11:30,132 p=22658 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:11:30,132 p=22658 u=craig n=ansible | caddy                      : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2023-03-30 21:13:23,008 p=22889 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:13:23,018 p=22889 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:13:24,366 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:24,392 p=22889 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:13:24,419 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:24,432 p=22889 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:13:24,978 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:24,987 p=22889 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:13:25,374 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:25,384 p=22889 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:13:25,395 p=22889 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:13:25,401 p=22889 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:13:25,981 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:25,990 p=22889 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:13:26,506 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:26,518 p=22889 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:13:27,024 p=22889 u=craig n=ansible | ok: [caddy]
2023-03-30 21:13:27,034 p=22889 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:13:27,049 p=22889 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:13:27,057 p=22889 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:13:27,069 p=22889 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:13:27,086 p=22889 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:13:27,087 p=22889 u=craig n=ansible | caddy                      : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2023-03-30 21:14:01,422 p=23038 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:14:01,431 p=23038 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:14:02,519 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:02,525 p=23038 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:14:02,550 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:02,560 p=23038 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:14:03,082 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:03,091 p=23038 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:14:03,483 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:03,492 p=23038 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:14:03,505 p=23038 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:14:03,511 p=23038 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:14:04,171 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:04,181 p=23038 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:14:04,702 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:04,710 p=23038 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:14:05,244 p=23038 u=craig n=ansible | ok: [caddy]
2023-03-30 21:14:05,253 p=23038 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:14:05,267 p=23038 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:14:05,275 p=23038 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:14:05,863 p=23038 u=craig n=ansible | An exception occurred during task execution. To see the full traceback, use -vvv. The error was: docker.errors.APIError: 409 Client Error for http+docker://localhost/v1.42/containers/caddy/exec: Conflict ("Container b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39 is not running")
2023-03-30 21:14:05,863 p=23038 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "msg": "An unexpected docker error occurred: 409 Client Error for http+docker://localhost/v1.42/containers/caddy/exec: Conflict (\"Container b0333da8c0b865ebcfa71cd2169a3091fbc721f57a969acab3e237e7a7224f39 is not running\")"}
2023-03-30 21:14:05,868 p=23038 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:14:05,869 p=23038 u=craig n=ansible | caddy                      : ok=7    changed=0    unreachable=0    failed=1    skipped=2    rescued=0    ignored=0   
2023-03-30 21:20:16,332 p=23598 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:20:16,342 p=23598 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:20:17,814 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:17,820 p=23598 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:20:17,843 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:17,854 p=23598 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:20:18,353 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:18,362 p=23598 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:20:18,732 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:18,741 p=23598 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:20:18,752 p=23598 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:20:18,759 p=23598 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:20:19,333 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:19,342 p=23598 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:20:19,831 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:19,842 p=23598 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:20:20,347 p=23598 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:20,353 p=23598 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:20:20,365 p=23598 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:20:20,373 p=23598 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:20:20,385 p=23598 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:20:20,402 p=23598 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:20:20,403 p=23598 u=craig n=ansible | caddy                      : ok=7    changed=0    unreachable=0    failed=0    skipped=3    rescued=0    ignored=0   
2023-03-30 21:20:53,537 p=23742 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:20:53,547 p=23742 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:20:54,613 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:54,619 p=23742 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:20:54,643 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:54,656 p=23742 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:20:55,152 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:55,160 p=23742 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:20:55,518 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:55,527 p=23742 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:20:55,540 p=23742 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:20:55,546 p=23742 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:20:56,098 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:56,107 p=23742 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:20:56,611 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:56,621 p=23742 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:20:57,133 p=23742 u=craig n=ansible | ok: [caddy]
2023-03-30 21:20:57,143 p=23742 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:25:56,605 p=23742 u=craig n=ansible | changed: [caddy]
2023-03-30 21:25:56,618 p=23742 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:25:56,632 p=23742 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:25:56,648 p=23742 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:25:56,649 p=23742 u=craig n=ansible | caddy                      : ok=8    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-03-30 21:30:46,714 p=24609 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 21:30:46,724 p=24609 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 21:30:48,397 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:48,407 p=24609 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 21:30:48,429 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:48,455 p=24609 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 21:30:49,054 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:49,064 p=24609 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 21:30:49,426 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:49,435 p=24609 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 21:30:49,446 p=24609 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:30:49,452 p=24609 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 21:30:50,207 p=24609 u=craig n=ansible | changed: [caddy]
2023-03-30 21:30:50,215 p=24609 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 21:30:50,758 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:50,770 p=24609 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 21:30:51,324 p=24609 u=craig n=ansible | ok: [caddy]
2023-03-30 21:30:51,334 p=24609 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 21:30:51,349 p=24609 u=craig n=ansible | skipping: [caddy]
2023-03-30 21:30:51,356 p=24609 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 21:30:52,168 p=24609 u=craig n=ansible | changed: [caddy]
2023-03-30 21:30:52,190 p=24609 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 21:30:52,190 p=24609 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-03-30 23:29:49,795 p=27432 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 23:29:49,806 p=27432 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 23:29:51,289 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:51,298 p=27432 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 23:29:51,323 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:51,335 p=27432 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 23:29:51,867 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:51,878 p=27432 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 23:29:52,260 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:52,269 p=27432 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 23:29:52,281 p=27432 u=craig n=ansible | skipping: [caddy]
2023-03-30 23:29:52,288 p=27432 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 23:29:53,025 p=27432 u=craig n=ansible | changed: [caddy]
2023-03-30 23:29:53,032 p=27432 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 23:29:53,528 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:53,539 p=27432 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 23:29:54,053 p=27432 u=craig n=ansible | ok: [caddy]
2023-03-30 23:29:54,062 p=27432 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 23:29:54,077 p=27432 u=craig n=ansible | skipping: [caddy]
2023-03-30 23:29:54,084 p=27432 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 23:29:54,812 p=27432 u=craig n=ansible | changed: [caddy]
2023-03-30 23:29:54,835 p=27432 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 23:29:54,835 p=27432 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-03-30 23:32:04,760 p=27720 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-03-30 23:32:04,769 p=27720 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-30 23:32:06,239 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:06,246 p=27720 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-30 23:32:06,267 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:06,278 p=27720 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-30 23:32:06,795 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:06,804 p=27720 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-30 23:32:07,149 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:07,157 p=27720 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-30 23:32:07,168 p=27720 u=craig n=ansible | skipping: [caddy]
2023-03-30 23:32:07,174 p=27720 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-30 23:32:07,926 p=27720 u=craig n=ansible | changed: [caddy]
2023-03-30 23:32:07,933 p=27720 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-30 23:32:08,427 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:08,435 p=27720 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-30 23:32:08,952 p=27720 u=craig n=ansible | ok: [caddy]
2023-03-30 23:32:08,961 p=27720 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-30 23:32:08,974 p=27720 u=craig n=ansible | skipping: [caddy]
2023-03-30 23:32:08,982 p=27720 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-30 23:32:09,669 p=27720 u=craig n=ansible | changed: [caddy]
2023-03-30 23:32:09,687 p=27720 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-30 23:32:09,687 p=27720 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-03-31 21:33:49,966 p=62491 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-03-31 21:33:49,976 p=62491 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-03-31 21:33:51,604 p=62491 u=craig n=ansible | ok: [caddy]
2023-03-31 21:33:51,611 p=62491 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-03-31 21:33:51,622 p=62491 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-03-31 21:33:51,645 p=62491 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-03-31 21:33:51,666 p=62491 u=craig n=ansible | ok: [caddy]
2023-03-31 21:33:51,672 p=62491 u=craig n=ansible | TASK [Debug Google Domains API key var=google_domains_api_key] *********************************************************************************************************************************************
2023-03-31 21:33:51,684 p=62491 u=craig n=ansible | ok: [caddy] => {
    "google_domains_api_key": "VARIABLE IS NOT DEFINED!"
}
2023-03-31 21:33:51,695 p=62491 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-03-31 21:33:52,336 p=62491 u=craig n=ansible | ok: [caddy]
2023-03-31 21:33:52,346 p=62491 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-03-31 21:33:52,732 p=62491 u=craig n=ansible | ok: [caddy]
2023-03-31 21:33:52,741 p=62491 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-03-31 21:33:53,521 p=62491 u=craig n=ansible | changed: [caddy]
2023-03-31 21:33:53,529 p=62491 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-03-31 21:33:53,540 p=62491 u=craig n=ansible | skipping: [caddy]
2023-03-31 21:33:53,547 p=62491 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-03-31 21:33:54,159 p=62491 u=craig n=ansible | changed: [caddy]
2023-03-31 21:33:54,170 p=62491 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-03-31 21:33:54,801 p=62491 u=craig n=ansible | changed: [caddy]
2023-03-31 21:33:54,810 p=62491 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-03-31 21:39:30,596 p=62491 u=craig n=ansible | changed: [caddy]
2023-03-31 21:39:30,607 p=62491 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-03-31 21:39:30,622 p=62491 u=craig n=ansible | skipping: [caddy]
2023-03-31 21:39:30,647 p=62491 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-03-31 21:39:30,647 p=62491 u=craig n=ansible | caddy                      : ok=10   changed=4    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 20:23:35,745 p=91092 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 20:23:35,755 p=91092 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 20:23:37,476 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:37,498 p=91092 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 20:23:37,509 p=91092 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 20:23:37,515 p=91092 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 20:23:37,538 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:37,550 p=91092 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 20:23:38,304 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:38,313 p=91092 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 20:23:38,741 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:38,752 p=91092 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 20:23:39,338 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:39,347 p=91092 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 20:23:39,358 p=91092 u=craig n=ansible | skipping: [caddy]
2023-04-01 20:23:39,364 p=91092 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 20:23:39,891 p=91092 u=craig n=ansible | ok: [caddy]
2023-04-01 20:23:39,902 p=91092 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 20:23:40,605 p=91092 u=craig n=ansible | changed: [caddy]
2023-04-01 20:23:40,614 p=91092 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 20:23:45,080 p=91092 u=craig n=ansible | changed: [caddy]
2023-04-01 20:23:45,089 p=91092 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 20:23:45,101 p=91092 u=craig n=ansible | skipping: [caddy]
2023-04-01 20:23:45,118 p=91092 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 20:23:45,118 p=91092 u=craig n=ansible | caddy                      : ok=9    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 20:38:04,145 p=92277 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 20:38:04,155 p=92277 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 20:38:05,609 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:05,615 p=92277 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 20:38:05,626 p=92277 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 20:38:05,633 p=92277 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 20:38:05,654 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:05,665 p=92277 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 20:38:06,242 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:06,251 p=92277 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 20:38:06,611 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:06,620 p=92277 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 20:38:07,495 p=92277 u=craig n=ansible | changed: [caddy]
2023-04-01 20:38:07,502 p=92277 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 20:38:07,514 p=92277 u=craig n=ansible | skipping: [caddy]
2023-04-01 20:38:07,520 p=92277 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 20:38:08,022 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:08,032 p=92277 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 20:38:08,557 p=92277 u=craig n=ansible | ok: [caddy]
2023-04-01 20:38:08,567 p=92277 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 20:38:13,099 p=92277 u=craig n=ansible | changed: [caddy]
2023-04-01 20:38:13,109 p=92277 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 20:38:13,121 p=92277 u=craig n=ansible | skipping: [caddy]
2023-04-01 20:38:13,138 p=92277 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 20:38:13,138 p=92277 u=craig n=ansible | caddy                      : ok=9    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 21:32:28,309 p=96252 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-04-01 21:32:28,319 p=96252 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 21:32:29,838 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:29,846 p=96252 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 21:32:29,869 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:29,880 p=96252 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 21:32:30,618 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:30,628 p=96252 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 21:32:30,998 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:31,007 p=96252 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 21:32:31,019 p=96252 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:32:31,025 p=96252 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 21:32:31,615 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:31,625 p=96252 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 21:32:32,156 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:32,168 p=96252 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 21:32:32,697 p=96252 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:32,706 p=96252 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 21:32:32,719 p=96252 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:32:32,726 p=96252 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 21:32:33,457 p=96252 u=craig n=ansible | changed: [caddy]
2023-04-01 21:32:33,477 p=96252 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 21:32:33,477 p=96252 u=craig n=ansible | caddy                      : ok=8    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 21:32:52,223 p=96389 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-04-01 21:32:52,232 p=96389 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 21:32:53,334 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:53,342 p=96389 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 21:32:53,365 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:53,376 p=96389 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 21:32:53,929 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:53,937 p=96389 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 21:32:54,308 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:54,316 p=96389 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 21:32:54,327 p=96389 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:32:54,333 p=96389 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 21:32:55,116 p=96389 u=craig n=ansible | changed: [caddy]
2023-04-01 21:32:55,124 p=96389 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 21:32:55,649 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:55,660 p=96389 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 21:32:56,194 p=96389 u=craig n=ansible | ok: [caddy]
2023-04-01 21:32:56,203 p=96389 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 21:32:56,218 p=96389 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:32:56,225 p=96389 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 21:32:56,988 p=96389 u=craig n=ansible | changed: [caddy]
2023-04-01 21:32:57,009 p=96389 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 21:32:57,009 p=96389 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 21:37:22,854 p=96799 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 21:37:22,864 p=96799 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 21:37:24,590 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:24,612 p=96799 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 21:37:24,622 p=96799 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 21:37:24,629 p=96799 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 21:37:24,652 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:24,663 p=96799 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 21:37:25,209 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:25,218 p=96799 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 21:37:25,573 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:25,582 p=96799 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 21:37:26,159 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:26,168 p=96799 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 21:37:26,178 p=96799 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:37:26,185 p=96799 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 21:37:26,681 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:26,692 p=96799 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 21:37:27,217 p=96799 u=craig n=ansible | ok: [caddy]
2023-04-01 21:37:27,226 p=96799 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 21:37:31,986 p=96799 u=craig n=ansible | changed: [caddy]
2023-04-01 21:37:31,997 p=96799 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 21:37:32,008 p=96799 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:37:32,026 p=96799 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 21:37:32,026 p=96799 u=craig n=ansible | caddy                      : ok=9    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 21:43:59,011 p=97421 u=craig n=ansible | PLAY [Update Caddyfile in Docker container] ****************************************************************************************************************************************************************
2023-04-01 21:43:59,021 p=97421 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 21:44:00,557 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:00,564 p=97421 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 21:44:00,587 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:00,598 p=97421 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 21:44:01,255 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:01,265 p=97421 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 21:44:01,673 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:01,683 p=97421 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 21:44:01,693 p=97421 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:44:01,700 p=97421 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 21:44:02,458 p=97421 u=craig n=ansible | changed: [caddy]
2023-04-01 21:44:02,465 p=97421 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 21:44:02,978 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:02,989 p=97421 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 21:44:03,548 p=97421 u=craig n=ansible | ok: [caddy]
2023-04-01 21:44:03,558 p=97421 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 21:44:03,573 p=97421 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:44:03,581 p=97421 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 21:44:04,339 p=97421 u=craig n=ansible | changed: [caddy]
2023-04-01 21:44:04,359 p=97421 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 21:44:04,359 p=97421 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 21:45:51,501 p=97661 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 21:45:51,512 p=97661 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 21:45:52,975 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:52,982 p=97661 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 21:45:52,994 p=97661 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 21:45:53,000 p=97661 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 21:45:53,023 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:53,036 p=97661 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 21:45:53,548 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:53,559 p=97661 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 21:45:53,920 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:53,929 p=97661 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 21:45:54,518 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:54,528 p=97661 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 21:45:54,538 p=97661 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:45:54,545 p=97661 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 21:45:55,055 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:55,065 p=97661 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 21:45:55,600 p=97661 u=craig n=ansible | ok: [caddy]
2023-04-01 21:45:55,611 p=97661 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 21:46:00,044 p=97661 u=craig n=ansible | changed: [caddy]
2023-04-01 21:46:00,054 p=97661 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 21:46:00,066 p=97661 u=craig n=ansible | skipping: [caddy]
2023-04-01 21:46:00,083 p=97661 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 21:46:00,083 p=97661 u=craig n=ansible | caddy                      : ok=9    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 22:01:01,448 p=98911 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 22:01:01,459 p=98911 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 22:01:03,004 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:03,011 p=98911 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 22:01:03,023 p=98911 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 22:01:03,030 p=98911 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 22:01:03,052 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:03,080 p=98911 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 22:01:03,757 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:03,763 p=98911 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 22:01:04,134 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:04,142 p=98911 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 22:01:04,153 p=98911 u=craig n=ansible | skipping: [caddy]
2023-04-01 22:01:04,160 p=98911 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 22:01:04,929 p=98911 u=craig n=ansible | changed: [caddy]
2023-04-01 22:01:04,935 p=98911 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 22:01:05,454 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:05,461 p=98911 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 22:01:05,982 p=98911 u=craig n=ansible | ok: [caddy]
2023-04-01 22:01:05,988 p=98911 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 22:01:06,000 p=98911 u=craig n=ansible | skipping: [caddy]
2023-04-01 22:01:06,006 p=98911 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 22:01:06,696 p=98911 u=craig n=ansible | changed: [caddy]
2023-04-01 22:01:06,713 p=98911 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 22:01:06,713 p=98911 u=craig n=ansible | caddy                      : ok=9    changed=2    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 22:02:01,944 p=99084 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 22:02:01,954 p=99084 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 22:02:03,069 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:03,078 p=99084 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 22:02:03,091 p=99084 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 22:02:03,097 p=99084 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 22:02:03,120 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:03,132 p=99084 u=craig n=ansible | TASK [caddy_docker : Check Caddy container status name=caddy] **********************************************************************************************************************************************
2023-04-01 22:02:03,671 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:03,681 p=99084 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 22:02:04,056 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:04,065 p=99084 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] **********************************************************************************************************************
2023-04-01 22:02:04,662 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:04,672 p=99084 u=craig n=ansible | TASK [caddy_docker : Update Caddyfile src=Caddyfile, dest=/opt/caddy/Caddyfile] ****************************************************************************************************************************
2023-04-01 22:02:04,682 p=99084 u=craig n=ansible | skipping: [caddy]
2023-04-01 22:02:04,689 p=99084 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile] ***************************************************************************************************************************
2023-04-01 22:02:05,211 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:05,222 p=99084 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml] **************************************************************************************
2023-04-01 22:02:05,746 p=99084 u=craig n=ansible | ok: [caddy]
2023-04-01 22:02:05,756 p=99084 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 22:02:10,222 p=99084 u=craig n=ansible | changed: [caddy]
2023-04-01 22:02:10,232 p=99084 u=craig n=ansible | TASK [caddy_docker : Reload Caddy configuration container=caddy, command=caddy reload, chdir=/etc/caddy] ***************************************************************************************************
2023-04-01 22:02:10,244 p=99084 u=craig n=ansible | skipping: [caddy]
2023-04-01 22:02:10,261 p=99084 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 22:02:10,261 p=99084 u=craig n=ansible | caddy                      : ok=9    changed=1    unreachable=0    failed=0    skipped=2    rescued=0    ignored=0   
2023-04-01 22:37:03,835 p=2059 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 22:37:03,845 p=2059 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 22:37:05,400 p=2059 u=craig n=ansible | ok: [caddy]
2023-04-01 22:37:05,407 p=2059 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 22:37:05,419 p=2059 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 22:37:05,426 p=2059 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 22:37:05,448 p=2059 u=craig n=ansible | ok: [caddy]
2023-04-01 22:37:05,475 p=2059 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-01 22:37:07,193 p=2059 u=craig n=ansible | changed: [caddy]
2023-04-01 22:37:07,203 p=2059 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 22:37:07,587 p=2059 u=craig n=ansible | ok: [caddy]
2023-04-01 22:37:07,596 p=2059 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-01 22:37:08,357 p=2059 u=craig n=ansible | changed: [caddy]
2023-04-01 22:37:08,365 p=2059 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-01 22:37:08,862 p=2059 u=craig n=ansible | ok: [caddy]
2023-04-01 22:37:08,872 p=2059 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-01 22:37:09,457 p=2059 u=craig n=ansible | changed: [caddy]
2023-04-01 22:37:09,467 p=2059 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 22:37:12,880 p=2059 u=craig n=ansible | changed: [caddy]
2023-04-01 22:37:12,900 p=2059 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 22:37:12,900 p=2059 u=craig n=ansible | caddy                      : ok=9    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-01 22:38:22,361 p=2292 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 22:38:22,371 p=2292 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 22:38:23,998 p=2292 u=craig n=ansible | ok: [caddy]
2023-04-01 22:38:24,006 p=2292 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 22:38:24,019 p=2292 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 22:38:24,042 p=2292 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 22:38:24,065 p=2292 u=craig n=ansible | ok: [caddy]
2023-04-01 22:38:24,076 p=2292 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-01 22:38:24,789 p=2292 u=craig n=ansible | changed: [caddy]
2023-04-01 22:38:24,799 p=2292 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 22:38:25,186 p=2292 u=craig n=ansible | ok: [caddy]
2023-04-01 22:38:25,195 p=2292 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-01 22:38:25,782 p=2292 u=craig n=ansible | ok: [caddy]
2023-04-01 22:38:25,792 p=2292 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-01 22:38:26,486 p=2292 u=craig n=ansible | changed: [caddy]
2023-04-01 22:38:26,495 p=2292 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-01 22:38:27,015 p=2292 u=craig n=ansible | ok: [caddy]
2023-04-01 22:38:27,024 p=2292 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 22:39:59,224 p=2292 u=craig n=ansible | fatal: [caddy]: FAILED! => {"changed": false, "errors": [], "module_stderr": "", "module_stdout": "Step 1/5 : ARG VERSION=2\nStep 2/5 : FROM caddy:${VERSION}-builder AS builder\n2-builder: Pulling from library/caddy\nDigest: sha256:b47f0ab06d7bfe6a470f8dc0fd80467165e62867e0b4cf9a10de74157c0ca20e\nStatus: Image is up to date for caddy:2-builder\n ---> 66c494ede8be\nStep 3/5 : RUN xcaddy build     --with github.com/caddy-dns/google_domains\n ---> Running in 3fcd469d5021\np/buildenv_2023-04-02-0238.2884899706\n2023/04/02 02:38:29 [INFO] Writing main module: /tmp/buildenv_2023-04-02-0238.2884899706/main.go\npackage main\n\nimport (\n\tcaddycmd \"github.com/caddyserver/caddy/v2/cmd\"\n\n\t// plug in Caddy modules here\n\t_ \"github.com/caddyserver/caddy/v2/modules/standard\"\n\t_ \"github.com/caddy-dns/google_domains\"\n)\n\nfunc main() {\n\tcaddycmd.Main()\n}\n2023/04/02 02:38:29 [INFO] Initializing Go module\n2023/04/02 02:38:29 [INFO] exec (timeout=10s): /usr/local/go/bin/go mod init caddy \nodule caddy\ns:\n\tgo mod tidy\n2023/04/02 02:38:29 [INFO] Pinning versions\n/caddyserver/caddy/v2@v2.6.4 \n/caddyserver/caddy/v2 v2.6.4\nagic v0.17.2\n/google/uuid v1.3.0\netheus/client_golang v1.14.0\n/quic-go/quic-go v0.32.0\ngo: downloading go.uber.org/zap v1.24.0\ngo: downloading golang.org/x/sys v0.5.0\n v0.5.0\n/klauspost/cpuid/v2 v2.2.3\n/libdns/libdns v0.2.1\nez v1.1.0\niekg/dns v1.1.50\ngo: downloading golang.org/x/crypto v0.5.0\ngo: downloading golang.org/x/net v0.7.0\n/beorn7/perks v1.0.1\n/cespare/xxhash/v2 v2.1.2\n/cespare/xxhash v1.1.0\n/golang/protobuf v1.5.2\nodel v0.3.0\non v0.37.0\netheus/procfs v0.8.0\ngo: downloading google.golang.org/protobuf v1.28.1\nock v1.6.0\n/onsi/ginkgo/v2 v2.2.0\n/quic-go/qpack v0.4.0\nic v1.9.0\nultierr v1.6.0\ngo: downloading golang.org/x/tools v0.2.0\ngo: downloading golang.org/x/text v0.7.0\natttproud/golang_protobuf_extensions v1.0.1\nod v0.6.0\ngo: downloading golang.org/x/exp v0.0.0-20221205204356-47842c84f3db\n/quic-go/qtls-go1-18 v0.2.0\n/quic-go/qtls-go1-19 v0.2.0\n/quic-go/qtls-go1-20 v0.1.0\n-sprig v0.0.0-20210107165309-348f09dbbbc0\n/google/pprof v0.0.0-20210407192527-94a9f03dee38\n/beorn7/perks v1.0.1\n/caddyserver/caddy/v2 v2.6.4\nagic v0.17.2\n/cespare/xxhash/v2 v2.1.2\n-sprig v0.0.0-20210107165309-348f09dbbbc0\nock v1.6.0\n/golang/protobuf v1.5.2\n/google/pprof v0.0.0-20210407192527-94a9f03dee38\n/google/uuid v1.3.0\n/klauspost/cpuid/v2 v2.2.3\n/libdns/libdns v0.2.1\natttproud/golang_protobuf_extensions v1.0.1\nez v1.1.0\niekg/dns v1.1.50\n/onsi/ginkgo/v2 v2.2.0\netheus/client_golang v1.14.0\nodel v0.3.0\non v0.37.0\netheus/procfs v0.8.0\n/quic-go/qpack v0.4.0\n/quic-go/qtls-go1-18 v0.2.0\n/quic-go/qtls-go1-19 v0.2.0\n/quic-go/qtls-go1-20 v0.1.0\n/quic-go/quic-go v0.32.0\nic v1.9.0\nultierr v1.6.0\ngo: added go.uber.org/zap v1.24.0\ngo: added golang.org/x/crypto v0.5.0\ngo: added golang.org/x/exp v0.0.0-20221205204356-47842c84f3db\nod v0.6.0\ngo: added golang.org/x/net v0.7.0\ngo: added golang.org/x/sys v0.5.0\n v0.5.0\ngo: added golang.org/x/text v0.7.0\ngo: added golang.org/x/tools v0.2.0\ngo: added google.golang.org/protobuf v1.28.1\n/caddyserver/caddy/v2@v2.6.4 \nod/cache/vcs/e3d210753c935151f22938c6618b100c18cb0dfaf38a1531932da9ae2b56bc07: exit status 128:\n\tfatal: could not read Username for 'https://github.com': terminal prompts disabled\nConfirm the import path was entered correctly.\nIf this is a private repository, see https://golang.org/doc/faq#git_https for additional information.\n2023/04/02 02:39:58 [FATAL] exit status 1\n", "msg": "Error: build failed with (<Service: caddy>, \"The command '/bin/sh -c xcaddy build     --with github.com/caddy-dns/google_domains' returned a non-zero code: 1\")"}
2023-04-01 22:39:59,226 p=2292 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 22:39:59,226 p=2292 u=craig n=ansible | caddy                      : ok=8    changed=2    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2023-04-01 22:41:20,874 p=2633 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-01 22:41:20,884 p=2633 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-01 22:41:22,354 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:22,361 p=2633 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-01 22:41:22,373 p=2633 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-01 22:41:22,380 p=2633 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-01 22:41:22,403 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:22,414 p=2633 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-01 22:41:23,047 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:23,054 p=2633 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-01 22:41:23,434 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:23,443 p=2633 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-01 22:41:24,037 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:24,046 p=2633 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-01 22:41:24,742 p=2633 u=craig n=ansible | changed: [caddy]
2023-04-01 22:41:24,751 p=2633 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-01 22:41:25,269 p=2633 u=craig n=ansible | ok: [caddy]
2023-04-01 22:41:25,279 p=2633 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-01 22:46:49,747 p=2633 u=craig n=ansible | changed: [caddy]
2023-04-01 22:46:49,773 p=2633 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-01 22:46:49,773 p=2633 u=craig n=ansible | caddy                      : ok=9    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 13:58:20,000 p=15215 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 13:58:20,010 p=15215 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 13:58:21,646 p=15215 u=craig n=ansible | ok: [caddy]
2023-04-02 13:58:21,654 p=15215 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 13:58:21,666 p=15215 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 13:58:21,691 p=15215 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 13:58:21,715 p=15215 u=craig n=ansible | ok: [caddy]
2023-04-02 13:58:21,726 p=15215 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 13:58:23,335 p=15215 u=craig n=ansible | changed: [caddy]
2023-04-02 13:58:23,345 p=15215 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 13:58:23,766 p=15215 u=craig n=ansible | ok: [caddy]
2023-04-02 13:58:23,775 p=15215 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 13:58:24,532 p=15215 u=craig n=ansible | changed: [caddy]
2023-04-02 13:58:24,539 p=15215 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 13:58:25,071 p=15215 u=craig n=ansible | ok: [caddy]
2023-04-02 13:58:25,081 p=15215 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 13:58:25,738 p=15215 u=craig n=ansible | changed: [caddy]
2023-04-02 13:58:25,748 p=15215 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 13:58:29,340 p=15215 u=craig n=ansible | changed: [caddy]
2023-04-02 13:58:29,360 p=15215 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 13:58:29,360 p=15215 u=craig n=ansible | caddy                      : ok=9    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 13:59:41,417 p=15452 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 13:59:41,426 p=15452 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 13:59:42,866 p=15452 u=craig n=ansible | ok: [caddy]
2023-04-02 13:59:42,872 p=15452 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 13:59:42,883 p=15452 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 13:59:42,890 p=15452 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 13:59:42,911 p=15452 u=craig n=ansible | ok: [caddy]
2023-04-02 13:59:42,923 p=15452 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 13:59:43,555 p=15452 u=craig n=ansible | changed: [caddy]
2023-04-02 13:59:43,565 p=15452 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 13:59:43,946 p=15452 u=craig n=ansible | ok: [caddy]
2023-04-02 13:59:43,955 p=15452 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 13:59:44,563 p=15452 u=craig n=ansible | ok: [caddy]
2023-04-02 13:59:44,572 p=15452 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 13:59:45,267 p=15452 u=craig n=ansible | changed: [caddy]
2023-04-02 13:59:45,276 p=15452 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 13:59:45,795 p=15452 u=craig n=ansible | ok: [caddy]
2023-04-02 13:59:45,805 p=15452 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 13:59:49,001 p=15452 u=craig n=ansible | changed: [caddy]
2023-04-02 13:59:49,020 p=15452 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 13:59:49,021 p=15452 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 14:37:07,962 p=16756 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 14:37:07,970 p=16756 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 14:37:09,627 p=16756 u=craig n=ansible | ok: [caddy]
2023-04-02 14:37:09,634 p=16756 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 14:37:09,644 p=16756 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 14:37:09,664 p=16756 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 14:37:09,680 p=16756 u=craig n=ansible | ok: [caddy]
2023-04-02 14:37:09,687 p=16756 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 14:37:11,438 p=16756 u=craig n=ansible | changed: [caddy]
2023-04-02 14:37:11,448 p=16756 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 14:37:11,791 p=16756 u=craig n=ansible | ok: [caddy]
2023-04-02 14:37:11,800 p=16756 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 14:37:12,364 p=16756 u=craig n=ansible | ok: [caddy]
2023-04-02 14:37:12,374 p=16756 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 14:37:12,873 p=16756 u=craig n=ansible | ok: [caddy]
2023-04-02 14:37:12,885 p=16756 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 14:37:13,553 p=16756 u=craig n=ansible | changed: [caddy]
2023-04-02 14:37:13,561 p=16756 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 14:37:16,799 p=16756 u=craig n=ansible | changed: [caddy]
2023-04-02 14:37:16,815 p=16756 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 14:37:16,815 p=16756 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 15:02:27,252 p=19498 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:27,260 p=19498 u=craig n=ansible | TASK [Gathering Facts ] *****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:28,683 p=19498 u=craig n=ansible | ok: [caddy]
2023-04-02 15:02:28,687 p=19498 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] *************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:28,702 p=19498 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 15:02:28,708 p=19498 u=craig n=ansible | TASK [Include secrets] ******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:28,732 p=19498 u=craig n=ansible | ok: [caddy]
2023-04-02 15:02:28,741 p=19498 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:30,308 p=19498 u=craig n=ansible | changed: [caddy]
2023-04-02 15:02:30,313 p=19498 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:30,665 p=19498 u=craig n=ansible | ok: [caddy]
2023-04-02 15:02:30,670 p=19498 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:31,368 p=19498 u=craig n=ansible | changed: [caddy]
2023-04-02 15:02:31,373 p=19498 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:31,858 p=19498 u=craig n=ansible | ok: [caddy]
2023-04-02 15:02:31,863 p=19498 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:32,365 p=19498 u=craig n=ansible | ok: [caddy]
2023-04-02 15:02:32,370 p=19498 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:35,400 p=19498 u=craig n=ansible | changed: [caddy]
2023-04-02 15:02:35,413 p=19498 u=craig n=ansible | PLAY RECAP ******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:02:35,414 p=19498 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 15:03:59,327 p=19863 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:03:59,335 p=19863 u=craig n=ansible | TASK [Gathering Facts ] *****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:00,777 p=19863 u=craig n=ansible | ok: [caddy]
2023-04-02 15:04:00,784 p=19863 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] *************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:00,795 p=19863 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 15:04:00,801 p=19863 u=craig n=ansible | TASK [Include secrets] ******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:00,817 p=19863 u=craig n=ansible | ok: [caddy]
2023-04-02 15:04:00,825 p=19863 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:02,280 p=19863 u=craig n=ansible | changed: [caddy]
2023-04-02 15:04:02,290 p=19863 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:02,616 p=19863 u=craig n=ansible | ok: [caddy]
2023-04-02 15:04:02,625 p=19863 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] *********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:03,196 p=19863 u=craig n=ansible | ok: [caddy]
2023-04-02 15:04:03,206 p=19863 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:03,696 p=19863 u=craig n=ansible | ok: [caddy]
2023-04-02 15:04:03,707 p=19863 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:04,366 p=19863 u=craig n=ansible | changed: [caddy]
2023-04-02 15:04:04,374 p=19863 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:07,615 p=19863 u=craig n=ansible | changed: [caddy]
2023-04-02 15:04:07,632 p=19863 u=craig n=ansible | PLAY RECAP ******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
2023-04-02 15:04:07,632 p=19863 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 20:25:09,257 p=23092 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 20:25:09,266 p=23092 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 20:25:10,750 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:10,756 p=23092 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 20:25:10,767 p=23092 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 20:25:10,774 p=23092 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 20:25:10,796 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:10,810 p=23092 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 20:25:12,301 p=23092 u=craig n=ansible | changed: [caddy]
2023-04-02 20:25:12,308 p=23092 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 20:25:12,725 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:12,732 p=23092 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 20:25:13,322 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:13,328 p=23092 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 20:25:13,815 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:13,822 p=23092 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 20:25:14,331 p=23092 u=craig n=ansible | ok: [caddy]
2023-04-02 20:25:14,337 p=23092 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 20:25:17,547 p=23092 u=craig n=ansible | changed: [caddy]
2023-04-02 20:25:17,566 p=23092 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 20:25:17,566 p=23092 u=craig n=ansible | caddy                      : ok=9    changed=2    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 21:02:19,906 p=25852 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 21:02:19,916 p=25852 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 21:02:21,494 p=25852 u=craig n=ansible | ok: [caddy]
2023-04-02 21:02:21,502 p=25852 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 21:02:21,513 p=25852 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 21:02:21,520 p=25852 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 21:02:21,542 p=25852 u=craig n=ansible | ok: [caddy]
2023-04-02 21:02:21,570 p=25852 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 21:02:23,065 p=25852 u=craig n=ansible | changed: [caddy]
2023-04-02 21:02:23,072 p=25852 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 21:02:23,488 p=25852 u=craig n=ansible | ok: [caddy]
2023-04-02 21:02:23,497 p=25852 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 21:02:24,253 p=25852 u=craig n=ansible | changed: [caddy]
2023-04-02 21:02:24,260 p=25852 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 21:02:24,772 p=25852 u=craig n=ansible | ok: [caddy]
2023-04-02 21:02:24,782 p=25852 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 21:02:25,380 p=25852 u=craig n=ansible | changed: [caddy]
2023-04-02 21:02:25,389 p=25852 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 21:02:28,556 p=25852 u=craig n=ansible | changed: [caddy]
2023-04-02 21:02:28,577 p=25852 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 21:02:28,577 p=25852 u=craig n=ansible | caddy                      : ok=9    changed=4    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 21:17:11,266 p=27111 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 21:17:11,275 p=27111 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 21:17:12,775 p=27111 u=craig n=ansible | ok: [caddy]
2023-04-02 21:17:12,783 p=27111 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 21:17:12,793 p=27111 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 21:17:12,800 p=27111 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 21:17:12,822 p=27111 u=craig n=ansible | ok: [caddy]
2023-04-02 21:17:12,834 p=27111 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 21:17:14,495 p=27111 u=craig n=ansible | changed: [caddy]
2023-04-02 21:17:14,504 p=27111 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 21:17:14,903 p=27111 u=craig n=ansible | ok: [caddy]
2023-04-02 21:17:14,913 p=27111 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 21:17:15,544 p=27111 u=craig n=ansible | ok: [caddy]
2023-04-02 21:17:15,553 p=27111 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 21:17:16,053 p=27111 u=craig n=ansible | ok: [caddy]
2023-04-02 21:17:16,060 p=27111 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 21:17:16,766 p=27111 u=craig n=ansible | changed: [caddy]
2023-04-02 21:17:16,773 p=27111 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 21:17:19,950 p=27111 u=craig n=ansible | changed: [caddy]
2023-04-02 21:17:19,973 p=27111 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 21:17:19,973 p=27111 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2023-04-02 21:24:11,842 p=27687 u=craig n=ansible | PLAY [Set up Caddy reverse proxy] **************************************************************************************************************************************************************************
2023-04-02 21:24:11,851 p=27687 u=craig n=ansible | TASK [Gathering Facts ] ************************************************************************************************************************************************************************************
2023-04-02 21:24:13,314 p=27687 u=craig n=ansible | ok: [caddy]
2023-04-02 21:24:13,320 p=27687 u=craig n=ansible | TASK [Test debug msg=Running Caddy playbook ARGHHH] ********************************************************************************************************************************************************
2023-04-02 21:24:13,332 p=27687 u=craig n=ansible | ok: [caddy] => {
    "msg": "Running Caddy playbook ARGHHH"
}
2023-04-02 21:24:13,339 p=27687 u=craig n=ansible | TASK [Include secrets] *************************************************************************************************************************************************************************************
2023-04-02 21:24:13,360 p=27687 u=craig n=ansible | ok: [caddy]
2023-04-02 21:24:13,371 p=27687 u=craig n=ansible | TASK [caddy_docker : Stop and remove Caddy container if it exists name=caddy, state=absent] ****************************************************************************************************************
2023-04-02 21:24:15,089 p=27687 u=craig n=ansible | changed: [caddy]
2023-04-02 21:24:15,098 p=27687 u=craig n=ansible | TASK [caddy_docker : Create caddy directory path=/opt/caddy, state=directory] ******************************************************************************************************************************
2023-04-02 21:24:15,491 p=27687 u=craig n=ansible | ok: [caddy]
2023-04-02 21:24:15,500 p=27687 u=craig n=ansible | TASK [caddy_docker : Copy initial Caddyfile even if it exists src=Caddyfile, dest=/opt/caddy/Caddyfile, force=True] ****************************************************************************************
2023-04-02 21:24:16,256 p=27687 u=craig n=ansible | changed: [caddy]
2023-04-02 21:24:16,263 p=27687 u=craig n=ansible | TASK [caddy_docker : Copy Dockerfile src=Dockerfile, dest=/opt/caddy/Dockerfile, force=True] ***************************************************************************************************************
2023-04-02 21:24:16,780 p=27687 u=craig n=ansible | ok: [caddy]
2023-04-02 21:24:16,790 p=27687 u=craig n=ansible | TASK [caddy_docker : Copy docker-compose.yml src=templates/docker-compose.yml.j2, dest=/opt/caddy/docker-compose.yml, force=True] **************************************************************************
2023-04-02 21:24:17,315 p=27687 u=craig n=ansible | ok: [caddy]
2023-04-02 21:24:17,325 p=27687 u=craig n=ansible | TASK [caddy_docker : Start Caddy container project_src=/opt/caddy, state=present, build=True, pull=True] ***************************************************************************************************
2023-04-02 21:24:20,427 p=27687 u=craig n=ansible | changed: [caddy]
2023-04-02 21:24:20,448 p=27687 u=craig n=ansible | PLAY RECAP *************************************************************************************************************************************************************************************************
2023-04-02 21:24:20,448 p=27687 u=craig n=ansible | caddy                      : ok=9    changed=3    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
